{"ast":null,"code":"var tape = require('tape');\n\nvar thunky = require('./');\n\ntape('run only once', function (t) {\n  t.plan(3);\n  var ran = 0;\n  var run = thunky(function (cb) {\n    ran++;\n    cb();\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n});\ntape('run only once async', function (t) {\n  t.plan(3);\n  var ran = 0;\n  var run = thunky(function (cb) {\n    process.nextTick(function () {\n      ran++;\n      cb();\n    });\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n  });\n});\ntape('re-run on error', function (t) {\n  t.plan(3);\n  var ran = 0;\n  var run = thunky(function (cb) {\n    ran++;\n    cb(new Error('stop'));\n  });\n  run(function () {\n    t.same(ran, 1, 'ran once');\n    run(function () {\n      t.same(ran, 2, 'ran once');\n      run(function () {\n        t.same(ran, 3, 'ran once');\n      });\n    });\n  });\n});\ntape('pass arguments', function (t) {\n  t.plan(6);\n  var ran = 0;\n  var run = thunky(function (fn) {\n    ran++;\n    fn({\n      hello: 'world'\n    });\n  });\n  run(function (val) {\n    t.same(ran, 1, 'ran once');\n    t.same(val, {\n      hello: 'world'\n    });\n    run(function (val) {\n      t.same(ran, 1, 'ran once');\n      t.same(val, {\n        hello: 'world'\n      });\n      run(function (val) {\n        t.same(ran, 1, 'ran once');\n        t.same(val, {\n          hello: 'world'\n        });\n      });\n    });\n  });\n});\ntape('callback is optional', function (t) {\n  t.plan(2);\n  var ran = 0;\n  var run = thunky(function (fn) {\n    ran++;\n    fn({\n      hello: 'world'\n    });\n  });\n  run();\n  run(function (val) {\n    t.same(ran, 1, 'ran once');\n    t.same(val, {\n      hello: 'world'\n    });\n  });\n});\ntape('always async', function (t) {\n  t.plan(2);\n  var run = thunky(function (cb) {\n    process.nextTick(cb);\n  });\n  var sync = true;\n  run(function () {\n    t.ok(!sync, 'not sync');\n    var innerSync = true;\n    run(function () {\n      t.ok(!innerSync, 'not sync');\n    });\n    innerSync = false;\n  });\n  sync = false;\n});","map":{"version":3,"names":["tape","require","thunky","t","plan","ran","run","cb","same","process","nextTick","Error","fn","hello","val","sync","ok","innerSync"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/thunky/test.js"],"sourcesContent":["var tape = require('tape')\nvar thunky = require('./')\n\ntape('run only once', function (t) {\n  t.plan(3)\n\n  var ran = 0\n  var run = thunky(function (cb) {\n    ran++\n    cb()\n  })\n\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n})\n\ntape('run only once async', function (t) {\n  t.plan(3)\n\n  var ran = 0\n  var run = thunky(function (cb) {\n    process.nextTick(function () {\n      ran++\n      cb()\n    })\n  })\n\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n  run(function () {\n    t.same(ran, 1, 'ran once')\n  })\n})\n\ntape('re-run on error', function (t) {\n  t.plan(3)\n\n  var ran = 0\n  var run = thunky(function (cb) {\n    ran++\n    cb(new Error('stop'))\n  })\n\n  run(function () {\n    t.same(ran, 1, 'ran once')\n    run(function () {\n      t.same(ran, 2, 'ran once')\n      run(function () {\n        t.same(ran, 3, 'ran once')\n      })\n    })\n  })\n})\n\ntape('pass arguments', function (t) {\n  t.plan(6)\n\n  var ran = 0\n  var run = thunky(function (fn) {\n    ran++\n    fn({ hello: 'world' })\n  })\n\n  run(function (val) {\n    t.same(ran, 1, 'ran once')\n    t.same(val, { hello: 'world' })\n    run(function (val) {\n      t.same(ran, 1, 'ran once')\n      t.same(val, { hello: 'world' })\n      run(function (val) {\n        t.same(ran, 1, 'ran once')\n        t.same(val, { hello: 'world' })\n      })\n    })\n  })\n})\n\ntape('callback is optional', function (t) {\n  t.plan(2)\n\n  var ran = 0\n  var run = thunky(function (fn) {\n    ran++\n    fn({ hello: 'world' })\n  })\n\n  run()\n  run(function (val) {\n    t.same(ran, 1, 'ran once')\n    t.same(val, { hello: 'world' })\n  })\n})\n\ntape('always async', function (t) {\n  t.plan(2)\n\n  var run = thunky(function (cb) {\n    process.nextTick(cb)\n  })\n\n  var sync = true\n  run(function () {\n    t.ok(!sync, 'not sync')\n    var innerSync = true\n    run(function () {\n      t.ok(!innerSync, 'not sync')\n    })\n    innerSync = false\n  })\n  sync = false\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}