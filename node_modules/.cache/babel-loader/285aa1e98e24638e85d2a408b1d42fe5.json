{"ast":null,"code":"/**\n * Converts destructured parameters with default values to non-shorthand syntax.\n * This fixes the only Tagged Templates-related bug in ES Modules-supporting browsers (Safari 10 & 11).\n * Use this plugin instead of `@babel/plugin-transform-template-literals` when targeting ES Modules.\n *\n * @example\n *   // Bug 1: Safari 10/11 doesn't reliably return the same Strings value.\n *   // The value changes depending on invocation and function optimization state.\n *   function f() { return Object`` }\n *   f() === new f()  // false, should be true.\n *\n * @example\n *   // Bug 2: Safari 10/11 use the same cached strings value when the string parts are the same.\n *   // This behavior comes from an earlier version of the spec, and can cause tricky bugs.\n *   Object``===Object``  // true, should be false.\n *\n * Benchmarks: https://jsperf.com/compiled-tagged-template-performance\n */\nexport default (_ref => {\n  let {\n    types: t\n  } = _ref;\n  return {\n    name: \"transform-tagged-template-caching\",\n    visitor: {\n      TaggedTemplateExpression(path, state) {\n        // tagged templates we've already dealt with\n        let processed = state.get(\"processed\");\n\n        if (!processed) {\n          processed = new WeakSet();\n          state.set(\"processed\", processed);\n        }\n\n        if (processed.has(path.node)) return path.skip(); // Grab the expressions from the original tag.\n        //   tag`a${'hello'}`  // ['hello']\n\n        const expressions = path.node.quasi.expressions; // Create an identity function helper:\n        //   identity = t => t\n\n        let identity = state.get(\"identity\");\n\n        if (!identity) {\n          identity = path.scope.getProgramParent().generateDeclaredUidIdentifier(\"_\");\n          state.set(\"identity\", identity);\n          const binding = path.scope.getBinding(identity.name);\n          binding.path.get(\"init\").replaceWith(t.arrowFunctionExpression( // re-use the helper identifier for compressability\n          [t.identifier(\"t\")], t.identifier(\"t\")));\n        } // Use the identity function helper to get a reference to the template's Strings.\n        // We replace all expressions with `0` ensure Strings has the same shape.\n        //   identity`a${0}`\n\n\n        const template = t.taggedTemplateExpression(t.cloneNode(identity), t.templateLiteral(path.node.quasi.quasis, expressions.map(() => t.numericLiteral(0))));\n        processed.add(template); // Install an inline cache at the callsite using the global variable:\n        //   _t || (_t = identity`a${0}`)\n\n        const ident = path.scope.getProgramParent().generateDeclaredUidIdentifier(\"t\");\n        path.scope.getBinding(ident.name).path.parent.kind = \"let\";\n        const inlineCache = t.logicalExpression(\"||\", ident, t.assignmentExpression(\"=\", t.cloneNode(ident), template)); // The original tag function becomes a plain function call.\n        // The expressions omitted from the cached Strings tag are directly applied as arguments.\n        //   tag(_t || (_t = Object`a${0}`), 'hello')\n\n        const node = t.callExpression(path.node.tag, [inlineCache, ...expressions]);\n        path.replaceWith(node);\n      }\n\n    }\n  };\n});","map":{"version":3,"names":["types","t","name","visitor","TaggedTemplateExpression","path","state","processed","get","WeakSet","set","has","node","skip","expressions","quasi","identity","scope","getProgramParent","generateDeclaredUidIdentifier","binding","getBinding","replaceWith","arrowFunctionExpression","identifier","template","taggedTemplateExpression","cloneNode","templateLiteral","quasis","map","numericLiteral","add","ident","parent","kind","inlineCache","logicalExpression","assignmentExpression","callExpression","tag"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/@babel/preset-modules/src/plugins/transform-tagged-template-caching/index.js"],"sourcesContent":["/**\n * Converts destructured parameters with default values to non-shorthand syntax.\n * This fixes the only Tagged Templates-related bug in ES Modules-supporting browsers (Safari 10 & 11).\n * Use this plugin instead of `@babel/plugin-transform-template-literals` when targeting ES Modules.\n *\n * @example\n *   // Bug 1: Safari 10/11 doesn't reliably return the same Strings value.\n *   // The value changes depending on invocation and function optimization state.\n *   function f() { return Object`` }\n *   f() === new f()  // false, should be true.\n *\n * @example\n *   // Bug 2: Safari 10/11 use the same cached strings value when the string parts are the same.\n *   // This behavior comes from an earlier version of the spec, and can cause tricky bugs.\n *   Object``===Object``  // true, should be false.\n *\n * Benchmarks: https://jsperf.com/compiled-tagged-template-performance\n */\nexport default ({ types: t }) => ({\n  name: \"transform-tagged-template-caching\",\n  visitor: {\n    TaggedTemplateExpression(path, state) {\n      // tagged templates we've already dealt with\n      let processed = state.get(\"processed\");\n      if (!processed) {\n        processed = new WeakSet();\n        state.set(\"processed\", processed);\n      }\n\n      if (processed.has(path.node)) return path.skip();\n\n      // Grab the expressions from the original tag.\n      //   tag`a${'hello'}`  // ['hello']\n      const expressions = path.node.quasi.expressions;\n\n      // Create an identity function helper:\n      //   identity = t => t\n      let identity = state.get(\"identity\");\n      if (!identity) {\n        identity = path.scope\n          .getProgramParent()\n          .generateDeclaredUidIdentifier(\"_\");\n        state.set(\"identity\", identity);\n        const binding = path.scope.getBinding(identity.name);\n        binding.path.get(\"init\").replaceWith(\n          t.arrowFunctionExpression(\n            // re-use the helper identifier for compressability\n            [t.identifier(\"t\")],\n            t.identifier(\"t\")\n          )\n        );\n      }\n\n      // Use the identity function helper to get a reference to the template's Strings.\n      // We replace all expressions with `0` ensure Strings has the same shape.\n      //   identity`a${0}`\n      const template = t.taggedTemplateExpression(\n        t.cloneNode(identity),\n        t.templateLiteral(\n          path.node.quasi.quasis,\n          expressions.map(() => t.numericLiteral(0))\n        )\n      );\n      processed.add(template);\n\n      // Install an inline cache at the callsite using the global variable:\n      //   _t || (_t = identity`a${0}`)\n      const ident = path.scope\n        .getProgramParent()\n        .generateDeclaredUidIdentifier(\"t\");\n      path.scope.getBinding(ident.name).path.parent.kind = \"let\";\n      const inlineCache = t.logicalExpression(\n        \"||\",\n        ident,\n        t.assignmentExpression(\"=\", t.cloneNode(ident), template)\n      );\n\n      // The original tag function becomes a plain function call.\n      // The expressions omitted from the cached Strings tag are directly applied as arguments.\n      //   tag(_t || (_t = Object`a${0}`), 'hello')\n      const node = t.callExpression(path.node.tag, [\n        inlineCache,\n        ...expressions,\n      ]);\n      path.replaceWith(node);\n    },\n  },\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;EAAA,IAAC;IAAEA,KAAK,EAAEC;EAAT,CAAD;EAAA,OAAmB;IAChCC,IAAI,EAAE,mCAD0B;IAEhCC,OAAO,EAAE;MACPC,wBAAwB,CAACC,IAAD,EAAOC,KAAP,EAAc;QACpC;QACA,IAAIC,SAAS,GAAGD,KAAK,CAACE,GAAN,CAAU,WAAV,CAAhB;;QACA,IAAI,CAACD,SAAL,EAAgB;UACdA,SAAS,GAAG,IAAIE,OAAJ,EAAZ;UACAH,KAAK,CAACI,GAAN,CAAU,WAAV,EAAuBH,SAAvB;QACD;;QAED,IAAIA,SAAS,CAACI,GAAV,CAAcN,IAAI,CAACO,IAAnB,CAAJ,EAA8B,OAAOP,IAAI,CAACQ,IAAL,EAAP,CARM,CAUpC;QACA;;QACA,MAAMC,WAAW,GAAGT,IAAI,CAACO,IAAL,CAAUG,KAAV,CAAgBD,WAApC,CAZoC,CAcpC;QACA;;QACA,IAAIE,QAAQ,GAAGV,KAAK,CAACE,GAAN,CAAU,UAAV,CAAf;;QACA,IAAI,CAACQ,QAAL,EAAe;UACbA,QAAQ,GAAGX,IAAI,CAACY,KAAL,CACRC,gBADQ,GAERC,6BAFQ,CAEsB,GAFtB,CAAX;UAGAb,KAAK,CAACI,GAAN,CAAU,UAAV,EAAsBM,QAAtB;UACA,MAAMI,OAAO,GAAGf,IAAI,CAACY,KAAL,CAAWI,UAAX,CAAsBL,QAAQ,CAACd,IAA/B,CAAhB;UACAkB,OAAO,CAACf,IAAR,CAAaG,GAAb,CAAiB,MAAjB,EAAyBc,WAAzB,CACErB,CAAC,CAACsB,uBAAF,EACE;UACA,CAACtB,CAAC,CAACuB,UAAF,CAAa,GAAb,CAAD,CAFF,EAGEvB,CAAC,CAACuB,UAAF,CAAa,GAAb,CAHF,CADF;QAOD,CA9BmC,CAgCpC;QACA;QACA;;;QACA,MAAMC,QAAQ,GAAGxB,CAAC,CAACyB,wBAAF,CACfzB,CAAC,CAAC0B,SAAF,CAAYX,QAAZ,CADe,EAEff,CAAC,CAAC2B,eAAF,CACEvB,IAAI,CAACO,IAAL,CAAUG,KAAV,CAAgBc,MADlB,EAEEf,WAAW,CAACgB,GAAZ,CAAgB,MAAM7B,CAAC,CAAC8B,cAAF,CAAiB,CAAjB,CAAtB,CAFF,CAFe,CAAjB;QAOAxB,SAAS,CAACyB,GAAV,CAAcP,QAAd,EA1CoC,CA4CpC;QACA;;QACA,MAAMQ,KAAK,GAAG5B,IAAI,CAACY,KAAL,CACXC,gBADW,GAEXC,6BAFW,CAEmB,GAFnB,CAAd;QAGAd,IAAI,CAACY,KAAL,CAAWI,UAAX,CAAsBY,KAAK,CAAC/B,IAA5B,EAAkCG,IAAlC,CAAuC6B,MAAvC,CAA8CC,IAA9C,GAAqD,KAArD;QACA,MAAMC,WAAW,GAAGnC,CAAC,CAACoC,iBAAF,CAClB,IADkB,EAElBJ,KAFkB,EAGlBhC,CAAC,CAACqC,oBAAF,CAAuB,GAAvB,EAA4BrC,CAAC,CAAC0B,SAAF,CAAYM,KAAZ,CAA5B,EAAgDR,QAAhD,CAHkB,CAApB,CAlDoC,CAwDpC;QACA;QACA;;QACA,MAAMb,IAAI,GAAGX,CAAC,CAACsC,cAAF,CAAiBlC,IAAI,CAACO,IAAL,CAAU4B,GAA3B,EAAgC,CAC3CJ,WAD2C,EAE3C,GAAGtB,WAFwC,CAAhC,CAAb;QAIAT,IAAI,CAACiB,WAAL,CAAiBV,IAAjB;MACD;;IAjEM;EAFuB,CAAnB;AAAA,CAAf"},"metadata":{},"sourceType":"module"}