{"ast":null,"code":"import _defineProperty from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';// import { Button } from 'react-bootstrap'\nimport\"./upload.css\";import{useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=function Upload(){var _useState=useState(\" \"),_useState2=_slicedToArray(_useState,2),path=_useState2[0],setpath=_useState2[1];var _useState3=useState({name:'',img:''}),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewAuthor=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"trying\");e.preventDefault();formData=new FormData();// formData.append('photo', newUser.photo);\nformData.append('img',newUser.img);formData.append('name',newUser.name);// formData.append('img', newUser.name);\n_context.prev=5;_context.next=8;return axios.post('http://localhost:5000/api/users/upload/',formData);case 8:data=_context.sent;console.log(data.data);setpath(data.data.img);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);throw new Error(\"something happended\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){console.log(\"try\");setNewAuthor(_objectSpread(_objectSpread({},newUser),{},_defineProperty({},e.target.name,e.target.value)));};var handlePhoto=function handlePhoto(e){console.log(\"ing\");setNewAuthor(_objectSpread(_objectSpread({},newUser),{},{img:e.target.files[0]}));console.log(newUser);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".png, .jpg, .jpeg\",name:\"img\",onChange:handlePhoto}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"name\",name:\"name\",value:newUser.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../../../\".concat(path))})})]});};export default Upload;","map":{"version":3,"names":["React","useState","axios","Upload","path","setpath","name","img","newUser","setNewAuthor","handleSubmit","e","console","log","preventDefault","formData","FormData","append","post","data","Error","handleChange","target","value","handlePhoto","files","require"],"sources":["C:/Users/Rohith/mern/frontend/src/screens/upload/Upload.js"],"sourcesContent":["import React from 'react'\r\n// import { Button } from 'react-bootstrap'\r\nimport \"./upload.css\"\r\nimport { useState } from 'react'\r\nimport axios from 'axios';\r\nconst Upload = () => {\r\n  const [path,setpath]=useState(\" \");\r\n  const [newUser, setNewAuthor] = useState(\r\n    {\r\n        name: '',\r\n        img: '',\r\n    }\r\n);\r\nconst handleSubmit = async(e) => {\r\n  console.log(\"trying\")\r\n  e.preventDefault();\r\n  const formData = new FormData();\r\n  // formData.append('photo', newUser.photo);\r\n  formData.append('img', newUser.img);\r\n  formData.append('name', newUser.name);\r\n  // formData.append('img', newUser.name);\r\n  try{\r\n  const data=await axios.post('http://localhost:5000/api/users/upload/', formData)\r\n      console.log(data.data) \r\n      setpath(data.data.img)\r\n      }\r\n      catch(e){\r\n        throw new Error(\"something happended\");\r\n      }\r\n}\r\nconst handleChange = (e) => {\r\n  console.log(\"try\")\r\n  setNewAuthor({...newUser, [e.target.name]: e.target.value});\r\n}\r\n\r\nconst handlePhoto = (e) => {\r\n  console.log(\"ing\")\r\n  setNewAuthor({...newUser, img: e.target.files[0]});\r\n  console.log(newUser);\r\n}\r\n  return (\r\n    <div>\r\n    <form onSubmit={handleSubmit} encType='multipart/form-data'>\r\n            <input \r\n                type=\"file\" \r\n                accept=\".png, .jpg, .jpeg\"\r\n                name=\"img\"\r\n                onChange={handlePhoto}\r\n            />\r\n\r\n            <input \r\n                type=\"text\"\r\n                placeholder=\"name\"\r\n                name=\"name\"\r\n                value={newUser.name}\r\n                onChange={handleChange}\r\n            />\r\n\r\n            {/* <input \r\n                type=\"date\"\r\n                name=\"birthdate\"\r\n                value={newUser.date}\r\n                onChange={handleChange}\r\n            /> */}\r\n\r\n            <input \r\n                type=\"submit\"\r\n            />\r\n        </form>\r\n        <div><img src={require(`../../../../${path}`)}></img></div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Upload"],"mappings":"glBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA;AACA,MAAO,cAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFACA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,cAAqBF,QAAQ,CAAC,GAAD,CAA7B,wCAAOG,IAAP,eAAYC,OAAZ,eACA,eAAgCJ,QAAQ,CACtC,CACIK,IAAI,CAAE,EADV,CAEIC,GAAG,CAAE,EAFT,CADsC,CAAxC,yCAAOC,OAAP,eAAgBC,YAAhB,eAMF,GAAMC,aAAY,4FAAG,iBAAMC,CAAN,sIACnBC,OAAO,CAACC,GAAR,CAAY,QAAZ,EACAF,CAAC,CAACG,cAAF,GACMC,QAHa,CAGF,GAAIC,SAAJ,EAHE,CAInB;AACAD,QAAQ,CAACE,MAAT,CAAgB,KAAhB,CAAuBT,OAAO,CAACD,GAA/B,EACAQ,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBT,OAAO,CAACF,IAAhC,EACA;AAPmB,sCASFJ,MAAK,CAACgB,IAAN,CAAW,yCAAX,CAAsDH,QAAtD,CATE,QASbI,IATa,eAUfP,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACA,IAAjB,EACAd,OAAO,CAACc,IAAI,CAACA,IAAL,CAAUZ,GAAX,CAAP,CAXe,sFAcP,IAAIa,MAAJ,CAAU,qBAAV,CAdO,sEAAH,kBAAZV,aAAY,4CAAlB,CAiBA,GAAMW,aAAY,CAAG,QAAfA,aAAe,CAACV,CAAD,CAAO,CAC1BC,OAAO,CAACC,GAAR,CAAY,KAAZ,EACAJ,YAAY,gCAAKD,OAAL,wBAAeG,CAAC,CAACW,MAAF,CAAShB,IAAxB,CAA+BK,CAAC,CAACW,MAAF,CAASC,KAAxC,GAAZ,CACD,CAHD,CAKA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACb,CAAD,CAAO,CACzBC,OAAO,CAACC,GAAR,CAAY,KAAZ,EACAJ,YAAY,gCAAKD,OAAL,MAAcD,GAAG,CAAEI,CAAC,CAACW,MAAF,CAASG,KAAT,CAAe,CAAf,CAAnB,GAAZ,CACAb,OAAO,CAACC,GAAR,CAAYL,OAAZ,EACD,CAJD,CAKE,mBACE,oCACA,cAAM,QAAQ,CAAEE,YAAhB,CAA8B,OAAO,CAAC,qBAAtC,wBACQ,cACI,IAAI,CAAC,MADT,CAEI,MAAM,CAAC,mBAFX,CAGI,IAAI,CAAC,KAHT,CAII,QAAQ,CAAEc,WAJd,EADR,cAQQ,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,MAFhB,CAGI,IAAI,CAAC,MAHT,CAII,KAAK,CAAEhB,OAAO,CAACF,IAJnB,CAKI,QAAQ,CAAEe,YALd,EARR,cAuBQ,cACI,IAAI,CAAC,QADT,EAvBR,GADA,cA4BI,kCAAK,YAAK,GAAG,CAAEK,OAAO,uBAAgBtB,IAAhB,EAAjB,EAAL,EA5BJ,GADF,CAgCD,CAnED,CAqEA,cAAeD,OAAf"},"metadata":{},"sourceType":"module"}