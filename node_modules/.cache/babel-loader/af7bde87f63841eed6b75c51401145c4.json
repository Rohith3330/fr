{"ast":null,"code":"/*!\n * HTML Parser By John Resig (ejohn.org)\n * Modified by Juriy \"kangax\" Zaytsev\n * Original code by Erik Arvidsson, Mozilla Public License\n * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js\n */\n\n/*\n * // Use like so:\n * HTMLParser(htmlString, {\n *     start: function(tag, attrs, unary) {},\n *     end: function(tag) {},\n *     chars: function(text) {},\n *     comment: function(text) {}\n * });\n *\n * // or to get an XML string:\n * HTMLtoXML(htmlString);\n *\n * // or to get an XML DOM Document\n * HTMLtoDOM(htmlString);\n *\n * // or to inject into an existing document/DOM node\n * HTMLtoDOM(htmlString, document);\n * HTMLtoDOM(htmlString, document.body);\n *\n */\n\n/* global ActiveXObject, DOMDocument */\n'use strict';\n\nvar createMapFromString = require('./utils').createMapFromString;\n\nvar replaceAsync = require('./utils').replaceAsync;\n\nfunction makeMap(values) {\n  return createMapFromString(values, true);\n} // Regular Expressions for parsing tags and attributes\n\n\nvar singleAttrIdentifier = /([^\\s\"'<>/=]+)/,\n    singleAttrAssigns = [/=/],\n    singleAttrValues = [// attr value double quotes\n/\"([^\"]*)\"+/.source, // attr value, single quotes\n/'([^']*)'+/.source, // attr value, no quotes\n/([^ \\t\\n\\f\\r\"'`=<>]+)/.source],\n    // https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-QName\nqnameCapture = function () {\n  // based on https://www.npmjs.com/package/ncname\n  var combiningChar = '\\\\u0300-\\\\u0345\\\\u0360\\\\u0361\\\\u0483-\\\\u0486\\\\u0591-\\\\u05A1\\\\u05A3-\\\\u05B9\\\\u05BB-\\\\u05BD\\\\u05BF\\\\u05C1\\\\u05C2\\\\u05C4\\\\u064B-\\\\u0652\\\\u0670\\\\u06D6-\\\\u06E4\\\\u06E7\\\\u06E8\\\\u06EA-\\\\u06ED\\\\u0901-\\\\u0903\\\\u093C\\\\u093E-\\\\u094D\\\\u0951-\\\\u0954\\\\u0962\\\\u0963\\\\u0981-\\\\u0983\\\\u09BC\\\\u09BE-\\\\u09C4\\\\u09C7\\\\u09C8\\\\u09CB-\\\\u09CD\\\\u09D7\\\\u09E2\\\\u09E3\\\\u0A02\\\\u0A3C\\\\u0A3E-\\\\u0A42\\\\u0A47\\\\u0A48\\\\u0A4B-\\\\u0A4D\\\\u0A70\\\\u0A71\\\\u0A81-\\\\u0A83\\\\u0ABC\\\\u0ABE-\\\\u0AC5\\\\u0AC7-\\\\u0AC9\\\\u0ACB-\\\\u0ACD\\\\u0B01-\\\\u0B03\\\\u0B3C\\\\u0B3E-\\\\u0B43\\\\u0B47\\\\u0B48\\\\u0B4B-\\\\u0B4D\\\\u0B56\\\\u0B57\\\\u0B82\\\\u0B83\\\\u0BBE-\\\\u0BC2\\\\u0BC6-\\\\u0BC8\\\\u0BCA-\\\\u0BCD\\\\u0BD7\\\\u0C01-\\\\u0C03\\\\u0C3E-\\\\u0C44\\\\u0C46-\\\\u0C48\\\\u0C4A-\\\\u0C4D\\\\u0C55\\\\u0C56\\\\u0C82\\\\u0C83\\\\u0CBE-\\\\u0CC4\\\\u0CC6-\\\\u0CC8\\\\u0CCA-\\\\u0CCD\\\\u0CD5\\\\u0CD6\\\\u0D02\\\\u0D03\\\\u0D3E-\\\\u0D43\\\\u0D46-\\\\u0D48\\\\u0D4A-\\\\u0D4D\\\\u0D57\\\\u0E31\\\\u0E34-\\\\u0E3A\\\\u0E47-\\\\u0E4E\\\\u0EB1\\\\u0EB4-\\\\u0EB9\\\\u0EBB\\\\u0EBC\\\\u0EC8-\\\\u0ECD\\\\u0F18\\\\u0F19\\\\u0F35\\\\u0F37\\\\u0F39\\\\u0F3E\\\\u0F3F\\\\u0F71-\\\\u0F84\\\\u0F86-\\\\u0F8B\\\\u0F90-\\\\u0F95\\\\u0F97\\\\u0F99-\\\\u0FAD\\\\u0FB1-\\\\u0FB7\\\\u0FB9\\\\u20D0-\\\\u20DC\\\\u20E1\\\\u302A-\\\\u302F\\\\u3099\\\\u309A';\n  var digit = '0-9\\\\u0660-\\\\u0669\\\\u06F0-\\\\u06F9\\\\u0966-\\\\u096F\\\\u09E6-\\\\u09EF\\\\u0A66-\\\\u0A6F\\\\u0AE6-\\\\u0AEF\\\\u0B66-\\\\u0B6F\\\\u0BE7-\\\\u0BEF\\\\u0C66-\\\\u0C6F\\\\u0CE6-\\\\u0CEF\\\\u0D66-\\\\u0D6F\\\\u0E50-\\\\u0E59\\\\u0ED0-\\\\u0ED9\\\\u0F20-\\\\u0F29';\n  var extender = '\\\\xB7\\\\u02D0\\\\u02D1\\\\u0387\\\\u0640\\\\u0E46\\\\u0EC6\\\\u3005\\\\u3031-\\\\u3035\\\\u309D\\\\u309E\\\\u30FC-\\\\u30FE';\n  var letter = 'A-Za-z\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\\\u0131\\\\u0134-\\\\u013E\\\\u0141-\\\\u0148\\\\u014A-\\\\u017E\\\\u0180-\\\\u01C3\\\\u01CD-\\\\u01F0\\\\u01F4\\\\u01F5\\\\u01FA-\\\\u0217\\\\u0250-\\\\u02A8\\\\u02BB-\\\\u02C1\\\\u0386\\\\u0388-\\\\u038A\\\\u038C\\\\u038E-\\\\u03A1\\\\u03A3-\\\\u03CE\\\\u03D0-\\\\u03D6\\\\u03DA\\\\u03DC\\\\u03DE\\\\u03E0\\\\u03E2-\\\\u03F3\\\\u0401-\\\\u040C\\\\u040E-\\\\u044F\\\\u0451-\\\\u045C\\\\u045E-\\\\u0481\\\\u0490-\\\\u04C4\\\\u04C7\\\\u04C8\\\\u04CB\\\\u04CC\\\\u04D0-\\\\u04EB\\\\u04EE-\\\\u04F5\\\\u04F8\\\\u04F9\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0586\\\\u05D0-\\\\u05EA\\\\u05F0-\\\\u05F2\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0671-\\\\u06B7\\\\u06BA-\\\\u06BE\\\\u06C0-\\\\u06CE\\\\u06D0-\\\\u06D3\\\\u06D5\\\\u06E5\\\\u06E6\\\\u0905-\\\\u0939\\\\u093D\\\\u0958-\\\\u0961\\\\u0985-\\\\u098C\\\\u098F\\\\u0990\\\\u0993-\\\\u09A8\\\\u09AA-\\\\u09B0\\\\u09B2\\\\u09B6-\\\\u09B9\\\\u09DC\\\\u09DD\\\\u09DF-\\\\u09E1\\\\u09F0\\\\u09F1\\\\u0A05-\\\\u0A0A\\\\u0A0F\\\\u0A10\\\\u0A13-\\\\u0A28\\\\u0A2A-\\\\u0A30\\\\u0A32\\\\u0A33\\\\u0A35\\\\u0A36\\\\u0A38\\\\u0A39\\\\u0A59-\\\\u0A5C\\\\u0A5E\\\\u0A72-\\\\u0A74\\\\u0A85-\\\\u0A8B\\\\u0A8D\\\\u0A8F-\\\\u0A91\\\\u0A93-\\\\u0AA8\\\\u0AAA-\\\\u0AB0\\\\u0AB2\\\\u0AB3\\\\u0AB5-\\\\u0AB9\\\\u0ABD\\\\u0AE0\\\\u0B05-\\\\u0B0C\\\\u0B0F\\\\u0B10\\\\u0B13-\\\\u0B28\\\\u0B2A-\\\\u0B30\\\\u0B32\\\\u0B33\\\\u0B36-\\\\u0B39\\\\u0B3D\\\\u0B5C\\\\u0B5D\\\\u0B5F-\\\\u0B61\\\\u0B85-\\\\u0B8A\\\\u0B8E-\\\\u0B90\\\\u0B92-\\\\u0B95\\\\u0B99\\\\u0B9A\\\\u0B9C\\\\u0B9E\\\\u0B9F\\\\u0BA3\\\\u0BA4\\\\u0BA8-\\\\u0BAA\\\\u0BAE-\\\\u0BB5\\\\u0BB7-\\\\u0BB9\\\\u0C05-\\\\u0C0C\\\\u0C0E-\\\\u0C10\\\\u0C12-\\\\u0C28\\\\u0C2A-\\\\u0C33\\\\u0C35-\\\\u0C39\\\\u0C60\\\\u0C61\\\\u0C85-\\\\u0C8C\\\\u0C8E-\\\\u0C90\\\\u0C92-\\\\u0CA8\\\\u0CAA-\\\\u0CB3\\\\u0CB5-\\\\u0CB9\\\\u0CDE\\\\u0CE0\\\\u0CE1\\\\u0D05-\\\\u0D0C\\\\u0D0E-\\\\u0D10\\\\u0D12-\\\\u0D28\\\\u0D2A-\\\\u0D39\\\\u0D60\\\\u0D61\\\\u0E01-\\\\u0E2E\\\\u0E30\\\\u0E32\\\\u0E33\\\\u0E40-\\\\u0E45\\\\u0E81\\\\u0E82\\\\u0E84\\\\u0E87\\\\u0E88\\\\u0E8A\\\\u0E8D\\\\u0E94-\\\\u0E97\\\\u0E99-\\\\u0E9F\\\\u0EA1-\\\\u0EA3\\\\u0EA5\\\\u0EA7\\\\u0EAA\\\\u0EAB\\\\u0EAD\\\\u0EAE\\\\u0EB0\\\\u0EB2\\\\u0EB3\\\\u0EBD\\\\u0EC0-\\\\u0EC4\\\\u0F40-\\\\u0F47\\\\u0F49-\\\\u0F69\\\\u10A0-\\\\u10C5\\\\u10D0-\\\\u10F6\\\\u1100\\\\u1102\\\\u1103\\\\u1105-\\\\u1107\\\\u1109\\\\u110B\\\\u110C\\\\u110E-\\\\u1112\\\\u113C\\\\u113E\\\\u1140\\\\u114C\\\\u114E\\\\u1150\\\\u1154\\\\u1155\\\\u1159\\\\u115F-\\\\u1161\\\\u1163\\\\u1165\\\\u1167\\\\u1169\\\\u116D\\\\u116E\\\\u1172\\\\u1173\\\\u1175\\\\u119E\\\\u11A8\\\\u11AB\\\\u11AE\\\\u11AF\\\\u11B7\\\\u11B8\\\\u11BA\\\\u11BC-\\\\u11C2\\\\u11EB\\\\u11F0\\\\u11F9\\\\u1E00-\\\\u1E9B\\\\u1EA0-\\\\u1EF9\\\\u1F00-\\\\u1F15\\\\u1F18-\\\\u1F1D\\\\u1F20-\\\\u1F45\\\\u1F48-\\\\u1F4D\\\\u1F50-\\\\u1F57\\\\u1F59\\\\u1F5B\\\\u1F5D\\\\u1F5F-\\\\u1F7D\\\\u1F80-\\\\u1FB4\\\\u1FB6-\\\\u1FBC\\\\u1FBE\\\\u1FC2-\\\\u1FC4\\\\u1FC6-\\\\u1FCC\\\\u1FD0-\\\\u1FD3\\\\u1FD6-\\\\u1FDB\\\\u1FE0-\\\\u1FEC\\\\u1FF2-\\\\u1FF4\\\\u1FF6-\\\\u1FFC\\\\u2126\\\\u212A\\\\u212B\\\\u212E\\\\u2180-\\\\u2182\\\\u3007\\\\u3021-\\\\u3029\\\\u3041-\\\\u3094\\\\u30A1-\\\\u30FA\\\\u3105-\\\\u312C\\\\u4E00-\\\\u9FA5\\\\uAC00-\\\\uD7A3';\n  var ncname = '[' + letter + '_][' + letter + digit + '\\\\.\\\\-_' + combiningChar + extender + ']*';\n  return '((?:' + ncname + '\\\\:)?' + ncname + ')';\n}(),\n    startTagOpen = new RegExp('^<' + qnameCapture),\n    startTagClose = /^\\s*(\\/?)>/,\n    endTag = new RegExp('^<\\\\/' + qnameCapture + '[^>]*>'),\n    doctype = /^<!DOCTYPE\\s?[^>]+>/i;\n\nvar IS_REGEX_CAPTURING_BROKEN = false;\n'x'.replace(/x(.)?/g, function (m, g) {\n  IS_REGEX_CAPTURING_BROKEN = g === '';\n}); // Empty Elements\n\nvar empty = makeMap('area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr'); // Inline Elements\n\nvar inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,noscript,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,svg,textarea,tt,u,var'); // Elements that you can, intentionally, leave open\n// (and which close themselves)\n\nvar closeSelf = makeMap('colgroup,dd,dt,li,option,p,td,tfoot,th,thead,tr,source'); // Attributes that have their values filled in disabled='disabled'\n\nvar fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'); // Special Elements (can contain anything)\n\nvar special = makeMap('script,style'); // HTML5 tags https://html.spec.whatwg.org/multipage/indices.html#elements-3\n// Phrasing Content https://html.spec.whatwg.org/multipage/dom.html#phrasing-content\n\nvar nonPhrasing = makeMap('address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,ol,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track,ul');\nvar reCache = {};\n\nfunction attrForHandler(handler) {\n  var pattern = singleAttrIdentifier.source + '(?:\\\\s*(' + joinSingleAttrAssigns(handler) + ')' + '[ \\\\t\\\\n\\\\f\\\\r]*(?:' + singleAttrValues.join('|') + '))?';\n\n  if (handler.customAttrSurround) {\n    var attrClauses = [];\n\n    for (var i = handler.customAttrSurround.length - 1; i >= 0; i--) {\n      attrClauses[i] = '(?:' + '(' + handler.customAttrSurround[i][0].source + ')\\\\s*' + pattern + '\\\\s*(' + handler.customAttrSurround[i][1].source + ')' + ')';\n    }\n\n    attrClauses.push('(?:' + pattern + ')');\n    pattern = '(?:' + attrClauses.join('|') + ')';\n  }\n\n  return new RegExp('^\\\\s*' + pattern);\n}\n\nfunction joinSingleAttrAssigns(handler) {\n  return singleAttrAssigns.concat(handler.customAttrAssign || []).map(function (assign) {\n    return '(?:' + assign.source + ')';\n  }).join('|');\n}\n\nclass HTMLParser {\n  constructor(html, handler) {\n    this.html = html;\n    this.handler = handler;\n  }\n\n  async parse() {\n    let html = this.html;\n    const handler = this.handler;\n    var stack = [],\n        lastTag;\n    var attribute = attrForHandler(handler);\n    var last, prevTag, nextTag;\n\n    while (html) {\n      last = html; // Make sure we're not in a script or style element\n\n      if (!lastTag || !special(lastTag)) {\n        var textEnd = html.indexOf('<');\n\n        if (textEnd === 0) {\n          // Comment:\n          if (/^<!--/.test(html)) {\n            var commentEnd = html.indexOf('-->');\n\n            if (commentEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(4, commentEnd));\n              }\n\n              html = html.substring(commentEnd + 3);\n              prevTag = '';\n              continue;\n            }\n          } // https://en.wikipedia.org/wiki/Conditional_comment#Downlevel-revealed_conditional_comment\n\n\n          if (/^<!\\[/.test(html)) {\n            var conditionalEnd = html.indexOf(']>');\n\n            if (conditionalEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(2, conditionalEnd + 1), true\n                /* non-standard */\n                );\n              }\n\n              html = html.substring(conditionalEnd + 2);\n              prevTag = '';\n              continue;\n            }\n          } // Doctype:\n\n\n          var doctypeMatch = html.match(doctype);\n\n          if (doctypeMatch) {\n            if (handler.doctype) {\n              handler.doctype(doctypeMatch[0]);\n            }\n\n            html = html.substring(doctypeMatch[0].length);\n            prevTag = '';\n            continue;\n          } // End tag:\n\n\n          var endTagMatch = html.match(endTag);\n\n          if (endTagMatch) {\n            html = html.substring(endTagMatch[0].length);\n            await replaceAsync(endTagMatch[0], endTag, parseEndTag);\n            prevTag = '/' + endTagMatch[1].toLowerCase();\n            continue;\n          } // Start tag:\n\n\n          var startTagMatch = parseStartTag(html);\n\n          if (startTagMatch) {\n            html = startTagMatch.rest;\n            await handleStartTag(startTagMatch);\n            prevTag = startTagMatch.tagName.toLowerCase();\n            continue;\n          } // Treat `<` as text\n\n\n          if (handler.continueOnParseError) {\n            textEnd = html.indexOf('<', 1);\n          }\n        }\n\n        var text;\n\n        if (textEnd >= 0) {\n          text = html.substring(0, textEnd);\n          html = html.substring(textEnd);\n        } else {\n          text = html;\n          html = '';\n        } // next tag\n\n\n        var nextTagMatch = parseStartTag(html);\n\n        if (nextTagMatch) {\n          nextTag = nextTagMatch.tagName;\n        } else {\n          nextTagMatch = html.match(endTag);\n\n          if (nextTagMatch) {\n            nextTag = '/' + nextTagMatch[1];\n          } else {\n            nextTag = '';\n          }\n        }\n\n        if (handler.chars) {\n          await handler.chars(text, prevTag, nextTag);\n        }\n\n        prevTag = '';\n      } else {\n        var stackedTag = lastTag.toLowerCase();\n        var reStackedTag = reCache[stackedTag] || (reCache[stackedTag] = new RegExp('([\\\\s\\\\S]*?)</' + stackedTag + '[^>]*>', 'i'));\n        html = await replaceAsync(html, reStackedTag, async (_, text) => {\n          if (stackedTag !== 'script' && stackedTag !== 'style' && stackedTag !== 'noscript') {\n            text = text.replace(/<!--([\\s\\S]*?)-->/g, '$1').replace(/<!\\[CDATA\\[([\\s\\S]*?)]]>/g, '$1');\n          }\n\n          if (handler.chars) {\n            await handler.chars(text);\n          }\n\n          return '';\n        });\n        await parseEndTag('</' + stackedTag + '>', stackedTag);\n      }\n\n      if (html === last) {\n        throw new Error('Parse Error: ' + html);\n      }\n    }\n\n    if (!handler.partialMarkup) {\n      // Clean up any remaining tags\n      await parseEndTag();\n    }\n\n    function parseStartTag(input) {\n      var start = input.match(startTagOpen);\n\n      if (start) {\n        var match = {\n          tagName: start[1],\n          attrs: []\n        };\n        input = input.slice(start[0].length);\n        var end, attr;\n\n        while (!(end = input.match(startTagClose)) && (attr = input.match(attribute))) {\n          input = input.slice(attr[0].length);\n          match.attrs.push(attr);\n        }\n\n        if (end) {\n          match.unarySlash = end[1];\n          match.rest = input.slice(end[0].length);\n          return match;\n        }\n      }\n    }\n\n    async function closeIfFound(tagName) {\n      if (findTag(tagName) >= 0) {\n        await parseEndTag('', tagName);\n        return true;\n      }\n    }\n\n    async function handleStartTag(match) {\n      var tagName = match.tagName;\n      var unarySlash = match.unarySlash;\n\n      if (handler.html5) {\n        if (lastTag === 'p' && nonPhrasing(tagName)) {\n          await parseEndTag('', lastTag);\n        } else if (tagName === 'tbody') {\n          await closeIfFound('thead');\n        } else if (tagName === 'tfoot') {\n          if (!(await closeIfFound('tbody'))) {\n            await closeIfFound('thead');\n          }\n        }\n\n        if (tagName === 'col' && findTag('colgroup') < 0) {\n          lastTag = 'colgroup';\n          stack.push({\n            tag: lastTag,\n            attrs: []\n          });\n\n          if (handler.start) {\n            await handler.start(lastTag, [], false, '');\n          }\n        }\n      }\n\n      if (!handler.html5 && !inline(tagName)) {\n        while (lastTag && inline(lastTag)) {\n          await parseEndTag('', lastTag);\n        }\n      }\n\n      if (closeSelf(tagName) && lastTag === tagName) {\n        await parseEndTag('', tagName);\n      }\n\n      var unary = empty(tagName) || tagName === 'html' && lastTag === 'head' || !!unarySlash;\n      var attrs = match.attrs.map(function (args) {\n        var name, value, customOpen, customClose, customAssign, quote;\n        var ncp = 7; // number of captured parts, scalar\n        // hackish work around FF bug https://bugzilla.mozilla.org/show_bug.cgi?id=369778\n\n        if (IS_REGEX_CAPTURING_BROKEN && args[0].indexOf('\"\"') === -1) {\n          if (args[3] === '') {\n            delete args[3];\n          }\n\n          if (args[4] === '') {\n            delete args[4];\n          }\n\n          if (args[5] === '') {\n            delete args[5];\n          }\n        }\n\n        function populate(index) {\n          customAssign = args[index];\n          value = args[index + 1];\n\n          if (typeof value !== 'undefined') {\n            return '\"';\n          }\n\n          value = args[index + 2];\n\n          if (typeof value !== 'undefined') {\n            return '\\'';\n          }\n\n          value = args[index + 3];\n\n          if (typeof value === 'undefined' && fillAttrs(name)) {\n            value = name;\n          }\n\n          return '';\n        }\n\n        var j = 1;\n\n        if (handler.customAttrSurround) {\n          for (var i = 0, l = handler.customAttrSurround.length; i < l; i++, j += ncp) {\n            name = args[j + 1];\n\n            if (name) {\n              quote = populate(j + 2);\n              customOpen = args[j];\n              customClose = args[j + 6];\n              break;\n            }\n          }\n        }\n\n        if (!name && (name = args[j])) {\n          quote = populate(j + 1);\n        }\n\n        return {\n          name: name,\n          value: value,\n          customAssign: customAssign || '=',\n          customOpen: customOpen || '',\n          customClose: customClose || '',\n          quote: quote || ''\n        };\n      });\n\n      if (!unary) {\n        stack.push({\n          tag: tagName,\n          attrs: attrs\n        });\n        lastTag = tagName;\n        unarySlash = '';\n      }\n\n      if (handler.start) {\n        await handler.start(tagName, attrs, unary, unarySlash);\n      }\n    }\n\n    function findTag(tagName) {\n      var pos;\n      var needle = tagName.toLowerCase();\n\n      for (pos = stack.length - 1; pos >= 0; pos--) {\n        if (stack[pos].tag.toLowerCase() === needle) {\n          break;\n        }\n      }\n\n      return pos;\n    }\n\n    async function parseEndTag(tag, tagName) {\n      var pos; // Find the closest opened tag of the same type\n\n      if (tagName) {\n        pos = findTag(tagName);\n      } // If no tag name is provided, clean shop\n      else {\n        pos = 0;\n      }\n\n      if (pos >= 0) {\n        // Close all the open elements, up the stack\n        for (var i = stack.length - 1; i >= pos; i--) {\n          if (handler.end) {\n            handler.end(stack[i].tag, stack[i].attrs, i > pos || !tag);\n          }\n        } // Remove the open elements from the stack\n\n\n        stack.length = pos;\n        lastTag = pos && stack[pos - 1].tag;\n      } else if (tagName.toLowerCase() === 'br') {\n        if (handler.start) {\n          await handler.start(tagName, [], true, '');\n        }\n      } else if (tagName.toLowerCase() === 'p') {\n        if (handler.start) {\n          await handler.start(tagName, [], false, '', true);\n        }\n\n        if (handler.end) {\n          handler.end(tagName, []);\n        }\n      }\n    }\n  }\n\n}\n\nexports.HTMLParser = HTMLParser;\n\nexports.HTMLtoXML = function (html) {\n  var results = '';\n  new HTMLParser(html, {\n    start: function (tag, attrs, unary) {\n      results += '<' + tag;\n\n      for (var i = 0, len = attrs.length; i < len; i++) {\n        results += ' ' + attrs[i].name + '=\"' + (attrs[i].value || '').replace(/\"/g, '&#34;') + '\"';\n      }\n\n      results += (unary ? '/' : '') + '>';\n    },\n    end: function (tag) {\n      results += '</' + tag + '>';\n    },\n    chars: function (text) {\n      results += text;\n    },\n    comment: function (text) {\n      results += '<!--' + text + '-->';\n    },\n    ignore: function (text) {\n      results += text;\n    }\n  });\n  return results;\n};\n\nexports.HTMLtoDOM = function (html, doc) {\n  // There can be only one of these elements\n  var one = {\n    html: true,\n    head: true,\n    body: true,\n    title: true\n  }; // Enforce a structure for the document\n\n  var structure = {\n    link: 'head',\n    base: 'head'\n  };\n\n  if (doc) {\n    doc = doc.ownerDocument || doc.getOwnerDocument && doc.getOwnerDocument() || doc;\n  } else if (typeof DOMDocument !== 'undefined') {\n    doc = new DOMDocument();\n  } else if (typeof document !== 'undefined' && document.implementation && document.implementation.createDocument) {\n    doc = document.implementation.createDocument('', '', null);\n  } else if (typeof ActiveX !== 'undefined') {\n    doc = new ActiveXObject('Msxml.DOMDocument');\n  }\n\n  var elems = [],\n      documentElement = doc.documentElement || doc.getDocumentElement && doc.getDocumentElement(); // If we're dealing with an empty document then we\n  // need to pre-populate it with the HTML document structure\n\n  if (!documentElement && doc.createElement) {\n    (function () {\n      var html = doc.createElement('html');\n      var head = doc.createElement('head');\n      head.appendChild(doc.createElement('title'));\n      html.appendChild(head);\n      html.appendChild(doc.createElement('body'));\n      doc.appendChild(html);\n    })();\n  } // Find all the unique elements\n\n\n  if (doc.getElementsByTagName) {\n    for (var i in one) {\n      one[i] = doc.getElementsByTagName(i)[0];\n    }\n  } // If we're working with a document, inject contents into\n  // the body element\n\n\n  var curParentNode = one.body;\n  new HTMLParser(html, {\n    start: function (tagName, attrs, unary) {\n      // If it's a pre-built element, then we can ignore\n      // its construction\n      if (one[tagName]) {\n        curParentNode = one[tagName];\n        return;\n      }\n\n      var elem = doc.createElement(tagName);\n\n      for (var attr in attrs) {\n        elem.setAttribute(attrs[attr].name, attrs[attr].value);\n      }\n\n      if (structure[tagName] && typeof one[structure[tagName]] !== 'boolean') {\n        one[structure[tagName]].appendChild(elem);\n      } else if (curParentNode && curParentNode.appendChild) {\n        curParentNode.appendChild(elem);\n      }\n\n      if (!unary) {\n        elems.push(elem);\n        curParentNode = elem;\n      }\n    },\n    end: function\n      /* tag */\n    () {\n      elems.length -= 1; // Init the new parentNode\n\n      curParentNode = elems[elems.length - 1];\n    },\n    chars: function (text) {\n      curParentNode.appendChild(doc.createTextNode(text));\n    },\n    comment: function\n      /* text */\n    () {// create comment node\n    },\n    ignore: function\n      /* text */\n    () {// What to do here?\n    }\n  });\n  return doc;\n};\n\nexports.endTag = endTag;","map":{"version":3,"names":["createMapFromString","require","replaceAsync","makeMap","values","singleAttrIdentifier","singleAttrAssigns","singleAttrValues","source","qnameCapture","combiningChar","digit","extender","letter","ncname","startTagOpen","RegExp","startTagClose","endTag","doctype","IS_REGEX_CAPTURING_BROKEN","replace","m","g","empty","inline","closeSelf","fillAttrs","special","nonPhrasing","reCache","attrForHandler","handler","pattern","joinSingleAttrAssigns","join","customAttrSurround","attrClauses","i","length","push","concat","customAttrAssign","map","assign","HTMLParser","constructor","html","parse","stack","lastTag","attribute","last","prevTag","nextTag","textEnd","indexOf","test","commentEnd","comment","substring","conditionalEnd","doctypeMatch","match","endTagMatch","parseEndTag","toLowerCase","startTagMatch","parseStartTag","rest","handleStartTag","tagName","continueOnParseError","text","nextTagMatch","chars","stackedTag","reStackedTag","_","Error","partialMarkup","input","start","attrs","slice","end","attr","unarySlash","closeIfFound","findTag","html5","tag","unary","args","name","value","customOpen","customClose","customAssign","quote","ncp","populate","index","j","l","pos","needle","exports","HTMLtoXML","results","len","ignore","HTMLtoDOM","doc","one","head","body","title","structure","link","base","ownerDocument","getOwnerDocument","DOMDocument","document","implementation","createDocument","ActiveX","ActiveXObject","elems","documentElement","getDocumentElement","createElement","appendChild","getElementsByTagName","curParentNode","elem","setAttribute","createTextNode"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/html-minifier-terser/src/htmlparser.js"],"sourcesContent":["/*!\n * HTML Parser By John Resig (ejohn.org)\n * Modified by Juriy \"kangax\" Zaytsev\n * Original code by Erik Arvidsson, Mozilla Public License\n * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js\n */\n\n/*\n * // Use like so:\n * HTMLParser(htmlString, {\n *     start: function(tag, attrs, unary) {},\n *     end: function(tag) {},\n *     chars: function(text) {},\n *     comment: function(text) {}\n * });\n *\n * // or to get an XML string:\n * HTMLtoXML(htmlString);\n *\n * // or to get an XML DOM Document\n * HTMLtoDOM(htmlString);\n *\n * // or to inject into an existing document/DOM node\n * HTMLtoDOM(htmlString, document);\n * HTMLtoDOM(htmlString, document.body);\n *\n */\n\n/* global ActiveXObject, DOMDocument */\n\n'use strict';\n\nvar createMapFromString = require('./utils').createMapFromString;\nvar replaceAsync = require('./utils').replaceAsync;\n\nfunction makeMap(values) {\n  return createMapFromString(values, true);\n}\n\n// Regular Expressions for parsing tags and attributes\nvar singleAttrIdentifier = /([^\\s\"'<>/=]+)/,\n    singleAttrAssigns = [/=/],\n    singleAttrValues = [\n    // attr value double quotes\n      /\"([^\"]*)\"+/.source,\n      // attr value, single quotes\n      /'([^']*)'+/.source,\n      // attr value, no quotes\n      /([^ \\t\\n\\f\\r\"'`=<>]+)/.source\n    ],\n    // https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-QName\n    qnameCapture = (function() {\n    // based on https://www.npmjs.com/package/ncname\n      var combiningChar = '\\\\u0300-\\\\u0345\\\\u0360\\\\u0361\\\\u0483-\\\\u0486\\\\u0591-\\\\u05A1\\\\u05A3-\\\\u05B9\\\\u05BB-\\\\u05BD\\\\u05BF\\\\u05C1\\\\u05C2\\\\u05C4\\\\u064B-\\\\u0652\\\\u0670\\\\u06D6-\\\\u06E4\\\\u06E7\\\\u06E8\\\\u06EA-\\\\u06ED\\\\u0901-\\\\u0903\\\\u093C\\\\u093E-\\\\u094D\\\\u0951-\\\\u0954\\\\u0962\\\\u0963\\\\u0981-\\\\u0983\\\\u09BC\\\\u09BE-\\\\u09C4\\\\u09C7\\\\u09C8\\\\u09CB-\\\\u09CD\\\\u09D7\\\\u09E2\\\\u09E3\\\\u0A02\\\\u0A3C\\\\u0A3E-\\\\u0A42\\\\u0A47\\\\u0A48\\\\u0A4B-\\\\u0A4D\\\\u0A70\\\\u0A71\\\\u0A81-\\\\u0A83\\\\u0ABC\\\\u0ABE-\\\\u0AC5\\\\u0AC7-\\\\u0AC9\\\\u0ACB-\\\\u0ACD\\\\u0B01-\\\\u0B03\\\\u0B3C\\\\u0B3E-\\\\u0B43\\\\u0B47\\\\u0B48\\\\u0B4B-\\\\u0B4D\\\\u0B56\\\\u0B57\\\\u0B82\\\\u0B83\\\\u0BBE-\\\\u0BC2\\\\u0BC6-\\\\u0BC8\\\\u0BCA-\\\\u0BCD\\\\u0BD7\\\\u0C01-\\\\u0C03\\\\u0C3E-\\\\u0C44\\\\u0C46-\\\\u0C48\\\\u0C4A-\\\\u0C4D\\\\u0C55\\\\u0C56\\\\u0C82\\\\u0C83\\\\u0CBE-\\\\u0CC4\\\\u0CC6-\\\\u0CC8\\\\u0CCA-\\\\u0CCD\\\\u0CD5\\\\u0CD6\\\\u0D02\\\\u0D03\\\\u0D3E-\\\\u0D43\\\\u0D46-\\\\u0D48\\\\u0D4A-\\\\u0D4D\\\\u0D57\\\\u0E31\\\\u0E34-\\\\u0E3A\\\\u0E47-\\\\u0E4E\\\\u0EB1\\\\u0EB4-\\\\u0EB9\\\\u0EBB\\\\u0EBC\\\\u0EC8-\\\\u0ECD\\\\u0F18\\\\u0F19\\\\u0F35\\\\u0F37\\\\u0F39\\\\u0F3E\\\\u0F3F\\\\u0F71-\\\\u0F84\\\\u0F86-\\\\u0F8B\\\\u0F90-\\\\u0F95\\\\u0F97\\\\u0F99-\\\\u0FAD\\\\u0FB1-\\\\u0FB7\\\\u0FB9\\\\u20D0-\\\\u20DC\\\\u20E1\\\\u302A-\\\\u302F\\\\u3099\\\\u309A';\n      var digit = '0-9\\\\u0660-\\\\u0669\\\\u06F0-\\\\u06F9\\\\u0966-\\\\u096F\\\\u09E6-\\\\u09EF\\\\u0A66-\\\\u0A6F\\\\u0AE6-\\\\u0AEF\\\\u0B66-\\\\u0B6F\\\\u0BE7-\\\\u0BEF\\\\u0C66-\\\\u0C6F\\\\u0CE6-\\\\u0CEF\\\\u0D66-\\\\u0D6F\\\\u0E50-\\\\u0E59\\\\u0ED0-\\\\u0ED9\\\\u0F20-\\\\u0F29';\n      var extender = '\\\\xB7\\\\u02D0\\\\u02D1\\\\u0387\\\\u0640\\\\u0E46\\\\u0EC6\\\\u3005\\\\u3031-\\\\u3035\\\\u309D\\\\u309E\\\\u30FC-\\\\u30FE';\n      var letter = 'A-Za-z\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\\\u0131\\\\u0134-\\\\u013E\\\\u0141-\\\\u0148\\\\u014A-\\\\u017E\\\\u0180-\\\\u01C3\\\\u01CD-\\\\u01F0\\\\u01F4\\\\u01F5\\\\u01FA-\\\\u0217\\\\u0250-\\\\u02A8\\\\u02BB-\\\\u02C1\\\\u0386\\\\u0388-\\\\u038A\\\\u038C\\\\u038E-\\\\u03A1\\\\u03A3-\\\\u03CE\\\\u03D0-\\\\u03D6\\\\u03DA\\\\u03DC\\\\u03DE\\\\u03E0\\\\u03E2-\\\\u03F3\\\\u0401-\\\\u040C\\\\u040E-\\\\u044F\\\\u0451-\\\\u045C\\\\u045E-\\\\u0481\\\\u0490-\\\\u04C4\\\\u04C7\\\\u04C8\\\\u04CB\\\\u04CC\\\\u04D0-\\\\u04EB\\\\u04EE-\\\\u04F5\\\\u04F8\\\\u04F9\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0586\\\\u05D0-\\\\u05EA\\\\u05F0-\\\\u05F2\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0671-\\\\u06B7\\\\u06BA-\\\\u06BE\\\\u06C0-\\\\u06CE\\\\u06D0-\\\\u06D3\\\\u06D5\\\\u06E5\\\\u06E6\\\\u0905-\\\\u0939\\\\u093D\\\\u0958-\\\\u0961\\\\u0985-\\\\u098C\\\\u098F\\\\u0990\\\\u0993-\\\\u09A8\\\\u09AA-\\\\u09B0\\\\u09B2\\\\u09B6-\\\\u09B9\\\\u09DC\\\\u09DD\\\\u09DF-\\\\u09E1\\\\u09F0\\\\u09F1\\\\u0A05-\\\\u0A0A\\\\u0A0F\\\\u0A10\\\\u0A13-\\\\u0A28\\\\u0A2A-\\\\u0A30\\\\u0A32\\\\u0A33\\\\u0A35\\\\u0A36\\\\u0A38\\\\u0A39\\\\u0A59-\\\\u0A5C\\\\u0A5E\\\\u0A72-\\\\u0A74\\\\u0A85-\\\\u0A8B\\\\u0A8D\\\\u0A8F-\\\\u0A91\\\\u0A93-\\\\u0AA8\\\\u0AAA-\\\\u0AB0\\\\u0AB2\\\\u0AB3\\\\u0AB5-\\\\u0AB9\\\\u0ABD\\\\u0AE0\\\\u0B05-\\\\u0B0C\\\\u0B0F\\\\u0B10\\\\u0B13-\\\\u0B28\\\\u0B2A-\\\\u0B30\\\\u0B32\\\\u0B33\\\\u0B36-\\\\u0B39\\\\u0B3D\\\\u0B5C\\\\u0B5D\\\\u0B5F-\\\\u0B61\\\\u0B85-\\\\u0B8A\\\\u0B8E-\\\\u0B90\\\\u0B92-\\\\u0B95\\\\u0B99\\\\u0B9A\\\\u0B9C\\\\u0B9E\\\\u0B9F\\\\u0BA3\\\\u0BA4\\\\u0BA8-\\\\u0BAA\\\\u0BAE-\\\\u0BB5\\\\u0BB7-\\\\u0BB9\\\\u0C05-\\\\u0C0C\\\\u0C0E-\\\\u0C10\\\\u0C12-\\\\u0C28\\\\u0C2A-\\\\u0C33\\\\u0C35-\\\\u0C39\\\\u0C60\\\\u0C61\\\\u0C85-\\\\u0C8C\\\\u0C8E-\\\\u0C90\\\\u0C92-\\\\u0CA8\\\\u0CAA-\\\\u0CB3\\\\u0CB5-\\\\u0CB9\\\\u0CDE\\\\u0CE0\\\\u0CE1\\\\u0D05-\\\\u0D0C\\\\u0D0E-\\\\u0D10\\\\u0D12-\\\\u0D28\\\\u0D2A-\\\\u0D39\\\\u0D60\\\\u0D61\\\\u0E01-\\\\u0E2E\\\\u0E30\\\\u0E32\\\\u0E33\\\\u0E40-\\\\u0E45\\\\u0E81\\\\u0E82\\\\u0E84\\\\u0E87\\\\u0E88\\\\u0E8A\\\\u0E8D\\\\u0E94-\\\\u0E97\\\\u0E99-\\\\u0E9F\\\\u0EA1-\\\\u0EA3\\\\u0EA5\\\\u0EA7\\\\u0EAA\\\\u0EAB\\\\u0EAD\\\\u0EAE\\\\u0EB0\\\\u0EB2\\\\u0EB3\\\\u0EBD\\\\u0EC0-\\\\u0EC4\\\\u0F40-\\\\u0F47\\\\u0F49-\\\\u0F69\\\\u10A0-\\\\u10C5\\\\u10D0-\\\\u10F6\\\\u1100\\\\u1102\\\\u1103\\\\u1105-\\\\u1107\\\\u1109\\\\u110B\\\\u110C\\\\u110E-\\\\u1112\\\\u113C\\\\u113E\\\\u1140\\\\u114C\\\\u114E\\\\u1150\\\\u1154\\\\u1155\\\\u1159\\\\u115F-\\\\u1161\\\\u1163\\\\u1165\\\\u1167\\\\u1169\\\\u116D\\\\u116E\\\\u1172\\\\u1173\\\\u1175\\\\u119E\\\\u11A8\\\\u11AB\\\\u11AE\\\\u11AF\\\\u11B7\\\\u11B8\\\\u11BA\\\\u11BC-\\\\u11C2\\\\u11EB\\\\u11F0\\\\u11F9\\\\u1E00-\\\\u1E9B\\\\u1EA0-\\\\u1EF9\\\\u1F00-\\\\u1F15\\\\u1F18-\\\\u1F1D\\\\u1F20-\\\\u1F45\\\\u1F48-\\\\u1F4D\\\\u1F50-\\\\u1F57\\\\u1F59\\\\u1F5B\\\\u1F5D\\\\u1F5F-\\\\u1F7D\\\\u1F80-\\\\u1FB4\\\\u1FB6-\\\\u1FBC\\\\u1FBE\\\\u1FC2-\\\\u1FC4\\\\u1FC6-\\\\u1FCC\\\\u1FD0-\\\\u1FD3\\\\u1FD6-\\\\u1FDB\\\\u1FE0-\\\\u1FEC\\\\u1FF2-\\\\u1FF4\\\\u1FF6-\\\\u1FFC\\\\u2126\\\\u212A\\\\u212B\\\\u212E\\\\u2180-\\\\u2182\\\\u3007\\\\u3021-\\\\u3029\\\\u3041-\\\\u3094\\\\u30A1-\\\\u30FA\\\\u3105-\\\\u312C\\\\u4E00-\\\\u9FA5\\\\uAC00-\\\\uD7A3';\n      var ncname = '[' + letter + '_][' + letter + digit + '\\\\.\\\\-_' + combiningChar + extender + ']*';\n      return '((?:' + ncname + '\\\\:)?' + ncname + ')';\n    })(),\n    startTagOpen = new RegExp('^<' + qnameCapture),\n    startTagClose = /^\\s*(\\/?)>/,\n    endTag = new RegExp('^<\\\\/' + qnameCapture + '[^>]*>'),\n    doctype = /^<!DOCTYPE\\s?[^>]+>/i;\n\nvar IS_REGEX_CAPTURING_BROKEN = false;\n'x'.replace(/x(.)?/g, function(m, g) {\n  IS_REGEX_CAPTURING_BROKEN = g === '';\n});\n\n// Empty Elements\nvar empty = makeMap('area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr');\n\n// Inline Elements\nvar inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,noscript,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,svg,textarea,tt,u,var');\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap('colgroup,dd,dt,li,option,p,td,tfoot,th,thead,tr,source');\n\n// Attributes that have their values filled in disabled='disabled'\nvar fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected');\n\n// Special Elements (can contain anything)\nvar special = makeMap('script,style');\n\n// HTML5 tags https://html.spec.whatwg.org/multipage/indices.html#elements-3\n// Phrasing Content https://html.spec.whatwg.org/multipage/dom.html#phrasing-content\nvar nonPhrasing = makeMap('address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,ol,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track,ul');\n\nvar reCache = {};\n\nfunction attrForHandler(handler) {\n  var pattern = singleAttrIdentifier.source +\n    '(?:\\\\s*(' + joinSingleAttrAssigns(handler) + ')' +\n    '[ \\\\t\\\\n\\\\f\\\\r]*(?:' + singleAttrValues.join('|') + '))?';\n  if (handler.customAttrSurround) {\n    var attrClauses = [];\n    for (var i = handler.customAttrSurround.length - 1; i >= 0; i--) {\n      attrClauses[i] = '(?:' +\n        '(' + handler.customAttrSurround[i][0].source + ')\\\\s*' +\n        pattern +\n        '\\\\s*(' + handler.customAttrSurround[i][1].source + ')' +\n        ')';\n    }\n    attrClauses.push('(?:' + pattern + ')');\n    pattern = '(?:' + attrClauses.join('|') + ')';\n  }\n  return new RegExp('^\\\\s*' + pattern);\n}\n\nfunction joinSingleAttrAssigns(handler) {\n  return singleAttrAssigns.concat(\n    handler.customAttrAssign || []\n  ).map(function(assign) {\n    return '(?:' + assign.source + ')';\n  }).join('|');\n}\n\nclass HTMLParser {\n  constructor(html, handler) {\n    this.html = html;\n    this.handler = handler;\n  }\n\n  async parse() {\n    let html = this.html;\n    const handler = this.handler;\n\n    var stack = [], lastTag;\n    var attribute = attrForHandler(handler);\n    var last, prevTag, nextTag;\n    while (html) {\n      last = html;\n      // Make sure we're not in a script or style element\n      if (!lastTag || !special(lastTag)) {\n        var textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n          // Comment:\n          if (/^<!--/.test(html)) {\n            var commentEnd = html.indexOf('-->');\n\n            if (commentEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(4, commentEnd));\n              }\n              html = html.substring(commentEnd + 3);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // https://en.wikipedia.org/wiki/Conditional_comment#Downlevel-revealed_conditional_comment\n          if (/^<!\\[/.test(html)) {\n            var conditionalEnd = html.indexOf(']>');\n\n            if (conditionalEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(2, conditionalEnd + 1), true /* non-standard */);\n              }\n              html = html.substring(conditionalEnd + 2);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // Doctype:\n          var doctypeMatch = html.match(doctype);\n          if (doctypeMatch) {\n            if (handler.doctype) {\n              handler.doctype(doctypeMatch[0]);\n            }\n            html = html.substring(doctypeMatch[0].length);\n            prevTag = '';\n            continue;\n          }\n\n          // End tag:\n          var endTagMatch = html.match(endTag);\n          if (endTagMatch) {\n            html = html.substring(endTagMatch[0].length);\n            await replaceAsync(endTagMatch[0], endTag, parseEndTag);\n            prevTag = '/' + endTagMatch[1].toLowerCase();\n            continue;\n          }\n\n          // Start tag:\n          var startTagMatch = parseStartTag(html);\n          if (startTagMatch) {\n            html = startTagMatch.rest;\n            await handleStartTag(startTagMatch);\n            prevTag = startTagMatch.tagName.toLowerCase();\n            continue;\n          }\n\n          // Treat `<` as text\n          if (handler.continueOnParseError) {\n            textEnd = html.indexOf('<', 1);\n          }\n        }\n\n        var text;\n        if (textEnd >= 0) {\n          text = html.substring(0, textEnd);\n          html = html.substring(textEnd);\n        }\n        else {\n          text = html;\n          html = '';\n        }\n\n        // next tag\n        var nextTagMatch = parseStartTag(html);\n        if (nextTagMatch) {\n          nextTag = nextTagMatch.tagName;\n        }\n        else {\n          nextTagMatch = html.match(endTag);\n          if (nextTagMatch) {\n            nextTag = '/' + nextTagMatch[1];\n          }\n          else {\n            nextTag = '';\n          }\n        }\n\n        if (handler.chars) {\n          await handler.chars(text, prevTag, nextTag);\n        }\n        prevTag = '';\n      }\n      else {\n        var stackedTag = lastTag.toLowerCase();\n        var reStackedTag = reCache[stackedTag] || (reCache[stackedTag] = new RegExp('([\\\\s\\\\S]*?)</' + stackedTag + '[^>]*>', 'i'));\n\n        html = await replaceAsync(html, reStackedTag, async(_, text) => {\n          if (stackedTag !== 'script' && stackedTag !== 'style' && stackedTag !== 'noscript') {\n            text = text\n              .replace(/<!--([\\s\\S]*?)-->/g, '$1')\n              .replace(/<!\\[CDATA\\[([\\s\\S]*?)]]>/g, '$1');\n          }\n\n\n          if (handler.chars) {\n            await handler.chars(text);\n          }\n\n          return '';\n        });\n\n        await parseEndTag('</' + stackedTag + '>', stackedTag);\n      }\n\n      if (html === last) {\n        throw new Error('Parse Error: ' + html);\n      }\n    }\n\n    if (!handler.partialMarkup) {\n      // Clean up any remaining tags\n      await parseEndTag();\n    }\n\n    function parseStartTag(input) {\n      var start = input.match(startTagOpen);\n      if (start) {\n        var match = {\n          tagName: start[1],\n          attrs: []\n        };\n        input = input.slice(start[0].length);\n        var end, attr;\n        while (!(end = input.match(startTagClose)) && (attr = input.match(attribute))) {\n          input = input.slice(attr[0].length);\n          match.attrs.push(attr);\n        }\n        if (end) {\n          match.unarySlash = end[1];\n          match.rest = input.slice(end[0].length);\n          return match;\n        }\n      }\n    }\n\n    async function closeIfFound(tagName) {\n      if (findTag(tagName) >= 0) {\n        await parseEndTag('', tagName);\n        return true;\n      }\n    }\n\n    async function handleStartTag(match) {\n      var tagName = match.tagName;\n      var unarySlash = match.unarySlash;\n\n      if (handler.html5) {\n        if (lastTag === 'p' && nonPhrasing(tagName)) {\n          await parseEndTag('', lastTag);\n        }\n        else if (tagName === 'tbody') {\n          await closeIfFound('thead');\n        }\n        else if (tagName === 'tfoot') {\n          if (!await closeIfFound('tbody')) {\n            await closeIfFound('thead');\n          }\n        }\n        if (tagName === 'col' && findTag('colgroup') < 0) {\n          lastTag = 'colgroup';\n          stack.push({ tag: lastTag, attrs: [] });\n          if (handler.start) {\n            await handler.start(lastTag, [], false, '');\n          }\n        }\n      }\n\n      if (!handler.html5 && !inline(tagName)) {\n        while (lastTag && inline(lastTag)) {\n          await parseEndTag('', lastTag);\n        }\n      }\n\n      if (closeSelf(tagName) && lastTag === tagName) {\n        await parseEndTag('', tagName);\n      }\n\n      var unary = empty(tagName) || tagName === 'html' && lastTag === 'head' || !!unarySlash;\n\n      var attrs = match.attrs.map(function(args) {\n        var name, value, customOpen, customClose, customAssign, quote;\n        var ncp = 7; // number of captured parts, scalar\n\n        // hackish work around FF bug https://bugzilla.mozilla.org/show_bug.cgi?id=369778\n        if (IS_REGEX_CAPTURING_BROKEN && args[0].indexOf('\"\"') === -1) {\n          if (args[3] === '') { delete args[3]; }\n          if (args[4] === '') { delete args[4]; }\n          if (args[5] === '') { delete args[5]; }\n        }\n\n        function populate(index) {\n          customAssign = args[index];\n          value = args[index + 1];\n          if (typeof value !== 'undefined') {\n            return '\"';\n          }\n          value = args[index + 2];\n          if (typeof value !== 'undefined') {\n            return '\\'';\n          }\n          value = args[index + 3];\n          if (typeof value === 'undefined' && fillAttrs(name)) {\n            value = name;\n          }\n          return '';\n        }\n\n        var j = 1;\n        if (handler.customAttrSurround) {\n          for (var i = 0, l = handler.customAttrSurround.length; i < l; i++, j += ncp) {\n            name = args[j + 1];\n            if (name) {\n              quote = populate(j + 2);\n              customOpen = args[j];\n              customClose = args[j + 6];\n              break;\n            }\n          }\n        }\n\n        if (!name && (name = args[j])) {\n          quote = populate(j + 1);\n        }\n\n        return {\n          name: name,\n          value: value,\n          customAssign: customAssign || '=',\n          customOpen: customOpen || '',\n          customClose: customClose || '',\n          quote: quote || ''\n        };\n      });\n\n      if (!unary) {\n        stack.push({ tag: tagName, attrs: attrs });\n        lastTag = tagName;\n        unarySlash = '';\n      }\n\n      if (handler.start) {\n        await handler.start(tagName, attrs, unary, unarySlash);\n      }\n    }\n\n    function findTag(tagName) {\n      var pos;\n      var needle = tagName.toLowerCase();\n      for (pos = stack.length - 1; pos >= 0; pos--) {\n        if (stack[pos].tag.toLowerCase() === needle) {\n          break;\n        }\n      }\n      return pos;\n    }\n\n    async function parseEndTag(tag, tagName) {\n      var pos;\n\n      // Find the closest opened tag of the same type\n      if (tagName) {\n        pos = findTag(tagName);\n      }\n      // If no tag name is provided, clean shop\n      else {\n        pos = 0;\n      }\n\n      if (pos >= 0) {\n        // Close all the open elements, up the stack\n        for (var i = stack.length - 1; i >= pos; i--) {\n          if (handler.end) {\n            handler.end(stack[i].tag, stack[i].attrs, i > pos || !tag);\n          }\n        }\n\n        // Remove the open elements from the stack\n        stack.length = pos;\n        lastTag = pos && stack[pos - 1].tag;\n      }\n      else if (tagName.toLowerCase() === 'br') {\n        if (handler.start) {\n          await handler.start(tagName, [], true, '');\n        }\n      }\n      else if (tagName.toLowerCase() === 'p') {\n        if (handler.start) {\n          await handler.start(tagName, [], false, '', true);\n        }\n        if (handler.end) {\n          handler.end(tagName, []);\n        }\n      }\n    }\n  }\n}\n\nexports.HTMLParser = HTMLParser;\nexports.HTMLtoXML = function(html) {\n  var results = '';\n\n  new HTMLParser(html, {\n    start: function(tag, attrs, unary) {\n      results += '<' + tag;\n\n      for (var i = 0, len = attrs.length; i < len; i++) {\n        results += ' ' + attrs[i].name + '=\"' + (attrs[i].value || '').replace(/\"/g, '&#34;') + '\"';\n      }\n\n      results += (unary ? '/' : '') + '>';\n    },\n    end: function(tag) {\n      results += '</' + tag + '>';\n    },\n    chars: function(text) {\n      results += text;\n    },\n    comment: function(text) {\n      results += '<!--' + text + '-->';\n    },\n    ignore: function(text) {\n      results += text;\n    }\n  });\n\n  return results;\n};\n\nexports.HTMLtoDOM = function(html, doc) {\n  // There can be only one of these elements\n  var one = {\n    html: true,\n    head: true,\n    body: true,\n    title: true\n  };\n\n  // Enforce a structure for the document\n  var structure = {\n    link: 'head',\n    base: 'head'\n  };\n\n  if (doc) {\n    doc = doc.ownerDocument || doc.getOwnerDocument && doc.getOwnerDocument() || doc;\n  }\n  else if (typeof DOMDocument !== 'undefined') {\n    doc = new DOMDocument();\n  }\n  else if (typeof document !== 'undefined' && document.implementation && document.implementation.createDocument) {\n    doc = document.implementation.createDocument('', '', null);\n  }\n  else if (typeof ActiveX !== 'undefined') {\n    doc = new ActiveXObject('Msxml.DOMDocument');\n  }\n\n  var elems = [],\n      documentElement = doc.documentElement ||\n      doc.getDocumentElement && doc.getDocumentElement();\n\n  // If we're dealing with an empty document then we\n  // need to pre-populate it with the HTML document structure\n  if (!documentElement && doc.createElement) {\n    (function() {\n      var html = doc.createElement('html');\n      var head = doc.createElement('head');\n      head.appendChild(doc.createElement('title'));\n      html.appendChild(head);\n      html.appendChild(doc.createElement('body'));\n      doc.appendChild(html);\n    })();\n  }\n\n  // Find all the unique elements\n  if (doc.getElementsByTagName) {\n    for (var i in one) {\n      one[i] = doc.getElementsByTagName(i)[0];\n    }\n  }\n\n  // If we're working with a document, inject contents into\n  // the body element\n  var curParentNode = one.body;\n\n  new HTMLParser(html, {\n    start: function(tagName, attrs, unary) {\n      // If it's a pre-built element, then we can ignore\n      // its construction\n      if (one[tagName]) {\n        curParentNode = one[tagName];\n        return;\n      }\n\n      var elem = doc.createElement(tagName);\n\n      for (var attr in attrs) {\n        elem.setAttribute(attrs[attr].name, attrs[attr].value);\n      }\n\n      if (structure[tagName] && typeof one[structure[tagName]] !== 'boolean') {\n        one[structure[tagName]].appendChild(elem);\n      }\n      else if (curParentNode && curParentNode.appendChild) {\n        curParentNode.appendChild(elem);\n      }\n\n      if (!unary) {\n        elems.push(elem);\n        curParentNode = elem;\n      }\n    },\n    end: function(/* tag */) {\n      elems.length -= 1;\n\n      // Init the new parentNode\n      curParentNode = elems[elems.length - 1];\n    },\n    chars: function(text) {\n      curParentNode.appendChild(doc.createTextNode(text));\n    },\n    comment: function(/* text */) {\n      // create comment node\n    },\n    ignore: function(/* text */) {\n      // What to do here?\n    }\n  });\n\n  return doc;\n};\n\nexports.endTag = endTag;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAEA;;AAEA,IAAIA,mBAAmB,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,mBAA7C;;AACA,IAAIE,YAAY,GAAGD,OAAO,CAAC,SAAD,CAAP,CAAmBC,YAAtC;;AAEA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB;EACvB,OAAOJ,mBAAmB,CAACI,MAAD,EAAS,IAAT,CAA1B;AACD,C,CAED;;;AACA,IAAIC,oBAAoB,GAAG,gBAA3B;AAAA,IACIC,iBAAiB,GAAG,CAAC,GAAD,CADxB;AAAA,IAEIC,gBAAgB,GAAG,CACnB;AACE,aAAaC,MAFI,EAGjB;AACA,aAAaA,MAJI,EAKjB;AACA,wBAAwBA,MANP,CAFvB;AAAA,IAUI;AACAC,YAAY,GAAI,YAAW;EAC3B;EACE,IAAIC,aAAa,GAAG,ylCAApB;EACA,IAAIC,KAAK,GAAG,uNAAZ;EACA,IAAIC,QAAQ,GAAG,oGAAf;EACA,IAAIC,MAAM,GAAG,wgFAAb;EACA,IAAIC,MAAM,GAAG,MAAMD,MAAN,GAAe,KAAf,GAAuBA,MAAvB,GAAgCF,KAAhC,GAAwC,SAAxC,GAAoDD,aAApD,GAAoEE,QAApE,GAA+E,IAA5F;EACA,OAAO,SAASE,MAAT,GAAkB,OAAlB,GAA4BA,MAA5B,GAAqC,GAA5C;AACD,CARc,EAXnB;AAAA,IAoBIC,YAAY,GAAG,IAAIC,MAAJ,CAAW,OAAOP,YAAlB,CApBnB;AAAA,IAqBIQ,aAAa,GAAG,YArBpB;AAAA,IAsBIC,MAAM,GAAG,IAAIF,MAAJ,CAAW,UAAUP,YAAV,GAAyB,QAApC,CAtBb;AAAA,IAuBIU,OAAO,GAAG,sBAvBd;;AAyBA,IAAIC,yBAAyB,GAAG,KAAhC;AACA,IAAIC,OAAJ,CAAY,QAAZ,EAAsB,UAASC,CAAT,EAAYC,CAAZ,EAAe;EACnCH,yBAAyB,GAAGG,CAAC,KAAK,EAAlC;AACD,CAFD,E,CAIA;;AACA,IAAIC,KAAK,GAAGrB,OAAO,CAAC,oGAAD,CAAnB,C,CAEA;;AACA,IAAIsB,MAAM,GAAGtB,OAAO,CAAC,iNAAD,CAApB,C,CAEA;AACA;;AACA,IAAIuB,SAAS,GAAGvB,OAAO,CAAC,wDAAD,CAAvB,C,CAEA;;AACA,IAAIwB,SAAS,GAAGxB,OAAO,CAAC,wGAAD,CAAvB,C,CAEA;;AACA,IAAIyB,OAAO,GAAGzB,OAAO,CAAC,cAAD,CAArB,C,CAEA;AACA;;AACA,IAAI0B,WAAW,GAAG1B,OAAO,CAAC,uSAAD,CAAzB;AAEA,IAAI2B,OAAO,GAAG,EAAd;;AAEA,SAASC,cAAT,CAAwBC,OAAxB,EAAiC;EAC/B,IAAIC,OAAO,GAAG5B,oBAAoB,CAACG,MAArB,GACZ,UADY,GACC0B,qBAAqB,CAACF,OAAD,CADtB,GACkC,GADlC,GAEZ,qBAFY,GAEYzB,gBAAgB,CAAC4B,IAAjB,CAAsB,GAAtB,CAFZ,GAEyC,KAFvD;;EAGA,IAAIH,OAAO,CAACI,kBAAZ,EAAgC;IAC9B,IAAIC,WAAW,GAAG,EAAlB;;IACA,KAAK,IAAIC,CAAC,GAAGN,OAAO,CAACI,kBAAR,CAA2BG,MAA3B,GAAoC,CAAjD,EAAoDD,CAAC,IAAI,CAAzD,EAA4DA,CAAC,EAA7D,EAAiE;MAC/DD,WAAW,CAACC,CAAD,CAAX,GAAiB,QACf,GADe,GACTN,OAAO,CAACI,kBAAR,CAA2BE,CAA3B,EAA8B,CAA9B,EAAiC9B,MADxB,GACiC,OADjC,GAEfyB,OAFe,GAGf,OAHe,GAGLD,OAAO,CAACI,kBAAR,CAA2BE,CAA3B,EAA8B,CAA9B,EAAiC9B,MAH5B,GAGqC,GAHrC,GAIf,GAJF;IAKD;;IACD6B,WAAW,CAACG,IAAZ,CAAiB,QAAQP,OAAR,GAAkB,GAAnC;IACAA,OAAO,GAAG,QAAQI,WAAW,CAACF,IAAZ,CAAiB,GAAjB,CAAR,GAAgC,GAA1C;EACD;;EACD,OAAO,IAAInB,MAAJ,CAAW,UAAUiB,OAArB,CAAP;AACD;;AAED,SAASC,qBAAT,CAA+BF,OAA/B,EAAwC;EACtC,OAAO1B,iBAAiB,CAACmC,MAAlB,CACLT,OAAO,CAACU,gBAAR,IAA4B,EADvB,EAELC,GAFK,CAED,UAASC,MAAT,EAAiB;IACrB,OAAO,QAAQA,MAAM,CAACpC,MAAf,GAAwB,GAA/B;EACD,CAJM,EAIJ2B,IAJI,CAIC,GAJD,CAAP;AAKD;;AAED,MAAMU,UAAN,CAAiB;EACfC,WAAW,CAACC,IAAD,EAAOf,OAAP,EAAgB;IACzB,KAAKe,IAAL,GAAYA,IAAZ;IACA,KAAKf,OAAL,GAAeA,OAAf;EACD;;EAEU,MAALgB,KAAK,GAAG;IACZ,IAAID,IAAI,GAAG,KAAKA,IAAhB;IACA,MAAMf,OAAO,GAAG,KAAKA,OAArB;IAEA,IAAIiB,KAAK,GAAG,EAAZ;IAAA,IAAgBC,OAAhB;IACA,IAAIC,SAAS,GAAGpB,cAAc,CAACC,OAAD,CAA9B;IACA,IAAIoB,IAAJ,EAAUC,OAAV,EAAmBC,OAAnB;;IACA,OAAOP,IAAP,EAAa;MACXK,IAAI,GAAGL,IAAP,CADW,CAEX;;MACA,IAAI,CAACG,OAAD,IAAY,CAACtB,OAAO,CAACsB,OAAD,CAAxB,EAAmC;QACjC,IAAIK,OAAO,GAAGR,IAAI,CAACS,OAAL,CAAa,GAAb,CAAd;;QACA,IAAID,OAAO,KAAK,CAAhB,EAAmB;UACjB;UACA,IAAI,QAAQE,IAAR,CAAaV,IAAb,CAAJ,EAAwB;YACtB,IAAIW,UAAU,GAAGX,IAAI,CAACS,OAAL,CAAa,KAAb,CAAjB;;YAEA,IAAIE,UAAU,IAAI,CAAlB,EAAqB;cACnB,IAAI1B,OAAO,CAAC2B,OAAZ,EAAqB;gBACnB,MAAM3B,OAAO,CAAC2B,OAAR,CAAgBZ,IAAI,CAACa,SAAL,CAAe,CAAf,EAAkBF,UAAlB,CAAhB,CAAN;cACD;;cACDX,IAAI,GAAGA,IAAI,CAACa,SAAL,CAAeF,UAAU,GAAG,CAA5B,CAAP;cACAL,OAAO,GAAG,EAAV;cACA;YACD;UACF,CAbgB,CAejB;;;UACA,IAAI,QAAQI,IAAR,CAAaV,IAAb,CAAJ,EAAwB;YACtB,IAAIc,cAAc,GAAGd,IAAI,CAACS,OAAL,CAAa,IAAb,CAArB;;YAEA,IAAIK,cAAc,IAAI,CAAtB,EAAyB;cACvB,IAAI7B,OAAO,CAAC2B,OAAZ,EAAqB;gBACnB,MAAM3B,OAAO,CAAC2B,OAAR,CAAgBZ,IAAI,CAACa,SAAL,CAAe,CAAf,EAAkBC,cAAc,GAAG,CAAnC,CAAhB,EAAuD;gBAAK;gBAA5D,CAAN;cACD;;cACDd,IAAI,GAAGA,IAAI,CAACa,SAAL,CAAeC,cAAc,GAAG,CAAhC,CAAP;cACAR,OAAO,GAAG,EAAV;cACA;YACD;UACF,CA3BgB,CA6BjB;;;UACA,IAAIS,YAAY,GAAGf,IAAI,CAACgB,KAAL,CAAW5C,OAAX,CAAnB;;UACA,IAAI2C,YAAJ,EAAkB;YAChB,IAAI9B,OAAO,CAACb,OAAZ,EAAqB;cACnBa,OAAO,CAACb,OAAR,CAAgB2C,YAAY,CAAC,CAAD,CAA5B;YACD;;YACDf,IAAI,GAAGA,IAAI,CAACa,SAAL,CAAeE,YAAY,CAAC,CAAD,CAAZ,CAAgBvB,MAA/B,CAAP;YACAc,OAAO,GAAG,EAAV;YACA;UACD,CAtCgB,CAwCjB;;;UACA,IAAIW,WAAW,GAAGjB,IAAI,CAACgB,KAAL,CAAW7C,MAAX,CAAlB;;UACA,IAAI8C,WAAJ,EAAiB;YACfjB,IAAI,GAAGA,IAAI,CAACa,SAAL,CAAeI,WAAW,CAAC,CAAD,CAAX,CAAezB,MAA9B,CAAP;YACA,MAAMrC,YAAY,CAAC8D,WAAW,CAAC,CAAD,CAAZ,EAAiB9C,MAAjB,EAAyB+C,WAAzB,CAAlB;YACAZ,OAAO,GAAG,MAAMW,WAAW,CAAC,CAAD,CAAX,CAAeE,WAAf,EAAhB;YACA;UACD,CA/CgB,CAiDjB;;;UACA,IAAIC,aAAa,GAAGC,aAAa,CAACrB,IAAD,CAAjC;;UACA,IAAIoB,aAAJ,EAAmB;YACjBpB,IAAI,GAAGoB,aAAa,CAACE,IAArB;YACA,MAAMC,cAAc,CAACH,aAAD,CAApB;YACAd,OAAO,GAAGc,aAAa,CAACI,OAAd,CAAsBL,WAAtB,EAAV;YACA;UACD,CAxDgB,CA0DjB;;;UACA,IAAIlC,OAAO,CAACwC,oBAAZ,EAAkC;YAChCjB,OAAO,GAAGR,IAAI,CAACS,OAAL,CAAa,GAAb,EAAkB,CAAlB,CAAV;UACD;QACF;;QAED,IAAIiB,IAAJ;;QACA,IAAIlB,OAAO,IAAI,CAAf,EAAkB;UAChBkB,IAAI,GAAG1B,IAAI,CAACa,SAAL,CAAe,CAAf,EAAkBL,OAAlB,CAAP;UACAR,IAAI,GAAGA,IAAI,CAACa,SAAL,CAAeL,OAAf,CAAP;QACD,CAHD,MAIK;UACHkB,IAAI,GAAG1B,IAAP;UACAA,IAAI,GAAG,EAAP;QACD,CA1EgC,CA4EjC;;;QACA,IAAI2B,YAAY,GAAGN,aAAa,CAACrB,IAAD,CAAhC;;QACA,IAAI2B,YAAJ,EAAkB;UAChBpB,OAAO,GAAGoB,YAAY,CAACH,OAAvB;QACD,CAFD,MAGK;UACHG,YAAY,GAAG3B,IAAI,CAACgB,KAAL,CAAW7C,MAAX,CAAf;;UACA,IAAIwD,YAAJ,EAAkB;YAChBpB,OAAO,GAAG,MAAMoB,YAAY,CAAC,CAAD,CAA5B;UACD,CAFD,MAGK;YACHpB,OAAO,GAAG,EAAV;UACD;QACF;;QAED,IAAItB,OAAO,CAAC2C,KAAZ,EAAmB;UACjB,MAAM3C,OAAO,CAAC2C,KAAR,CAAcF,IAAd,EAAoBpB,OAApB,EAA6BC,OAA7B,CAAN;QACD;;QACDD,OAAO,GAAG,EAAV;MACD,CA/FD,MAgGK;QACH,IAAIuB,UAAU,GAAG1B,OAAO,CAACgB,WAAR,EAAjB;QACA,IAAIW,YAAY,GAAG/C,OAAO,CAAC8C,UAAD,CAAP,KAAwB9C,OAAO,CAAC8C,UAAD,CAAP,GAAsB,IAAI5D,MAAJ,CAAW,mBAAmB4D,UAAnB,GAAgC,QAA3C,EAAqD,GAArD,CAA9C,CAAnB;QAEA7B,IAAI,GAAG,MAAM7C,YAAY,CAAC6C,IAAD,EAAO8B,YAAP,EAAqB,OAAMC,CAAN,EAASL,IAAT,KAAkB;UAC9D,IAAIG,UAAU,KAAK,QAAf,IAA2BA,UAAU,KAAK,OAA1C,IAAqDA,UAAU,KAAK,UAAxE,EAAoF;YAClFH,IAAI,GAAGA,IAAI,CACRpD,OADI,CACI,oBADJ,EAC0B,IAD1B,EAEJA,OAFI,CAEI,2BAFJ,EAEiC,IAFjC,CAAP;UAGD;;UAGD,IAAIW,OAAO,CAAC2C,KAAZ,EAAmB;YACjB,MAAM3C,OAAO,CAAC2C,KAAR,CAAcF,IAAd,CAAN;UACD;;UAED,OAAO,EAAP;QACD,CAbwB,CAAzB;QAeA,MAAMR,WAAW,CAAC,OAAOW,UAAP,GAAoB,GAArB,EAA0BA,UAA1B,CAAjB;MACD;;MAED,IAAI7B,IAAI,KAAKK,IAAb,EAAmB;QACjB,MAAM,IAAI2B,KAAJ,CAAU,kBAAkBhC,IAA5B,CAAN;MACD;IACF;;IAED,IAAI,CAACf,OAAO,CAACgD,aAAb,EAA4B;MAC1B;MACA,MAAMf,WAAW,EAAjB;IACD;;IAED,SAASG,aAAT,CAAuBa,KAAvB,EAA8B;MAC5B,IAAIC,KAAK,GAAGD,KAAK,CAAClB,KAAN,CAAYhD,YAAZ,CAAZ;;MACA,IAAImE,KAAJ,EAAW;QACT,IAAInB,KAAK,GAAG;UACVQ,OAAO,EAAEW,KAAK,CAAC,CAAD,CADJ;UAEVC,KAAK,EAAE;QAFG,CAAZ;QAIAF,KAAK,GAAGA,KAAK,CAACG,KAAN,CAAYF,KAAK,CAAC,CAAD,CAAL,CAAS3C,MAArB,CAAR;QACA,IAAI8C,GAAJ,EAASC,IAAT;;QACA,OAAO,EAAED,GAAG,GAAGJ,KAAK,CAAClB,KAAN,CAAY9C,aAAZ,CAAR,MAAwCqE,IAAI,GAAGL,KAAK,CAAClB,KAAN,CAAYZ,SAAZ,CAA/C,CAAP,EAA+E;UAC7E8B,KAAK,GAAGA,KAAK,CAACG,KAAN,CAAYE,IAAI,CAAC,CAAD,CAAJ,CAAQ/C,MAApB,CAAR;UACAwB,KAAK,CAACoB,KAAN,CAAY3C,IAAZ,CAAiB8C,IAAjB;QACD;;QACD,IAAID,GAAJ,EAAS;UACPtB,KAAK,CAACwB,UAAN,GAAmBF,GAAG,CAAC,CAAD,CAAtB;UACAtB,KAAK,CAACM,IAAN,GAAaY,KAAK,CAACG,KAAN,CAAYC,GAAG,CAAC,CAAD,CAAH,CAAO9C,MAAnB,CAAb;UACA,OAAOwB,KAAP;QACD;MACF;IACF;;IAED,eAAeyB,YAAf,CAA4BjB,OAA5B,EAAqC;MACnC,IAAIkB,OAAO,CAAClB,OAAD,CAAP,IAAoB,CAAxB,EAA2B;QACzB,MAAMN,WAAW,CAAC,EAAD,EAAKM,OAAL,CAAjB;QACA,OAAO,IAAP;MACD;IACF;;IAED,eAAeD,cAAf,CAA8BP,KAA9B,EAAqC;MACnC,IAAIQ,OAAO,GAAGR,KAAK,CAACQ,OAApB;MACA,IAAIgB,UAAU,GAAGxB,KAAK,CAACwB,UAAvB;;MAEA,IAAIvD,OAAO,CAAC0D,KAAZ,EAAmB;QACjB,IAAIxC,OAAO,KAAK,GAAZ,IAAmBrB,WAAW,CAAC0C,OAAD,CAAlC,EAA6C;UAC3C,MAAMN,WAAW,CAAC,EAAD,EAAKf,OAAL,CAAjB;QACD,CAFD,MAGK,IAAIqB,OAAO,KAAK,OAAhB,EAAyB;UAC5B,MAAMiB,YAAY,CAAC,OAAD,CAAlB;QACD,CAFI,MAGA,IAAIjB,OAAO,KAAK,OAAhB,EAAyB;UAC5B,IAAI,EAAC,MAAMiB,YAAY,CAAC,OAAD,CAAnB,CAAJ,EAAkC;YAChC,MAAMA,YAAY,CAAC,OAAD,CAAlB;UACD;QACF;;QACD,IAAIjB,OAAO,KAAK,KAAZ,IAAqBkB,OAAO,CAAC,UAAD,CAAP,GAAsB,CAA/C,EAAkD;UAChDvC,OAAO,GAAG,UAAV;UACAD,KAAK,CAACT,IAAN,CAAW;YAAEmD,GAAG,EAAEzC,OAAP;YAAgBiC,KAAK,EAAE;UAAvB,CAAX;;UACA,IAAInD,OAAO,CAACkD,KAAZ,EAAmB;YACjB,MAAMlD,OAAO,CAACkD,KAAR,CAAchC,OAAd,EAAuB,EAAvB,EAA2B,KAA3B,EAAkC,EAAlC,CAAN;UACD;QACF;MACF;;MAED,IAAI,CAAClB,OAAO,CAAC0D,KAAT,IAAkB,CAACjE,MAAM,CAAC8C,OAAD,CAA7B,EAAwC;QACtC,OAAOrB,OAAO,IAAIzB,MAAM,CAACyB,OAAD,CAAxB,EAAmC;UACjC,MAAMe,WAAW,CAAC,EAAD,EAAKf,OAAL,CAAjB;QACD;MACF;;MAED,IAAIxB,SAAS,CAAC6C,OAAD,CAAT,IAAsBrB,OAAO,KAAKqB,OAAtC,EAA+C;QAC7C,MAAMN,WAAW,CAAC,EAAD,EAAKM,OAAL,CAAjB;MACD;;MAED,IAAIqB,KAAK,GAAGpE,KAAK,CAAC+C,OAAD,CAAL,IAAkBA,OAAO,KAAK,MAAZ,IAAsBrB,OAAO,KAAK,MAApD,IAA8D,CAAC,CAACqC,UAA5E;MAEA,IAAIJ,KAAK,GAAGpB,KAAK,CAACoB,KAAN,CAAYxC,GAAZ,CAAgB,UAASkD,IAAT,EAAe;QACzC,IAAIC,IAAJ,EAAUC,KAAV,EAAiBC,UAAjB,EAA6BC,WAA7B,EAA0CC,YAA1C,EAAwDC,KAAxD;QACA,IAAIC,GAAG,GAAG,CAAV,CAFyC,CAE5B;QAEb;;QACA,IAAIhF,yBAAyB,IAAIyE,IAAI,CAAC,CAAD,CAAJ,CAAQrC,OAAR,CAAgB,IAAhB,MAA0B,CAAC,CAA5D,EAA+D;UAC7D,IAAIqC,IAAI,CAAC,CAAD,CAAJ,KAAY,EAAhB,EAAoB;YAAE,OAAOA,IAAI,CAAC,CAAD,CAAX;UAAiB;;UACvC,IAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,EAAhB,EAAoB;YAAE,OAAOA,IAAI,CAAC,CAAD,CAAX;UAAiB;;UACvC,IAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,EAAhB,EAAoB;YAAE,OAAOA,IAAI,CAAC,CAAD,CAAX;UAAiB;QACxC;;QAED,SAASQ,QAAT,CAAkBC,KAAlB,EAAyB;UACvBJ,YAAY,GAAGL,IAAI,CAACS,KAAD,CAAnB;UACAP,KAAK,GAAGF,IAAI,CAACS,KAAK,GAAG,CAAT,CAAZ;;UACA,IAAI,OAAOP,KAAP,KAAiB,WAArB,EAAkC;YAChC,OAAO,GAAP;UACD;;UACDA,KAAK,GAAGF,IAAI,CAACS,KAAK,GAAG,CAAT,CAAZ;;UACA,IAAI,OAAOP,KAAP,KAAiB,WAArB,EAAkC;YAChC,OAAO,IAAP;UACD;;UACDA,KAAK,GAAGF,IAAI,CAACS,KAAK,GAAG,CAAT,CAAZ;;UACA,IAAI,OAAOP,KAAP,KAAiB,WAAjB,IAAgCpE,SAAS,CAACmE,IAAD,CAA7C,EAAqD;YACnDC,KAAK,GAAGD,IAAR;UACD;;UACD,OAAO,EAAP;QACD;;QAED,IAAIS,CAAC,GAAG,CAAR;;QACA,IAAIvE,OAAO,CAACI,kBAAZ,EAAgC;UAC9B,KAAK,IAAIE,CAAC,GAAG,CAAR,EAAWkE,CAAC,GAAGxE,OAAO,CAACI,kBAAR,CAA2BG,MAA/C,EAAuDD,CAAC,GAAGkE,CAA3D,EAA8DlE,CAAC,IAAIiE,CAAC,IAAIH,GAAxE,EAA6E;YAC3EN,IAAI,GAAGD,IAAI,CAACU,CAAC,GAAG,CAAL,CAAX;;YACA,IAAIT,IAAJ,EAAU;cACRK,KAAK,GAAGE,QAAQ,CAACE,CAAC,GAAG,CAAL,CAAhB;cACAP,UAAU,GAAGH,IAAI,CAACU,CAAD,CAAjB;cACAN,WAAW,GAAGJ,IAAI,CAACU,CAAC,GAAG,CAAL,CAAlB;cACA;YACD;UACF;QACF;;QAED,IAAI,CAACT,IAAD,KAAUA,IAAI,GAAGD,IAAI,CAACU,CAAD,CAArB,CAAJ,EAA+B;UAC7BJ,KAAK,GAAGE,QAAQ,CAACE,CAAC,GAAG,CAAL,CAAhB;QACD;;QAED,OAAO;UACLT,IAAI,EAAEA,IADD;UAELC,KAAK,EAAEA,KAFF;UAGLG,YAAY,EAAEA,YAAY,IAAI,GAHzB;UAILF,UAAU,EAAEA,UAAU,IAAI,EAJrB;UAKLC,WAAW,EAAEA,WAAW,IAAI,EALvB;UAMLE,KAAK,EAAEA,KAAK,IAAI;QANX,CAAP;MAQD,CArDW,CAAZ;;MAuDA,IAAI,CAACP,KAAL,EAAY;QACV3C,KAAK,CAACT,IAAN,CAAW;UAAEmD,GAAG,EAAEpB,OAAP;UAAgBY,KAAK,EAAEA;QAAvB,CAAX;QACAjC,OAAO,GAAGqB,OAAV;QACAgB,UAAU,GAAG,EAAb;MACD;;MAED,IAAIvD,OAAO,CAACkD,KAAZ,EAAmB;QACjB,MAAMlD,OAAO,CAACkD,KAAR,CAAcX,OAAd,EAAuBY,KAAvB,EAA8BS,KAA9B,EAAqCL,UAArC,CAAN;MACD;IACF;;IAED,SAASE,OAAT,CAAiBlB,OAAjB,EAA0B;MACxB,IAAIkC,GAAJ;MACA,IAAIC,MAAM,GAAGnC,OAAO,CAACL,WAAR,EAAb;;MACA,KAAKuC,GAAG,GAAGxD,KAAK,CAACV,MAAN,GAAe,CAA1B,EAA6BkE,GAAG,IAAI,CAApC,EAAuCA,GAAG,EAA1C,EAA8C;QAC5C,IAAIxD,KAAK,CAACwD,GAAD,CAAL,CAAWd,GAAX,CAAezB,WAAf,OAAiCwC,MAArC,EAA6C;UAC3C;QACD;MACF;;MACD,OAAOD,GAAP;IACD;;IAED,eAAexC,WAAf,CAA2B0B,GAA3B,EAAgCpB,OAAhC,EAAyC;MACvC,IAAIkC,GAAJ,CADuC,CAGvC;;MACA,IAAIlC,OAAJ,EAAa;QACXkC,GAAG,GAAGhB,OAAO,CAAClB,OAAD,CAAb;MACD,CAFD,CAGA;MAHA,KAIK;QACHkC,GAAG,GAAG,CAAN;MACD;;MAED,IAAIA,GAAG,IAAI,CAAX,EAAc;QACZ;QACA,KAAK,IAAInE,CAAC,GAAGW,KAAK,CAACV,MAAN,GAAe,CAA5B,EAA+BD,CAAC,IAAImE,GAApC,EAAyCnE,CAAC,EAA1C,EAA8C;UAC5C,IAAIN,OAAO,CAACqD,GAAZ,EAAiB;YACfrD,OAAO,CAACqD,GAAR,CAAYpC,KAAK,CAACX,CAAD,CAAL,CAASqD,GAArB,EAA0B1C,KAAK,CAACX,CAAD,CAAL,CAAS6C,KAAnC,EAA0C7C,CAAC,GAAGmE,GAAJ,IAAW,CAACd,GAAtD;UACD;QACF,CANW,CAQZ;;;QACA1C,KAAK,CAACV,MAAN,GAAekE,GAAf;QACAvD,OAAO,GAAGuD,GAAG,IAAIxD,KAAK,CAACwD,GAAG,GAAG,CAAP,CAAL,CAAed,GAAhC;MACD,CAXD,MAYK,IAAIpB,OAAO,CAACL,WAAR,OAA0B,IAA9B,EAAoC;QACvC,IAAIlC,OAAO,CAACkD,KAAZ,EAAmB;UACjB,MAAMlD,OAAO,CAACkD,KAAR,CAAcX,OAAd,EAAuB,EAAvB,EAA2B,IAA3B,EAAiC,EAAjC,CAAN;QACD;MACF,CAJI,MAKA,IAAIA,OAAO,CAACL,WAAR,OAA0B,GAA9B,EAAmC;QACtC,IAAIlC,OAAO,CAACkD,KAAZ,EAAmB;UACjB,MAAMlD,OAAO,CAACkD,KAAR,CAAcX,OAAd,EAAuB,EAAvB,EAA2B,KAA3B,EAAkC,EAAlC,EAAsC,IAAtC,CAAN;QACD;;QACD,IAAIvC,OAAO,CAACqD,GAAZ,EAAiB;UACfrD,OAAO,CAACqD,GAAR,CAAYd,OAAZ,EAAqB,EAArB;QACD;MACF;IACF;EACF;;AApUc;;AAuUjBoC,OAAO,CAAC9D,UAAR,GAAqBA,UAArB;;AACA8D,OAAO,CAACC,SAAR,GAAoB,UAAS7D,IAAT,EAAe;EACjC,IAAI8D,OAAO,GAAG,EAAd;EAEA,IAAIhE,UAAJ,CAAeE,IAAf,EAAqB;IACnBmC,KAAK,EAAE,UAASS,GAAT,EAAcR,KAAd,EAAqBS,KAArB,EAA4B;MACjCiB,OAAO,IAAI,MAAMlB,GAAjB;;MAEA,KAAK,IAAIrD,CAAC,GAAG,CAAR,EAAWwE,GAAG,GAAG3B,KAAK,CAAC5C,MAA5B,EAAoCD,CAAC,GAAGwE,GAAxC,EAA6CxE,CAAC,EAA9C,EAAkD;QAChDuE,OAAO,IAAI,MAAM1B,KAAK,CAAC7C,CAAD,CAAL,CAASwD,IAAf,GAAsB,IAAtB,GAA6B,CAACX,KAAK,CAAC7C,CAAD,CAAL,CAASyD,KAAT,IAAkB,EAAnB,EAAuB1E,OAAvB,CAA+B,IAA/B,EAAqC,OAArC,CAA7B,GAA6E,GAAxF;MACD;;MAEDwF,OAAO,IAAI,CAACjB,KAAK,GAAG,GAAH,GAAS,EAAf,IAAqB,GAAhC;IACD,CATkB;IAUnBP,GAAG,EAAE,UAASM,GAAT,EAAc;MACjBkB,OAAO,IAAI,OAAOlB,GAAP,GAAa,GAAxB;IACD,CAZkB;IAanBhB,KAAK,EAAE,UAASF,IAAT,EAAe;MACpBoC,OAAO,IAAIpC,IAAX;IACD,CAfkB;IAgBnBd,OAAO,EAAE,UAASc,IAAT,EAAe;MACtBoC,OAAO,IAAI,SAASpC,IAAT,GAAgB,KAA3B;IACD,CAlBkB;IAmBnBsC,MAAM,EAAE,UAAStC,IAAT,EAAe;MACrBoC,OAAO,IAAIpC,IAAX;IACD;EArBkB,CAArB;EAwBA,OAAOoC,OAAP;AACD,CA5BD;;AA8BAF,OAAO,CAACK,SAAR,GAAoB,UAASjE,IAAT,EAAekE,GAAf,EAAoB;EACtC;EACA,IAAIC,GAAG,GAAG;IACRnE,IAAI,EAAE,IADE;IAERoE,IAAI,EAAE,IAFE;IAGRC,IAAI,EAAE,IAHE;IAIRC,KAAK,EAAE;EAJC,CAAV,CAFsC,CAStC;;EACA,IAAIC,SAAS,GAAG;IACdC,IAAI,EAAE,MADQ;IAEdC,IAAI,EAAE;EAFQ,CAAhB;;EAKA,IAAIP,GAAJ,EAAS;IACPA,GAAG,GAAGA,GAAG,CAACQ,aAAJ,IAAqBR,GAAG,CAACS,gBAAJ,IAAwBT,GAAG,CAACS,gBAAJ,EAA7C,IAAuET,GAA7E;EACD,CAFD,MAGK,IAAI,OAAOU,WAAP,KAAuB,WAA3B,EAAwC;IAC3CV,GAAG,GAAG,IAAIU,WAAJ,EAAN;EACD,CAFI,MAGA,IAAI,OAAOC,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,CAACC,cAA5C,IAA8DD,QAAQ,CAACC,cAAT,CAAwBC,cAA1F,EAA0G;IAC7Gb,GAAG,GAAGW,QAAQ,CAACC,cAAT,CAAwBC,cAAxB,CAAuC,EAAvC,EAA2C,EAA3C,EAA+C,IAA/C,CAAN;EACD,CAFI,MAGA,IAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;IACvCd,GAAG,GAAG,IAAIe,aAAJ,CAAkB,mBAAlB,CAAN;EACD;;EAED,IAAIC,KAAK,GAAG,EAAZ;EAAA,IACIC,eAAe,GAAGjB,GAAG,CAACiB,eAAJ,IAClBjB,GAAG,CAACkB,kBAAJ,IAA0BlB,GAAG,CAACkB,kBAAJ,EAF9B,CA5BsC,CAgCtC;EACA;;EACA,IAAI,CAACD,eAAD,IAAoBjB,GAAG,CAACmB,aAA5B,EAA2C;IACzC,CAAC,YAAW;MACV,IAAIrF,IAAI,GAAGkE,GAAG,CAACmB,aAAJ,CAAkB,MAAlB,CAAX;MACA,IAAIjB,IAAI,GAAGF,GAAG,CAACmB,aAAJ,CAAkB,MAAlB,CAAX;MACAjB,IAAI,CAACkB,WAAL,CAAiBpB,GAAG,CAACmB,aAAJ,CAAkB,OAAlB,CAAjB;MACArF,IAAI,CAACsF,WAAL,CAAiBlB,IAAjB;MACApE,IAAI,CAACsF,WAAL,CAAiBpB,GAAG,CAACmB,aAAJ,CAAkB,MAAlB,CAAjB;MACAnB,GAAG,CAACoB,WAAJ,CAAgBtF,IAAhB;IACD,CAPD;EAQD,CA3CqC,CA6CtC;;;EACA,IAAIkE,GAAG,CAACqB,oBAAR,EAA8B;IAC5B,KAAK,IAAIhG,CAAT,IAAc4E,GAAd,EAAmB;MACjBA,GAAG,CAAC5E,CAAD,CAAH,GAAS2E,GAAG,CAACqB,oBAAJ,CAAyBhG,CAAzB,EAA4B,CAA5B,CAAT;IACD;EACF,CAlDqC,CAoDtC;EACA;;;EACA,IAAIiG,aAAa,GAAGrB,GAAG,CAACE,IAAxB;EAEA,IAAIvE,UAAJ,CAAeE,IAAf,EAAqB;IACnBmC,KAAK,EAAE,UAASX,OAAT,EAAkBY,KAAlB,EAAyBS,KAAzB,EAAgC;MACrC;MACA;MACA,IAAIsB,GAAG,CAAC3C,OAAD,CAAP,EAAkB;QAChBgE,aAAa,GAAGrB,GAAG,CAAC3C,OAAD,CAAnB;QACA;MACD;;MAED,IAAIiE,IAAI,GAAGvB,GAAG,CAACmB,aAAJ,CAAkB7D,OAAlB,CAAX;;MAEA,KAAK,IAAIe,IAAT,IAAiBH,KAAjB,EAAwB;QACtBqD,IAAI,CAACC,YAAL,CAAkBtD,KAAK,CAACG,IAAD,CAAL,CAAYQ,IAA9B,EAAoCX,KAAK,CAACG,IAAD,CAAL,CAAYS,KAAhD;MACD;;MAED,IAAIuB,SAAS,CAAC/C,OAAD,CAAT,IAAsB,OAAO2C,GAAG,CAACI,SAAS,CAAC/C,OAAD,CAAV,CAAV,KAAmC,SAA7D,EAAwE;QACtE2C,GAAG,CAACI,SAAS,CAAC/C,OAAD,CAAV,CAAH,CAAwB8D,WAAxB,CAAoCG,IAApC;MACD,CAFD,MAGK,IAAID,aAAa,IAAIA,aAAa,CAACF,WAAnC,EAAgD;QACnDE,aAAa,CAACF,WAAd,CAA0BG,IAA1B;MACD;;MAED,IAAI,CAAC5C,KAAL,EAAY;QACVqC,KAAK,CAACzF,IAAN,CAAWgG,IAAX;QACAD,aAAa,GAAGC,IAAhB;MACD;IACF,CA1BkB;IA2BnBnD,GAAG,EAAE;MAAS;IAAT,GAAoB;MACvB4C,KAAK,CAAC1F,MAAN,IAAgB,CAAhB,CADuB,CAGvB;;MACAgG,aAAa,GAAGN,KAAK,CAACA,KAAK,CAAC1F,MAAN,GAAe,CAAhB,CAArB;IACD,CAhCkB;IAiCnBoC,KAAK,EAAE,UAASF,IAAT,EAAe;MACpB8D,aAAa,CAACF,WAAd,CAA0BpB,GAAG,CAACyB,cAAJ,CAAmBjE,IAAnB,CAA1B;IACD,CAnCkB;IAoCnBd,OAAO,EAAE;MAAS;IAAT,GAAqB,CAC5B;IACD,CAtCkB;IAuCnBoD,MAAM,EAAE;MAAS;IAAT,GAAqB,CAC3B;IACD;EAzCkB,CAArB;EA4CA,OAAOE,GAAP;AACD,CArGD;;AAuGAN,OAAO,CAACzF,MAAR,GAAiBA,MAAjB"},"metadata":{},"sourceType":"script"}