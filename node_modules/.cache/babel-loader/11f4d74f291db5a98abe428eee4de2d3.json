{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nfunction _util() {\n  const data = require('util');\n\n  _util = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _v() {\n  const data = require('v8');\n\n  _v = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _vm() {\n  const data = require('vm');\n\n  _vm = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _jestGetType() {\n  const data = require('jest-get-type');\n\n  _jestGetType = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _prettyFormat() {\n  const data = require('pretty-format');\n\n  _prettyFormat = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst tick = (0, _util().promisify)(setImmediate);\n\nclass LeakDetector {\n  constructor(value) {\n    _defineProperty(this, '_isReferenceBeingHeld', void 0);\n\n    if ((0, _jestGetType().isPrimitive)(value)) {\n      throw new TypeError(['Primitives cannot leak memory.', 'You passed a ' + typeof value + ': <' + (0, _prettyFormat().format)(value) + '>'].join(' '));\n    }\n\n    let weak;\n\n    try {\n      // eslint-disable-next-line import/no-extraneous-dependencies\n      weak = require('weak-napi');\n    } catch (err) {\n      if (!err || err.code !== 'MODULE_NOT_FOUND') {\n        throw err;\n      }\n\n      throw new Error('The leaking detection mechanism requires the \"weak-napi\" package to be installed and work. ' + 'Please install it as a dependency on your main project');\n    }\n\n    weak(value, () => this._isReferenceBeingHeld = false);\n    this._isReferenceBeingHeld = true; // Ensure value is not leaked by the closure created by the \"weak\" callback.\n\n    value = null;\n  }\n\n  async isLeaking() {\n    this._runGarbageCollector(); // wait some ticks to allow GC to run properly, see https://github.com/nodejs/node/issues/34636#issuecomment-669366235\n\n\n    for (let i = 0; i < 10; i++) {\n      await tick();\n    }\n\n    return this._isReferenceBeingHeld;\n  }\n\n  _runGarbageCollector() {\n    const isGarbageCollectorHidden = !global.gc; // GC is usually hidden, so we have to expose it before running.\n\n    (0, _v().setFlagsFromString)('--expose-gc');\n    (0, _vm().runInNewContext)('gc')(); // The GC was not initially exposed, so let's hide it again.\n\n    if (isGarbageCollectorHidden) {\n      (0, _v().setFlagsFromString)('--no-expose-gc');\n    }\n  }\n\n}\n\nexports.default = LeakDetector;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_util","data","require","_v","_vm","_jestGetType","_prettyFormat","_defineProperty","obj","key","enumerable","configurable","writable","tick","promisify","setImmediate","LeakDetector","constructor","isPrimitive","TypeError","format","join","weak","err","code","Error","_isReferenceBeingHeld","isLeaking","_runGarbageCollector","i","isGarbageCollectorHidden","global","gc","setFlagsFromString","runInNewContext"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/jest-leak-detector/build/index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nfunction _util() {\n  const data = require('util');\n\n  _util = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _v() {\n  const data = require('v8');\n\n  _v = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _vm() {\n  const data = require('vm');\n\n  _vm = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _jestGetType() {\n  const data = require('jest-get-type');\n\n  _jestGetType = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _prettyFormat() {\n  const data = require('pretty-format');\n\n  _prettyFormat = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nconst tick = (0, _util().promisify)(setImmediate);\n\nclass LeakDetector {\n  constructor(value) {\n    _defineProperty(this, '_isReferenceBeingHeld', void 0);\n\n    if ((0, _jestGetType().isPrimitive)(value)) {\n      throw new TypeError(\n        [\n          'Primitives cannot leak memory.',\n          'You passed a ' +\n            typeof value +\n            ': <' +\n            (0, _prettyFormat().format)(value) +\n            '>'\n        ].join(' ')\n      );\n    }\n\n    let weak;\n\n    try {\n      // eslint-disable-next-line import/no-extraneous-dependencies\n      weak = require('weak-napi');\n    } catch (err) {\n      if (!err || err.code !== 'MODULE_NOT_FOUND') {\n        throw err;\n      }\n\n      throw new Error(\n        'The leaking detection mechanism requires the \"weak-napi\" package to be installed and work. ' +\n          'Please install it as a dependency on your main project'\n      );\n    }\n\n    weak(value, () => (this._isReferenceBeingHeld = false));\n    this._isReferenceBeingHeld = true; // Ensure value is not leaked by the closure created by the \"weak\" callback.\n\n    value = null;\n  }\n\n  async isLeaking() {\n    this._runGarbageCollector(); // wait some ticks to allow GC to run properly, see https://github.com/nodejs/node/issues/34636#issuecomment-669366235\n\n    for (let i = 0; i < 10; i++) {\n      await tick();\n    }\n\n    return this._isReferenceBeingHeld;\n  }\n\n  _runGarbageCollector() {\n    const isGarbageCollectorHidden = !global.gc; // GC is usually hidden, so we have to expose it before running.\n\n    (0, _v().setFlagsFromString)('--expose-gc');\n    (0, _vm().runInNewContext)('gc')(); // The GC was not initially exposed, so let's hide it again.\n\n    if (isGarbageCollectorHidden) {\n      (0, _v().setFlagsFromString)('--no-expose-gc');\n    }\n  }\n}\n\nexports.default = LeakDetector;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}