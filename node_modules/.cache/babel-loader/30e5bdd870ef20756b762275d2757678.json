{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = require(\"@typescript-eslint/utils\");\n\nconst tsutils = __importStar(require(\"tsutils\"));\n\nconst util = __importStar(require(\"../util\"));\n\nexports.default = util.createRule({\n  name: 'no-dynamic-delete',\n  meta: {\n    docs: {\n      description: 'Disallow using the `delete` operator on computed key expressions',\n      recommended: 'strict'\n    },\n    fixable: 'code',\n    messages: {\n      dynamicDelete: 'Do not delete dynamically computed property keys.'\n    },\n    schema: [],\n    type: 'suggestion'\n  },\n  defaultOptions: [],\n\n  create(context) {\n    function createFixer(member) {\n      if (member.property.type === utils_1.AST_NODE_TYPES.Literal && typeof member.property.value === 'string') {\n        return createPropertyReplacement(member.property, `.${member.property.value}`);\n      }\n\n      return undefined;\n    }\n\n    return {\n      'UnaryExpression[operator=delete]'(node) {\n        if (node.argument.type !== utils_1.AST_NODE_TYPES.MemberExpression || !node.argument.computed || isNecessaryDynamicAccess(diveIntoWrapperExpressions(node.argument.property))) {\n          return;\n        }\n\n        context.report({\n          fix: createFixer(node.argument),\n          messageId: 'dynamicDelete',\n          node: node.argument.property\n        });\n      }\n\n    };\n\n    function createPropertyReplacement(property, replacement) {\n      return fixer => fixer.replaceTextRange(getTokenRange(property), replacement);\n    }\n\n    function getTokenRange(property) {\n      const sourceCode = context.getSourceCode();\n      return [sourceCode.getTokenBefore(property).range[0], sourceCode.getTokenAfter(property).range[1]];\n    }\n  }\n\n});\n\nfunction diveIntoWrapperExpressions(node) {\n  if (node.type === utils_1.AST_NODE_TYPES.UnaryExpression) {\n    return diveIntoWrapperExpressions(node.argument);\n  }\n\n  return node;\n}\n\nfunction isNecessaryDynamicAccess(property) {\n  if (property.type !== utils_1.AST_NODE_TYPES.Literal) {\n    return false;\n  }\n\n  if (typeof property.value === 'number') {\n    return true;\n  }\n\n  return typeof property.value === 'string' && !tsutils.isValidPropertyAccess(property.value);\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;AACA;;AAEA;;AAEAA,kBAAeC,IAAI,CAACC,UAAL,CAAgB;EAC7BC,IAAI,EAAE,mBADuB;EAE7BC,IAAI,EAAE;IACJC,IAAI,EAAE;MACJC,WAAW,EACT,kEAFE;MAGJC,WAAW,EAAE;IAHT,CADF;IAMJC,OAAO,EAAE,MANL;IAOJC,QAAQ,EAAE;MACRC,aAAa,EAAE;IADP,CAPN;IAUJC,MAAM,EAAE,EAVJ;IAWJC,IAAI,EAAE;EAXF,CAFuB;EAe7BC,cAAc,EAAE,EAfa;;EAgB7BC,MAAM,CAACC,OAAD,EAAQ;IACZ,SAASC,WAAT,CACEC,MADF,EACmC;MAEjC,IACEA,MAAM,CAACC,QAAP,CAAgBN,IAAhB,KAAyBO,uBAAeC,OAAxC,IACA,OAAOH,MAAM,CAACC,QAAP,CAAgBG,KAAvB,KAAiC,QAFnC,EAGE;QACA,OAAOC,yBAAyB,CAC9BL,MAAM,CAACC,QADuB,EAE9B,IAAID,MAAM,CAACC,QAAP,CAAgBG,KAAK,EAFK,CAAhC;MAID;;MAED,OAAOE,SAAP;IACD;;IAED,OAAO;MACL,mCAAmCC,IAAnC,EAAiE;QAC/D,IACEA,IAAI,CAACC,QAAL,CAAcb,IAAd,KAAuBO,uBAAeO,gBAAtC,IACA,CAACF,IAAI,CAACC,QAAL,CAAcE,QADf,IAEAC,wBAAwB,CACtBC,0BAA0B,CAACL,IAAI,CAACC,QAAL,CAAcP,QAAf,CADJ,CAH1B,EAME;UACA;QACD;;QAEDH,OAAO,CAACe,MAAR,CAAe;UACbC,GAAG,EAAEf,WAAW,CAACQ,IAAI,CAACC,QAAN,CADH;UAEbO,SAAS,EAAE,eAFE;UAGbR,IAAI,EAAEA,IAAI,CAACC,QAAL,CAAcP;QAHP,CAAf;MAKD;;IAjBI,CAAP;;IAoBA,SAASI,yBAAT,CACEJ,QADF,EAEEe,WAFF,EAEqB;MAEnB,OAAQC,KAAD,IACLA,KAAK,CAACC,gBAAN,CAAuBC,aAAa,CAAClB,QAAD,CAApC,EAAgDe,WAAhD,CADF;IAED;;IAED,SAASG,aAAT,CAAuBlB,QAAvB,EAAoD;MAClD,MAAMmB,UAAU,GAAGtB,OAAO,CAACuB,aAAR,EAAnB;MAEA,OAAO,CACLD,UAAU,CAACE,cAAX,CAA0BrB,QAA1B,EAAqCsB,KAArC,CAA2C,CAA3C,CADK,EAELH,UAAU,CAACI,aAAX,CAAyBvB,QAAzB,EAAoCsB,KAApC,CAA0C,CAA1C,CAFK,CAAP;IAID;EACF;;AArE4B,CAAhB,CAAf;;AAwEA,SAASX,0BAAT,CACEL,IADF,EAC2B;EAEzB,IAAIA,IAAI,CAACZ,IAAL,KAAcO,uBAAeuB,eAAjC,EAAkD;IAChD,OAAOb,0BAA0B,CAACL,IAAI,CAACC,QAAN,CAAjC;EACD;;EAED,OAAOD,IAAP;AACD;;AAED,SAASI,wBAAT,CAAkCV,QAAlC,EAA+D;EAC7D,IAAIA,QAAQ,CAACN,IAAT,KAAkBO,uBAAeC,OAArC,EAA8C;IAC5C,OAAO,KAAP;EACD;;EAED,IAAI,OAAOF,QAAQ,CAACG,KAAhB,KAA0B,QAA9B,EAAwC;IACtC,OAAO,IAAP;EACD;;EAED,OACE,OAAOH,QAAQ,CAACG,KAAhB,KAA0B,QAA1B,IACA,CAACsB,OAAO,CAACC,qBAAR,CAA8B1B,QAAQ,CAACG,KAAvC,CAFH;AAID","names":["exports","util","createRule","name","meta","docs","description","recommended","fixable","messages","dynamicDelete","schema","type","defaultOptions","create","context","createFixer","member","property","utils_1","Literal","value","createPropertyReplacement","undefined","node","argument","MemberExpression","computed","isNecessaryDynamicAccess","diveIntoWrapperExpressions","report","fix","messageId","replacement","fixer","replaceTextRange","getTokenRange","sourceCode","getSourceCode","getTokenBefore","range","getTokenAfter","UnaryExpression","tsutils","isValidPropertyAccess"],"sources":["../../src/rules/no-dynamic-delete.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}