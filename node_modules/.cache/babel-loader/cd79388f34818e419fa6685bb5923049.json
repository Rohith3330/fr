{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.File = exports.Link = exports.Node = exports.SEP = void 0;\n\nvar process_1 = require(\"./process\");\n\nvar buffer_1 = require(\"./internal/buffer\");\n\nvar constants_1 = require(\"./constants\");\n\nvar events_1 = require(\"events\");\n\nvar Stats_1 = require(\"./Stats\");\n\nvar S_IFMT = constants_1.constants.S_IFMT,\n    S_IFDIR = constants_1.constants.S_IFDIR,\n    S_IFREG = constants_1.constants.S_IFREG,\n    S_IFLNK = constants_1.constants.S_IFLNK,\n    O_APPEND = constants_1.constants.O_APPEND;\n\nvar getuid = function () {\n  var _a, _b;\n\n  return (_b = (_a = process_1.default.getuid) === null || _a === void 0 ? void 0 : _a.call(process_1.default)) !== null && _b !== void 0 ? _b : 0;\n};\n\nvar getgid = function () {\n  var _a, _b;\n\n  return (_b = (_a = process_1.default.getgid) === null || _a === void 0 ? void 0 : _a.call(process_1.default)) !== null && _b !== void 0 ? _b : 0;\n};\n\nexports.SEP = '/';\n/**\n * Node in a file system (like i-node, v-node).\n */\n\nvar Node =\n/** @class */\nfunction (_super) {\n  __extends(Node, _super);\n\n  function Node(ino, perm) {\n    if (perm === void 0) {\n      perm = 438;\n    }\n\n    var _this = _super.call(this) || this; // User ID and group ID.\n\n\n    _this.uid = getuid();\n    _this.gid = getgid();\n    _this.atime = new Date();\n    _this.mtime = new Date();\n    _this.ctime = new Date();\n    _this.perm = 438; // Permissions `chmod`, `fchmod`\n\n    _this.mode = S_IFREG; // S_IFDIR, S_IFREG, etc.. (file by default?)\n    // Number of hard links pointing at this Node.\n\n    _this.nlink = 1;\n    _this.perm = perm;\n    _this.mode |= perm;\n    _this.ino = ino;\n    return _this;\n  }\n\n  Node.prototype.getString = function (encoding) {\n    if (encoding === void 0) {\n      encoding = 'utf8';\n    }\n\n    return this.getBuffer().toString(encoding);\n  };\n\n  Node.prototype.setString = function (str) {\n    // this.setBuffer(bufferFrom(str, 'utf8'));\n    this.buf = (0, buffer_1.bufferFrom)(str, 'utf8');\n    this.touch();\n  };\n\n  Node.prototype.getBuffer = function () {\n    if (!this.buf) this.setBuffer((0, buffer_1.bufferAllocUnsafe)(0));\n    return (0, buffer_1.bufferFrom)(this.buf); // Return a copy.\n  };\n\n  Node.prototype.setBuffer = function (buf) {\n    this.buf = (0, buffer_1.bufferFrom)(buf); // Creates a copy of data.\n\n    this.touch();\n  };\n\n  Node.prototype.getSize = function () {\n    return this.buf ? this.buf.length : 0;\n  };\n\n  Node.prototype.setModeProperty = function (property) {\n    this.mode = this.mode & ~S_IFMT | property;\n  };\n\n  Node.prototype.setIsFile = function () {\n    this.setModeProperty(S_IFREG);\n  };\n\n  Node.prototype.setIsDirectory = function () {\n    this.setModeProperty(S_IFDIR);\n  };\n\n  Node.prototype.setIsSymlink = function () {\n    this.setModeProperty(S_IFLNK);\n  };\n\n  Node.prototype.isFile = function () {\n    return (this.mode & S_IFMT) === S_IFREG;\n  };\n\n  Node.prototype.isDirectory = function () {\n    return (this.mode & S_IFMT) === S_IFDIR;\n  };\n\n  Node.prototype.isSymlink = function () {\n    // return !!this.symlink;\n    return (this.mode & S_IFMT) === S_IFLNK;\n  };\n\n  Node.prototype.makeSymlink = function (steps) {\n    this.symlink = steps;\n    this.setIsSymlink();\n  };\n\n  Node.prototype.write = function (buf, off, len, pos) {\n    if (off === void 0) {\n      off = 0;\n    }\n\n    if (len === void 0) {\n      len = buf.length;\n    }\n\n    if (pos === void 0) {\n      pos = 0;\n    }\n\n    if (!this.buf) this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n\n    if (pos + len > this.buf.length) {\n      var newBuf = (0, buffer_1.bufferAllocUnsafe)(pos + len);\n      this.buf.copy(newBuf, 0, 0, this.buf.length);\n      this.buf = newBuf;\n    }\n\n    buf.copy(this.buf, pos, off, off + len);\n    this.touch();\n    return len;\n  }; // Returns the number of bytes read.\n\n\n  Node.prototype.read = function (buf, off, len, pos) {\n    if (off === void 0) {\n      off = 0;\n    }\n\n    if (len === void 0) {\n      len = buf.byteLength;\n    }\n\n    if (pos === void 0) {\n      pos = 0;\n    }\n\n    if (!this.buf) this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n    var actualLen = len;\n\n    if (actualLen > buf.byteLength) {\n      actualLen = buf.byteLength;\n    }\n\n    if (actualLen + pos > this.buf.length) {\n      actualLen = this.buf.length - pos;\n    }\n\n    this.buf.copy(buf, off, pos, pos + actualLen);\n    return actualLen;\n  };\n\n  Node.prototype.truncate = function (len) {\n    if (len === void 0) {\n      len = 0;\n    }\n\n    if (!len) this.buf = (0, buffer_1.bufferAllocUnsafe)(0);else {\n      if (!this.buf) this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n\n      if (len <= this.buf.length) {\n        this.buf = this.buf.slice(0, len);\n      } else {\n        var buf = (0, buffer_1.bufferAllocUnsafe)(0);\n        this.buf.copy(buf);\n        buf.fill(0, len);\n      }\n    }\n    this.touch();\n  };\n\n  Node.prototype.chmod = function (perm) {\n    this.perm = perm;\n    this.mode = this.mode & ~511 | perm;\n    this.touch();\n  };\n\n  Node.prototype.chown = function (uid, gid) {\n    this.uid = uid;\n    this.gid = gid;\n    this.touch();\n  };\n\n  Node.prototype.touch = function () {\n    this.mtime = new Date();\n    this.emit('change', this);\n  };\n\n  Node.prototype.canRead = function (uid, gid) {\n    if (uid === void 0) {\n      uid = getuid();\n    }\n\n    if (gid === void 0) {\n      gid = getgid();\n    }\n\n    if (this.perm & 4\n    /* S.IROTH */\n    ) {\n      return true;\n    }\n\n    if (gid === this.gid) {\n      if (this.perm & 32\n      /* S.IRGRP */\n      ) {\n        return true;\n      }\n    }\n\n    if (uid === this.uid) {\n      if (this.perm & 256\n      /* S.IRUSR */\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Node.prototype.canWrite = function (uid, gid) {\n    if (uid === void 0) {\n      uid = getuid();\n    }\n\n    if (gid === void 0) {\n      gid = getgid();\n    }\n\n    if (this.perm & 2\n    /* S.IWOTH */\n    ) {\n      return true;\n    }\n\n    if (gid === this.gid) {\n      if (this.perm & 16\n      /* S.IWGRP */\n      ) {\n        return true;\n      }\n    }\n\n    if (uid === this.uid) {\n      if (this.perm & 128\n      /* S.IWUSR */\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Node.prototype.del = function () {\n    this.emit('delete', this);\n  };\n\n  Node.prototype.toJSON = function () {\n    return {\n      ino: this.ino,\n      uid: this.uid,\n      gid: this.gid,\n      atime: this.atime.getTime(),\n      mtime: this.mtime.getTime(),\n      ctime: this.ctime.getTime(),\n      perm: this.perm,\n      mode: this.mode,\n      nlink: this.nlink,\n      symlink: this.symlink,\n      data: this.getString()\n    };\n  };\n\n  return Node;\n}(events_1.EventEmitter);\n\nexports.Node = Node;\n/**\n * Represents a hard link that points to an i-node `node`.\n */\n\nvar Link =\n/** @class */\nfunction (_super) {\n  __extends(Link, _super);\n\n  function Link(vol, parent, name) {\n    var _this = _super.call(this) || this;\n\n    _this.children = {}; // Path to this node as Array: ['usr', 'bin', 'node'].\n\n    _this._steps = []; // \"i-node\" number of the node.\n\n    _this.ino = 0; // Number of children.\n\n    _this.length = 0;\n    _this.vol = vol;\n    _this.parent = parent;\n    _this.name = name;\n\n    _this.syncSteps();\n\n    return _this;\n  }\n\n  Object.defineProperty(Link.prototype, \"steps\", {\n    get: function () {\n      return this._steps;\n    },\n    // Recursively sync children steps, e.g. in case of dir rename\n    set: function (val) {\n      this._steps = val;\n\n      for (var _i = 0, _a = Object.values(this.children); _i < _a.length; _i++) {\n        var child = _a[_i];\n        child === null || child === void 0 ? void 0 : child.syncSteps();\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Link.prototype.setNode = function (node) {\n    this.node = node;\n    this.ino = node.ino;\n  };\n\n  Link.prototype.getNode = function () {\n    return this.node;\n  };\n\n  Link.prototype.createChild = function (name, node) {\n    if (node === void 0) {\n      node = this.vol.createNode();\n    }\n\n    var link = new Link(this.vol, this, name);\n    link.setNode(node);\n\n    if (node.isDirectory()) {// link.setChild('.', link);\n      // link.getNode().nlink++;\n      // link.setChild('..', this);\n      // this.getNode().nlink++;\n    }\n\n    this.setChild(name, link);\n    return link;\n  };\n\n  Link.prototype.setChild = function (name, link) {\n    if (link === void 0) {\n      link = new Link(this.vol, this, name);\n    }\n\n    this.children[name] = link;\n    link.parent = this;\n    this.length++;\n    this.emit('child:add', link, this);\n    return link;\n  };\n\n  Link.prototype.deleteChild = function (link) {\n    delete this.children[link.getName()];\n    this.length--;\n    this.emit('child:delete', link, this);\n  };\n\n  Link.prototype.getChild = function (name) {\n    if (Object.hasOwnProperty.call(this.children, name)) {\n      return this.children[name];\n    }\n  };\n\n  Link.prototype.getPath = function () {\n    return this.steps.join(exports.SEP);\n  };\n\n  Link.prototype.getName = function () {\n    return this.steps[this.steps.length - 1];\n  }; // del() {\n  //     const parent = this.parent;\n  //     if(parent) {\n  //         parent.deleteChild(link);\n  //     }\n  //     this.parent = null;\n  //     this.vol = null;\n  // }\n\n  /**\n   * Walk the tree path and return the `Link` at that location, if any.\n   * @param steps {string[]} Desired location.\n   * @param stop {number} Max steps to go into.\n   * @param i {number} Current step in the `steps` array.\n   *\n   * @return {Link|null}\n   */\n\n\n  Link.prototype.walk = function (steps, stop, i) {\n    if (stop === void 0) {\n      stop = steps.length;\n    }\n\n    if (i === void 0) {\n      i = 0;\n    }\n\n    if (i >= steps.length) return this;\n    if (i >= stop) return this;\n    var step = steps[i];\n    var link = this.getChild(step);\n    if (!link) return null;\n    return link.walk(steps, stop, i + 1);\n  };\n\n  Link.prototype.toJSON = function () {\n    return {\n      steps: this.steps,\n      ino: this.ino,\n      children: Object.keys(this.children)\n    };\n  };\n\n  Link.prototype.syncSteps = function () {\n    this.steps = this.parent ? this.parent.steps.concat([this.name]) : [this.name];\n  };\n\n  return Link;\n}(events_1.EventEmitter);\n\nexports.Link = Link;\n/**\n * Represents an open file (file descriptor) that points to a `Link` (Hard-link) and a `Node`.\n */\n\nvar File =\n/** @class */\nfunction () {\n  /**\n   * Open a Link-Node pair. `node` is provided separately as that might be a different node\n   * rather the one `link` points to, because it might be a symlink.\n   * @param link\n   * @param node\n   * @param flags\n   * @param fd\n   */\n  function File(link, node, flags, fd) {\n    /**\n     * A cursor/offset position in a file, where data will be written on write.\n     * User can \"seek\" this position.\n     */\n    this.position = 0;\n    this.link = link;\n    this.node = node;\n    this.flags = flags;\n    this.fd = fd;\n  }\n\n  File.prototype.getString = function (encoding) {\n    if (encoding === void 0) {\n      encoding = 'utf8';\n    }\n\n    return this.node.getString();\n  };\n\n  File.prototype.setString = function (str) {\n    this.node.setString(str);\n  };\n\n  File.prototype.getBuffer = function () {\n    return this.node.getBuffer();\n  };\n\n  File.prototype.setBuffer = function (buf) {\n    this.node.setBuffer(buf);\n  };\n\n  File.prototype.getSize = function () {\n    return this.node.getSize();\n  };\n\n  File.prototype.truncate = function (len) {\n    this.node.truncate(len);\n  };\n\n  File.prototype.seekTo = function (position) {\n    this.position = position;\n  };\n\n  File.prototype.stats = function () {\n    return Stats_1.default.build(this.node);\n  };\n\n  File.prototype.write = function (buf, offset, length, position) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n\n    if (length === void 0) {\n      length = buf.length;\n    }\n\n    if (typeof position !== 'number') position = this.position;\n    if (this.flags & O_APPEND) position = this.getSize();\n    var bytes = this.node.write(buf, offset, length, position);\n    this.position = position + bytes;\n    return bytes;\n  };\n\n  File.prototype.read = function (buf, offset, length, position) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n\n    if (length === void 0) {\n      length = buf.byteLength;\n    }\n\n    if (typeof position !== 'number') position = this.position;\n    var bytes = this.node.read(buf, offset, length, position);\n    this.position = position + bytes;\n    return bytes;\n  };\n\n  File.prototype.chmod = function (perm) {\n    this.node.chmod(perm);\n  };\n\n  File.prototype.chown = function (uid, gid) {\n    this.node.chown(uid, gid);\n  };\n\n  return File;\n}();\n\nexports.File = File;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","File","Link","Node","SEP","process_1","require","buffer_1","constants_1","events_1","Stats_1","S_IFMT","constants","S_IFDIR","S_IFREG","S_IFLNK","O_APPEND","getuid","_a","_b","default","getgid","_super","ino","perm","_this","uid","gid","atime","Date","mtime","ctime","mode","nlink","getString","encoding","getBuffer","toString","setString","str","buf","bufferFrom","touch","setBuffer","bufferAllocUnsafe","getSize","length","setModeProperty","property","setIsFile","setIsDirectory","setIsSymlink","isFile","isDirectory","isSymlink","makeSymlink","steps","symlink","write","off","len","pos","newBuf","copy","read","byteLength","actualLen","truncate","slice","fill","chmod","chown","emit","canRead","canWrite","del","toJSON","getTime","data","EventEmitter","vol","parent","name","children","_steps","syncSteps","get","set","val","_i","values","child","enumerable","configurable","setNode","node","getNode","createChild","createNode","link","setChild","deleteChild","getName","getChild","getPath","join","walk","stop","i","step","keys","concat","flags","fd","position","seekTo","stats","build","offset","bytes"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/memfs/lib/node.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.File = exports.Link = exports.Node = exports.SEP = void 0;\nvar process_1 = require(\"./process\");\nvar buffer_1 = require(\"./internal/buffer\");\nvar constants_1 = require(\"./constants\");\nvar events_1 = require(\"events\");\nvar Stats_1 = require(\"./Stats\");\nvar S_IFMT = constants_1.constants.S_IFMT, S_IFDIR = constants_1.constants.S_IFDIR, S_IFREG = constants_1.constants.S_IFREG, S_IFLNK = constants_1.constants.S_IFLNK, O_APPEND = constants_1.constants.O_APPEND;\nvar getuid = function () { var _a, _b; return (_b = (_a = process_1.default.getuid) === null || _a === void 0 ? void 0 : _a.call(process_1.default)) !== null && _b !== void 0 ? _b : 0; };\nvar getgid = function () { var _a, _b; return (_b = (_a = process_1.default.getgid) === null || _a === void 0 ? void 0 : _a.call(process_1.default)) !== null && _b !== void 0 ? _b : 0; };\nexports.SEP = '/';\n/**\n * Node in a file system (like i-node, v-node).\n */\nvar Node = /** @class */ (function (_super) {\n    __extends(Node, _super);\n    function Node(ino, perm) {\n        if (perm === void 0) { perm = 438; }\n        var _this = _super.call(this) || this;\n        // User ID and group ID.\n        _this.uid = getuid();\n        _this.gid = getgid();\n        _this.atime = new Date();\n        _this.mtime = new Date();\n        _this.ctime = new Date();\n        _this.perm = 438; // Permissions `chmod`, `fchmod`\n        _this.mode = S_IFREG; // S_IFDIR, S_IFREG, etc.. (file by default?)\n        // Number of hard links pointing at this Node.\n        _this.nlink = 1;\n        _this.perm = perm;\n        _this.mode |= perm;\n        _this.ino = ino;\n        return _this;\n    }\n    Node.prototype.getString = function (encoding) {\n        if (encoding === void 0) { encoding = 'utf8'; }\n        return this.getBuffer().toString(encoding);\n    };\n    Node.prototype.setString = function (str) {\n        // this.setBuffer(bufferFrom(str, 'utf8'));\n        this.buf = (0, buffer_1.bufferFrom)(str, 'utf8');\n        this.touch();\n    };\n    Node.prototype.getBuffer = function () {\n        if (!this.buf)\n            this.setBuffer((0, buffer_1.bufferAllocUnsafe)(0));\n        return (0, buffer_1.bufferFrom)(this.buf); // Return a copy.\n    };\n    Node.prototype.setBuffer = function (buf) {\n        this.buf = (0, buffer_1.bufferFrom)(buf); // Creates a copy of data.\n        this.touch();\n    };\n    Node.prototype.getSize = function () {\n        return this.buf ? this.buf.length : 0;\n    };\n    Node.prototype.setModeProperty = function (property) {\n        this.mode = (this.mode & ~S_IFMT) | property;\n    };\n    Node.prototype.setIsFile = function () {\n        this.setModeProperty(S_IFREG);\n    };\n    Node.prototype.setIsDirectory = function () {\n        this.setModeProperty(S_IFDIR);\n    };\n    Node.prototype.setIsSymlink = function () {\n        this.setModeProperty(S_IFLNK);\n    };\n    Node.prototype.isFile = function () {\n        return (this.mode & S_IFMT) === S_IFREG;\n    };\n    Node.prototype.isDirectory = function () {\n        return (this.mode & S_IFMT) === S_IFDIR;\n    };\n    Node.prototype.isSymlink = function () {\n        // return !!this.symlink;\n        return (this.mode & S_IFMT) === S_IFLNK;\n    };\n    Node.prototype.makeSymlink = function (steps) {\n        this.symlink = steps;\n        this.setIsSymlink();\n    };\n    Node.prototype.write = function (buf, off, len, pos) {\n        if (off === void 0) { off = 0; }\n        if (len === void 0) { len = buf.length; }\n        if (pos === void 0) { pos = 0; }\n        if (!this.buf)\n            this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n        if (pos + len > this.buf.length) {\n            var newBuf = (0, buffer_1.bufferAllocUnsafe)(pos + len);\n            this.buf.copy(newBuf, 0, 0, this.buf.length);\n            this.buf = newBuf;\n        }\n        buf.copy(this.buf, pos, off, off + len);\n        this.touch();\n        return len;\n    };\n    // Returns the number of bytes read.\n    Node.prototype.read = function (buf, off, len, pos) {\n        if (off === void 0) { off = 0; }\n        if (len === void 0) { len = buf.byteLength; }\n        if (pos === void 0) { pos = 0; }\n        if (!this.buf)\n            this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n        var actualLen = len;\n        if (actualLen > buf.byteLength) {\n            actualLen = buf.byteLength;\n        }\n        if (actualLen + pos > this.buf.length) {\n            actualLen = this.buf.length - pos;\n        }\n        this.buf.copy(buf, off, pos, pos + actualLen);\n        return actualLen;\n    };\n    Node.prototype.truncate = function (len) {\n        if (len === void 0) { len = 0; }\n        if (!len)\n            this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n        else {\n            if (!this.buf)\n                this.buf = (0, buffer_1.bufferAllocUnsafe)(0);\n            if (len <= this.buf.length) {\n                this.buf = this.buf.slice(0, len);\n            }\n            else {\n                var buf = (0, buffer_1.bufferAllocUnsafe)(0);\n                this.buf.copy(buf);\n                buf.fill(0, len);\n            }\n        }\n        this.touch();\n    };\n    Node.prototype.chmod = function (perm) {\n        this.perm = perm;\n        this.mode = (this.mode & ~511) | perm;\n        this.touch();\n    };\n    Node.prototype.chown = function (uid, gid) {\n        this.uid = uid;\n        this.gid = gid;\n        this.touch();\n    };\n    Node.prototype.touch = function () {\n        this.mtime = new Date();\n        this.emit('change', this);\n    };\n    Node.prototype.canRead = function (uid, gid) {\n        if (uid === void 0) { uid = getuid(); }\n        if (gid === void 0) { gid = getgid(); }\n        if (this.perm & 4 /* S.IROTH */) {\n            return true;\n        }\n        if (gid === this.gid) {\n            if (this.perm & 32 /* S.IRGRP */) {\n                return true;\n            }\n        }\n        if (uid === this.uid) {\n            if (this.perm & 256 /* S.IRUSR */) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Node.prototype.canWrite = function (uid, gid) {\n        if (uid === void 0) { uid = getuid(); }\n        if (gid === void 0) { gid = getgid(); }\n        if (this.perm & 2 /* S.IWOTH */) {\n            return true;\n        }\n        if (gid === this.gid) {\n            if (this.perm & 16 /* S.IWGRP */) {\n                return true;\n            }\n        }\n        if (uid === this.uid) {\n            if (this.perm & 128 /* S.IWUSR */) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Node.prototype.del = function () {\n        this.emit('delete', this);\n    };\n    Node.prototype.toJSON = function () {\n        return {\n            ino: this.ino,\n            uid: this.uid,\n            gid: this.gid,\n            atime: this.atime.getTime(),\n            mtime: this.mtime.getTime(),\n            ctime: this.ctime.getTime(),\n            perm: this.perm,\n            mode: this.mode,\n            nlink: this.nlink,\n            symlink: this.symlink,\n            data: this.getString(),\n        };\n    };\n    return Node;\n}(events_1.EventEmitter));\nexports.Node = Node;\n/**\n * Represents a hard link that points to an i-node `node`.\n */\nvar Link = /** @class */ (function (_super) {\n    __extends(Link, _super);\n    function Link(vol, parent, name) {\n        var _this = _super.call(this) || this;\n        _this.children = {};\n        // Path to this node as Array: ['usr', 'bin', 'node'].\n        _this._steps = [];\n        // \"i-node\" number of the node.\n        _this.ino = 0;\n        // Number of children.\n        _this.length = 0;\n        _this.vol = vol;\n        _this.parent = parent;\n        _this.name = name;\n        _this.syncSteps();\n        return _this;\n    }\n    Object.defineProperty(Link.prototype, \"steps\", {\n        get: function () {\n            return this._steps;\n        },\n        // Recursively sync children steps, e.g. in case of dir rename\n        set: function (val) {\n            this._steps = val;\n            for (var _i = 0, _a = Object.values(this.children); _i < _a.length; _i++) {\n                var child = _a[_i];\n                child === null || child === void 0 ? void 0 : child.syncSteps();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Link.prototype.setNode = function (node) {\n        this.node = node;\n        this.ino = node.ino;\n    };\n    Link.prototype.getNode = function () {\n        return this.node;\n    };\n    Link.prototype.createChild = function (name, node) {\n        if (node === void 0) { node = this.vol.createNode(); }\n        var link = new Link(this.vol, this, name);\n        link.setNode(node);\n        if (node.isDirectory()) {\n            // link.setChild('.', link);\n            // link.getNode().nlink++;\n            // link.setChild('..', this);\n            // this.getNode().nlink++;\n        }\n        this.setChild(name, link);\n        return link;\n    };\n    Link.prototype.setChild = function (name, link) {\n        if (link === void 0) { link = new Link(this.vol, this, name); }\n        this.children[name] = link;\n        link.parent = this;\n        this.length++;\n        this.emit('child:add', link, this);\n        return link;\n    };\n    Link.prototype.deleteChild = function (link) {\n        delete this.children[link.getName()];\n        this.length--;\n        this.emit('child:delete', link, this);\n    };\n    Link.prototype.getChild = function (name) {\n        if (Object.hasOwnProperty.call(this.children, name)) {\n            return this.children[name];\n        }\n    };\n    Link.prototype.getPath = function () {\n        return this.steps.join(exports.SEP);\n    };\n    Link.prototype.getName = function () {\n        return this.steps[this.steps.length - 1];\n    };\n    // del() {\n    //     const parent = this.parent;\n    //     if(parent) {\n    //         parent.deleteChild(link);\n    //     }\n    //     this.parent = null;\n    //     this.vol = null;\n    // }\n    /**\n     * Walk the tree path and return the `Link` at that location, if any.\n     * @param steps {string[]} Desired location.\n     * @param stop {number} Max steps to go into.\n     * @param i {number} Current step in the `steps` array.\n     *\n     * @return {Link|null}\n     */\n    Link.prototype.walk = function (steps, stop, i) {\n        if (stop === void 0) { stop = steps.length; }\n        if (i === void 0) { i = 0; }\n        if (i >= steps.length)\n            return this;\n        if (i >= stop)\n            return this;\n        var step = steps[i];\n        var link = this.getChild(step);\n        if (!link)\n            return null;\n        return link.walk(steps, stop, i + 1);\n    };\n    Link.prototype.toJSON = function () {\n        return {\n            steps: this.steps,\n            ino: this.ino,\n            children: Object.keys(this.children),\n        };\n    };\n    Link.prototype.syncSteps = function () {\n        this.steps = this.parent ? this.parent.steps.concat([this.name]) : [this.name];\n    };\n    return Link;\n}(events_1.EventEmitter));\nexports.Link = Link;\n/**\n * Represents an open file (file descriptor) that points to a `Link` (Hard-link) and a `Node`.\n */\nvar File = /** @class */ (function () {\n    /**\n     * Open a Link-Node pair. `node` is provided separately as that might be a different node\n     * rather the one `link` points to, because it might be a symlink.\n     * @param link\n     * @param node\n     * @param flags\n     * @param fd\n     */\n    function File(link, node, flags, fd) {\n        /**\n         * A cursor/offset position in a file, where data will be written on write.\n         * User can \"seek\" this position.\n         */\n        this.position = 0;\n        this.link = link;\n        this.node = node;\n        this.flags = flags;\n        this.fd = fd;\n    }\n    File.prototype.getString = function (encoding) {\n        if (encoding === void 0) { encoding = 'utf8'; }\n        return this.node.getString();\n    };\n    File.prototype.setString = function (str) {\n        this.node.setString(str);\n    };\n    File.prototype.getBuffer = function () {\n        return this.node.getBuffer();\n    };\n    File.prototype.setBuffer = function (buf) {\n        this.node.setBuffer(buf);\n    };\n    File.prototype.getSize = function () {\n        return this.node.getSize();\n    };\n    File.prototype.truncate = function (len) {\n        this.node.truncate(len);\n    };\n    File.prototype.seekTo = function (position) {\n        this.position = position;\n    };\n    File.prototype.stats = function () {\n        return Stats_1.default.build(this.node);\n    };\n    File.prototype.write = function (buf, offset, length, position) {\n        if (offset === void 0) { offset = 0; }\n        if (length === void 0) { length = buf.length; }\n        if (typeof position !== 'number')\n            position = this.position;\n        if (this.flags & O_APPEND)\n            position = this.getSize();\n        var bytes = this.node.write(buf, offset, length, position);\n        this.position = position + bytes;\n        return bytes;\n    };\n    File.prototype.read = function (buf, offset, length, position) {\n        if (offset === void 0) { offset = 0; }\n        if (length === void 0) { length = buf.byteLength; }\n        if (typeof position !== 'number')\n            position = this.position;\n        var bytes = this.node.read(buf, offset, length, position);\n        this.position = position + bytes;\n        return bytes;\n    };\n    File.prototype.chmod = function (perm) {\n        this.node.chmod(perm);\n    };\n    File.prototype.chown = function (uid, gid) {\n        this.node.chown(uid, gid);\n    };\n    return File;\n}());\nexports.File = File;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}