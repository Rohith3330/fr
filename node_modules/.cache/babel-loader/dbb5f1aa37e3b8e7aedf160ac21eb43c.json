{"ast":null,"code":"var _regeneratorRuntime = require(\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar Img = require(\"../models/imodel\");\n\nvar asyncHandler = require('express-async-handler');\n\nvar retriveIMG = asyncHandler( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var name, img, newUserData, newUser, createStudent;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            name = req.body.name;\n            req.body.img = req.file.path;\n            img = req.body.img;\n            console.log(req.body); // const photo = req.file.filename  \n\n            newUserData = {\n              name: name,\n              img: img\n            };\n            newUser = new Img(newUserData);\n            _context.next = 9;\n            return newUser.save();\n\n          case 9:\n            createStudent = _context.sent;\n            res.status(201).send(createStudent); // newUser.save()\n            //        .then(() => res.json(newUser))\n            //        .catch(err => res.status(400).json('Error: ' + err));\n            // }\n            // res.send(students);\n\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            res.status(400).send({\n              error: _context.t0\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 13]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nvar getIMG = asyncHandler( /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var name, User;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"Here1\");\n            console.log(req.body);\n            name = req.body.name;\n            _context2.next = 5;\n            return Img.findOne({\n              name: name\n            });\n\n          case 5:\n            User = _context2.sent;\n\n            if (!User) {\n              _context2.next = 10;\n              break;\n            }\n\n            res.json({\n              _id: User._id,\n              name: User.name,\n              img: User.img\n            });\n            _context2.next = 12;\n            break;\n\n          case 10:\n            res.status(401);\n            throw new Error(\"Invalid email or password!\");\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nmodule.exports = {\n  retriveIMG: retriveIMG,\n  getIMG: getIMG\n};","map":{"version":3,"names":["Img","require","asyncHandler","retriveIMG","req","res","name","body","img","file","path","console","log","newUserData","newUser","save","createStudent","status","send","error","getIMG","findOne","User","json","_id","Error","module","exports"],"sources":["C:/Users/Rohith/mern/backend/controllers/imgcontroller.js"],"sourcesContent":["const Img = require(\"../models/imodel\")\r\nconst asyncHandler=require('express-async-handler');\r\n\r\nconst retriveIMG=asyncHandler(async(req,res)=>{\r\n    try {\r\n        const name = req.body.name;\r\n        req.body.img = req.file.path;\r\n        const img = req.body.img;\r\n        console.log(req.body);\r\n        // const photo = req.file.filename  \r\n        const newUserData = {\r\n            name,\r\n            img,\r\n        }\r\n    \r\n        const newUser = new Img(newUserData);\r\n        const createStudent = await newUser.save();\r\n        res.status(201).send(createStudent);\r\n        // newUser.save()\r\n        //        .then(() => res.json(newUser))\r\n        //        .catch(err => res.status(400).json('Error: ' + err));\r\n        // }\r\n        // res.send(students);\r\n    }\r\n      catch(err) {\r\n        res.status(400).send({ error: err });\r\n      }\r\n}\r\n)\r\nconst getIMG=asyncHandler(async(req,res)=>{\r\n    console.log(\"Here1\");\r\n    console.log(req.body);\r\n    const {name}=req.body;\r\n\r\n    const User=await Img.findOne({name});\r\n    \r\n    if(User){\r\n        res.json({\r\n            _id:User._id,\r\n            name:User.name,\r\n            img:User.img,\r\n        });\r\n    }\r\n    else{\r\n        res.status(401);\r\n        throw new Error(\"Invalid email or password!\");\r\n    }\r\n});\r\n\r\nmodule.exports={retriveIMG,getIMG}"],"mappings":";;;;AAAA,IAAMA,GAAG,GAAGC,OAAO,CAAC,kBAAD,CAAnB;;AACA,IAAMC,YAAY,GAACD,OAAO,CAAC,uBAAD,CAA1B;;AAEA,IAAME,UAAU,GAACD,YAAY;EAAA,sEAAC,iBAAME,GAAN,EAAUC,GAAV;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAEhBC,IAFgB,GAETF,GAAG,CAACG,IAAJ,CAASD,IAFA;YAGtBF,GAAG,CAACG,IAAJ,CAASC,GAAT,GAAeJ,GAAG,CAACK,IAAJ,CAASC,IAAxB;YACMF,GAJgB,GAIVJ,GAAG,CAACG,IAAJ,CAASC,GAJC;YAKtBG,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACG,IAAhB,EALsB,CAMtB;;YACMM,WAPgB,GAOF;cAChBP,IAAI,EAAJA,IADgB;cAEhBE,GAAG,EAAHA;YAFgB,CAPE;YAYhBM,OAZgB,GAYN,IAAId,GAAJ,CAAQa,WAAR,CAZM;YAAA;YAAA,OAaMC,OAAO,CAACC,IAAR,EAbN;;UAAA;YAahBC,aAbgB;YActBX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,aAArB,EAdsB,CAetB;YACA;YACA;YACA;YACA;;YAnBsB;YAAA;;UAAA;YAAA;YAAA;YAsBtBX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cAAEC,KAAK;YAAP,CAArB;;UAtBsB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAD;;EAAA;IAAA;EAAA;AAAA,IAA7B;AA0BA,IAAMC,MAAM,GAAClB,YAAY;EAAA,uEAAC,kBAAME,GAAN,EAAUC,GAAV;IAAA;IAAA;MAAA;QAAA;UAAA;YACtBM,OAAO,CAACC,GAAR,CAAY,OAAZ;YACAD,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACG,IAAhB;YACOD,IAHe,GAGTF,GAAG,CAACG,IAHK,CAGfD,IAHe;YAAA;YAAA,OAKLN,GAAG,CAACqB,OAAJ,CAAY;cAACf,IAAI,EAAJA;YAAD,CAAZ,CALK;;UAAA;YAKhBgB,IALgB;;YAAA,KAOnBA,IAPmB;cAAA;cAAA;YAAA;;YAQlBjB,GAAG,CAACkB,IAAJ,CAAS;cACLC,GAAG,EAACF,IAAI,CAACE,GADJ;cAELlB,IAAI,EAACgB,IAAI,CAAChB,IAFL;cAGLE,GAAG,EAACc,IAAI,CAACd;YAHJ,CAAT;YARkB;YAAA;;UAAA;YAelBH,GAAG,CAACY,MAAJ,CAAW,GAAX;YAfkB,MAgBZ,IAAIQ,KAAJ,CAAU,4BAAV,CAhBY;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAD;;EAAA;IAAA;EAAA;AAAA,IAAzB;AAoBAC,MAAM,CAACC,OAAP,GAAe;EAACxB,UAAU,EAAVA,UAAD;EAAYiB,MAAM,EAANA;AAAZ,CAAf"},"metadata":{},"sourceType":"script"}