{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.analyze = void 0;\n\nconst visitor_keys_1 = require(\"@typescript-eslint/visitor-keys\");\n\nconst lib_1 = require(\"./lib\");\n\nconst referencer_1 = require(\"./referencer\");\n\nconst ScopeManager_1 = require(\"./ScopeManager\");\n\nconst DEFAULT_OPTIONS = {\n  childVisitorKeys: visitor_keys_1.visitorKeys,\n  ecmaVersion: 2018,\n  globalReturn: false,\n  impliedStrict: false,\n  jsxPragma: 'React',\n  jsxFragmentName: null,\n  lib: ['es2018'],\n  sourceType: 'script',\n  emitDecoratorMetadata: false\n};\n/**\n * Convert ecmaVersion to lib.\n * `'latest'` is converted to 1e8 at parser.\n */\n\nfunction mapEcmaVersion(version) {\n  if (version == null || version === 3 || version === 5) {\n    return 'es5';\n  }\n\n  const year = version > 2000 ? version : 2015 + (version - 6);\n  const lib = `es${year}`;\n  return lib in lib_1.lib ? lib : year > 2020 ? 'esnext' : 'es5';\n}\n/**\n * Takes an AST and returns the analyzed scopes.\n */\n\n\nfunction analyze(tree, providedOptions) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n\n  const ecmaVersion = (_a = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.ecmaVersion) !== null && _a !== void 0 ? _a : DEFAULT_OPTIONS.ecmaVersion;\n  const options = {\n    childVisitorKeys: (_b = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.childVisitorKeys) !== null && _b !== void 0 ? _b : DEFAULT_OPTIONS.childVisitorKeys,\n    ecmaVersion,\n    globalReturn: (_c = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.globalReturn) !== null && _c !== void 0 ? _c : DEFAULT_OPTIONS.globalReturn,\n    impliedStrict: (_d = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.impliedStrict) !== null && _d !== void 0 ? _d : DEFAULT_OPTIONS.impliedStrict,\n    jsxPragma: (providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.jsxPragma) === undefined ? DEFAULT_OPTIONS.jsxPragma : providedOptions.jsxPragma,\n    jsxFragmentName: (_e = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.jsxFragmentName) !== null && _e !== void 0 ? _e : DEFAULT_OPTIONS.jsxFragmentName,\n    sourceType: (_f = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.sourceType) !== null && _f !== void 0 ? _f : DEFAULT_OPTIONS.sourceType,\n    lib: (_g = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.lib) !== null && _g !== void 0 ? _g : [mapEcmaVersion(ecmaVersion)],\n    emitDecoratorMetadata: (_h = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.emitDecoratorMetadata) !== null && _h !== void 0 ? _h : DEFAULT_OPTIONS.emitDecoratorMetadata\n  }; // ensure the option is lower cased\n\n  options.lib = options.lib.map(l => l.toLowerCase());\n  const scopeManager = new ScopeManager_1.ScopeManager(options);\n  const referencer = new referencer_1.Referencer(options, scopeManager);\n  referencer.visit(tree);\n  return scopeManager;\n}\n\nexports.analyze = analyze;","map":{"version":3,"mappings":"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","names":["DEFAULT_OPTIONS","childVisitorKeys","visitor_keys_1","ecmaVersion","globalReturn","impliedStrict","jsxPragma","jsxFragmentName","lib","sourceType","emitDecoratorMetadata","mapEcmaVersion","version","year","lib_1","analyze","tree","providedOptions","_a","options","_b","_c","_d","undefined","_e","_f","_g","_h","map","l","toLowerCase","scopeManager","ScopeManager_1","referencer","referencer_1","visit","exports"],"sources":["../src/analyze.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}