{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeStaticFileCache = makeStaticFileCache;\n\nvar _caching = require(\"../caching\");\n\nvar fs = require(\"../../gensync-utils/fs\");\n\nfunction _fs2() {\n  var data = require(\"fs\");\n\n  _fs2 = function _fs2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction makeStaticFileCache(fn) {\n  return (0, _caching.makeStrongCache)( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(filepath, cache) {\n    var cached;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cached = cache.invalidate(function () {\n              return fileMtime(filepath);\n            });\n\n            if (!(cached === null)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 3:\n            _context.t0 = fn;\n            _context.t1 = filepath;\n            return _context.delegateYield(fs.readFile(filepath, \"utf8\"), \"t2\", 6);\n\n          case 6:\n            _context.t3 = _context.t2;\n            return _context.abrupt(\"return\", (0, _context.t0)(_context.t1, _context.t3));\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction fileMtime(filepath) {\n  if (!_fs2().existsSync(filepath)) return null;\n\n  try {\n    return +_fs2().statSync(filepath).mtime;\n  } catch (e) {\n    if (e.code !== \"ENOENT\" && e.code !== \"ENOTDIR\") throw e;\n  }\n\n  return null;\n}\n\n0 && 0;","map":{"version":3,"mappings":";;;;;;;;;AAEA;;AAEA;;AACA;EAAA;;EAAAA;IAAA;EAAA;;EAAA;AAAA;;AAEO,SAASC,mBAAT,CACLC,EADK,EAEL;EACA,OAAO,uEAAgB,iBACrBC,QADqB,EAErBC,KAFqB;IAAA;IAAA;MAAA;QAAA;UAAA;YAIfC,MAJe,GAIND,KAAK,CAACE,UAANF,CAAiB;cAAA,OAAMG,SAAS,CAACJ,QAAD,CAAf;YAAA,CAAjBC,CAJM;;YAAA,MAMjBC,MAAM,KAAK,IANM;cAAA;cAAA;YAAA;;YAAA,iCAOZ,IAPY;;UAAA;YAAA,cAUdH,EAVc;YAAA,cAUXC,QAVW;YAUD,8BAAOK,EAAE,CAACC,QAAHD,CAAYL,QAAZK,EAAsB,MAAtBA,CAAP;;UAVC;YAAA;YAAA;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAhB,EAAP;AAYD;;AAED,SAASD,SAAT,CAAmBJ,QAAnB,EAAoD;EAClD,IAAI,CAACO,OAAOC,UAAPD,CAAkBP,QAAlBO,CAAL,EAAkC,OAAO,IAAP;;EAElC,IAAI;IACF,OAAO,CAACA,OAAOE,QAAPF,CAAgBP,QAAhBO,EAA0BG,KAAlC;EADF,EAEE,OAAOC,CAAP,EAAU;IACV,IAAIA,CAAC,CAACC,IAAFD,KAAW,QAAXA,IAAuBA,CAAC,CAACC,IAAFD,KAAW,SAAtC,EAAiD,MAAMA,CAAN;EAClD;;EAED,OAAO,IAAP;AACD","names":["_fs2","makeStaticFileCache","fn","filepath","cache","cached","invalidate","fileMtime","fs","readFile","nodeFs","existsSync","statSync","mtime","e","code"],"sources":["C:\\Users\\Rohith\\mern\\frontend\\node_modules\\@babel\\core\\src\\config\\files\\utils.ts"],"sourcesContent":["import type { Handler } from \"gensync\";\n\nimport { makeStrongCache } from \"../caching\";\nimport type { CacheConfigurator } from \"../caching\";\nimport * as fs from \"../../gensync-utils/fs\";\nimport nodeFs from \"fs\";\n\nexport function makeStaticFileCache<T>(\n  fn: (filepath: string, contents: string) => T,\n) {\n  return makeStrongCache(function* (\n    filepath: string,\n    cache: CacheConfigurator<void>,\n  ): Handler<null | T> {\n    const cached = cache.invalidate(() => fileMtime(filepath));\n\n    if (cached === null) {\n      return null;\n    }\n\n    return fn(filepath, yield* fs.readFile(filepath, \"utf8\"));\n  });\n}\n\nfunction fileMtime(filepath: string): number | null {\n  if (!nodeFs.existsSync(filepath)) return null;\n\n  try {\n    return +nodeFs.statSync(filepath).mtime;\n  } catch (e) {\n    if (e.code !== \"ENOENT\" && e.code !== \"ENOTDIR\") throw e;\n  }\n\n  return null;\n}\n"]},"metadata":{},"sourceType":"script"}