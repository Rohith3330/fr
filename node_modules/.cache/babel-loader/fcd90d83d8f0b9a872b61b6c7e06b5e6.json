{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst rpc_1 = require(\"../../rpc\");\n\nconst ReporterRpcProcedure_1 = require(\"./ReporterRpcProcedure\");\n\nconst flatten_1 = __importDefault(require(\"../../utils/array/flatten\"));\n\nfunction createReporterRpcClient(channel, configuration) {\n  const rpcClient = rpc_1.createRpcClient(channel.clientPort);\n  return {\n    isConnected: () => channel.isOpen() && rpcClient.isConnected(),\n    connect: () => __awaiter(this, void 0, void 0, function* () {\n      if (!channel.isOpen()) {\n        yield channel.open();\n      }\n\n      if (!rpcClient.isConnected()) {\n        try {\n          yield rpcClient.connect();\n          yield rpcClient.dispatchCall(ReporterRpcProcedure_1.configure, configuration);\n        } catch (error) {\n          // connect or configure was not successful -\n          // close the reporter and re-throw an error\n          yield rpcClient.disconnect();\n          yield channel.close();\n          throw error;\n        }\n      }\n    }),\n    disconnect: () => __awaiter(this, void 0, void 0, function* () {\n      if (rpcClient.isConnected()) {\n        yield rpcClient.disconnect();\n      }\n\n      if (channel.isOpen()) {\n        yield channel.close();\n      }\n    }),\n    getReport: change => __awaiter(this, void 0, void 0, function* () {\n      const reportId = yield rpcClient.dispatchCall(ReporterRpcProcedure_1.getReport, change);\n      return {\n        getDependencies() {\n          return rpcClient.dispatchCall(ReporterRpcProcedure_1.getDependencies, reportId);\n        },\n\n        getIssues() {\n          return rpcClient.dispatchCall(ReporterRpcProcedure_1.getIssues, reportId);\n        },\n\n        close() {\n          return rpcClient.dispatchCall(ReporterRpcProcedure_1.closeReport, reportId);\n        }\n\n      };\n    })\n  };\n}\n\nexports.createReporterRpcClient = createReporterRpcClient;\n\nfunction composeReporterRpcClients(clients) {\n  return {\n    isConnected: () => clients.every(client => client.isConnected()),\n    connect: () => Promise.all(clients.map(client => client.connect())).then(() => undefined),\n    disconnect: () => Promise.all(clients.map(client => client.disconnect())).then(() => undefined),\n    getReport: change => Promise.all(clients.map(client => client.getReport(change))).then(reports => ({\n      getDependencies: () => Promise.all(reports.map(report => report.getDependencies())).then(dependencies => dependencies.reduce((mergedDependencies, singleDependencies) => ({\n        files: Array.from(new Set([...mergedDependencies.files, ...singleDependencies.files])),\n        dirs: Array.from(new Set([...mergedDependencies.dirs, ...singleDependencies.dirs])),\n        excluded: Array.from(new Set([...mergedDependencies.excluded, ...singleDependencies.excluded])),\n        extensions: Array.from(new Set([...mergedDependencies.extensions, ...singleDependencies.extensions]))\n      }), {\n        files: [],\n        dirs: [],\n        excluded: [],\n        extensions: []\n      })),\n      getIssues: () => Promise.all(reports.map(report => report.getIssues())).then(issues => flatten_1.default(issues)),\n      close: () => Promise.all(reports.map(report => report.close())).then(() => undefined)\n    }))\n  };\n}\n\nexports.composeReporterRpcClients = composeReporterRpcClients;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","Object","defineProperty","exports","rpc_1","require","ReporterRpcProcedure_1","flatten_1","createReporterRpcClient","channel","configuration","rpcClient","createRpcClient","clientPort","isConnected","isOpen","connect","open","dispatchCall","configure","error","disconnect","close","getReport","change","reportId","getDependencies","getIssues","closeReport","composeReporterRpcClients","clients","every","client","all","map","undefined","reports","report","dependencies","reduce","mergedDependencies","singleDependencies","files","Array","from","Set","dirs","excluded","extensions","issues","default"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/fork-ts-checker-webpack-plugin/lib/reporter/reporter-rpc/ReporterRpcClient.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst rpc_1 = require(\"../../rpc\");\nconst ReporterRpcProcedure_1 = require(\"./ReporterRpcProcedure\");\nconst flatten_1 = __importDefault(require(\"../../utils/array/flatten\"));\nfunction createReporterRpcClient(channel, configuration) {\n    const rpcClient = rpc_1.createRpcClient(channel.clientPort);\n    return {\n        isConnected: () => channel.isOpen() && rpcClient.isConnected(),\n        connect: () => __awaiter(this, void 0, void 0, function* () {\n            if (!channel.isOpen()) {\n                yield channel.open();\n            }\n            if (!rpcClient.isConnected()) {\n                try {\n                    yield rpcClient.connect();\n                    yield rpcClient.dispatchCall(ReporterRpcProcedure_1.configure, configuration);\n                }\n                catch (error) {\n                    // connect or configure was not successful -\n                    // close the reporter and re-throw an error\n                    yield rpcClient.disconnect();\n                    yield channel.close();\n                    throw error;\n                }\n            }\n        }),\n        disconnect: () => __awaiter(this, void 0, void 0, function* () {\n            if (rpcClient.isConnected()) {\n                yield rpcClient.disconnect();\n            }\n            if (channel.isOpen()) {\n                yield channel.close();\n            }\n        }),\n        getReport: (change) => __awaiter(this, void 0, void 0, function* () {\n            const reportId = yield rpcClient.dispatchCall(ReporterRpcProcedure_1.getReport, change);\n            return {\n                getDependencies() {\n                    return rpcClient.dispatchCall(ReporterRpcProcedure_1.getDependencies, reportId);\n                },\n                getIssues() {\n                    return rpcClient.dispatchCall(ReporterRpcProcedure_1.getIssues, reportId);\n                },\n                close() {\n                    return rpcClient.dispatchCall(ReporterRpcProcedure_1.closeReport, reportId);\n                },\n            };\n        }),\n    };\n}\nexports.createReporterRpcClient = createReporterRpcClient;\nfunction composeReporterRpcClients(clients) {\n    return {\n        isConnected: () => clients.every((client) => client.isConnected()),\n        connect: () => Promise.all(clients.map((client) => client.connect())).then(() => undefined),\n        disconnect: () => Promise.all(clients.map((client) => client.disconnect())).then(() => undefined),\n        getReport: (change) => Promise.all(clients.map((client) => client.getReport(change))).then((reports) => ({\n            getDependencies: () => Promise.all(reports.map((report) => report.getDependencies())).then((dependencies) => dependencies.reduce((mergedDependencies, singleDependencies) => ({\n                files: Array.from(new Set([...mergedDependencies.files, ...singleDependencies.files])),\n                dirs: Array.from(new Set([...mergedDependencies.dirs, ...singleDependencies.dirs])),\n                excluded: Array.from(new Set([...mergedDependencies.excluded, ...singleDependencies.excluded])),\n                extensions: Array.from(new Set([...mergedDependencies.extensions, ...singleDependencies.extensions])),\n            }), { files: [], dirs: [], excluded: [], extensions: [] })),\n            getIssues: () => Promise.all(reports.map((report) => report.getIssues())).then((issues) => flatten_1.default(issues)),\n            close: () => Promise.all(reports.map((report) => report.close())).then(() => undefined),\n        })),\n    };\n}\nexports.composeReporterRpcClients = composeReporterRpcClients;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}