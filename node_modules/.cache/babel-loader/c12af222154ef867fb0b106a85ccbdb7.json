{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = exports.Service = exports.Bonjour = void 0;\n\nconst registry_1 = __importDefault(require(\"./lib/registry\"));\n\nconst mdns_server_1 = __importDefault(require(\"./lib/mdns-server\"));\n\nconst browser_1 = __importDefault(require(\"./lib/browser\"));\n\nexports.Browser = browser_1.default;\n\nconst service_1 = __importDefault(require(\"./lib/service\"));\n\nexports.Service = service_1.default;\n\nclass Bonjour {\n  constructor(opts, errorCallback) {\n    this.server = new mdns_server_1.default(opts, errorCallback);\n    this.registry = new registry_1.default(this.server);\n  }\n\n  publish(opts) {\n    return this.registry.publish(opts);\n  }\n\n  unpublishAll(callback) {\n    return this.registry.unpublishAll(callback);\n  }\n\n  find() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    let onup = arguments.length > 1 ? arguments[1] : undefined;\n    return new browser_1.default(this.server.mdns, opts, onup);\n  }\n\n  findOne() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    let timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10000;\n    let callback = arguments.length > 2 ? arguments[2] : undefined;\n    const browser = new browser_1.default(this.server.mdns, opts);\n    var timer;\n    browser.once('up', service => {\n      if (timer !== undefined) clearTimeout(timer);\n      browser.stop();\n      if (callback) callback(service);\n    });\n    timer = setTimeout(() => {\n      browser.stop();\n      if (callback) callback(null);\n    }, timeout);\n    return browser;\n  }\n\n  destroy() {\n    this.registry.destroy();\n    this.server.mdns.destroy();\n  }\n\n}\n\nexports.Bonjour = Bonjour;\nexports.default = Bonjour;","map":{"version":3,"mappings":";;;;;;;;;;;;;AACA;;AACA;;AACA;;AA8EiDA,kBA9E1CC,iBA8E0C;;AA7EjD;;AA6ESD,kBA7EFE,iBA6EE;;AA3ET,MAAaC,OAAb,CAAoB;EAUhBC,YAAYC,IAAZ,EAA8CC,aAA9C,EAAkF;IAC9E,KAAKC,MAAL,GAAkB,IAAIC,qBAAJ,CAAWH,IAAX,EAAiBC,aAAjB,CAAlB;IACA,KAAKG,QAAL,GAAkB,IAAIC,kBAAJ,CAAa,KAAKH,MAAlB,CAAlB;EACH;;EAOMI,OAAO,CAACN,IAAD,EAAoB;IAC9B,OAAO,KAAKI,QAAL,CAAcE,OAAd,CAAsBN,IAAtB,CAAP;EACH;;EAOMO,YAAY,CAACC,QAAD,EAAwC;IACvD,OAAO,KAAKJ,QAAL,CAAcG,YAAd,CAA2BC,QAA3B,CAAP;EACH;;EAQMC,IAAI,GAA+E;IAAA,IAA9ET,IAA8E,uEAA5CU,SAA4C;IAAA,IAAjCC,IAAiC;IACtF,OAAO,IAAIf,iBAAJ,CAAY,KAAKM,MAAL,CAAYU,IAAxB,EAA8BZ,IAA9B,EAAoCW,IAApC,CAAP;EACH;;EASME,OAAO,GAA0F;IAAA,IAAzFb,IAAyF,uEAAvDU,SAAuD;IAAA,IAA5CI,OAA4C,uEAAlC,KAAkC;IAAA,IAA3BN,QAA2B;IACpG,MAAMO,OAAO,GAAY,IAAInB,iBAAJ,CAAY,KAAKM,MAAL,CAAYU,IAAxB,EAA8BZ,IAA9B,CAAzB;IACA,IAAIgB,KAAJ;IACAD,OAAO,CAACE,IAAR,CAAa,IAAb,EAAoBC,OAAD,IAAqB;MACpC,IAAGF,KAAK,KAAKN,SAAb,EAAwBS,YAAY,CAACH,KAAD,CAAZ;MACxBD,OAAO,CAACK,IAAR;MACA,IAAGZ,QAAH,EAAaA,QAAQ,CAACU,OAAD,CAAR;IAChB,CAJD;IAKAF,KAAK,GAAGK,UAAU,CAAC,MAAK;MACpBN,OAAO,CAACK,IAAR;MACA,IAAGZ,QAAH,EAAaA,QAAQ,CAAC,IAAD,CAAR;IAChB,CAHiB,EAGfM,OAHe,CAAlB;IAIA,OAAOC,OAAP;EACH;;EAKMO,OAAO;IACV,KAAKlB,QAAL,CAAckB,OAAd;IACA,KAAKpB,MAAL,CAAYU,IAAZ,CAAiBU,OAAjB;EACH;;AAvEe;;AAApB3B;AA6EAA,kBAAeG,OAAf","names":["exports","browser_1","service_1","Bonjour","constructor","opts","errorCallback","server","mdns_server_1","registry","registry_1","publish","unpublishAll","callback","find","undefined","onup","mdns","findOne","timeout","browser","timer","once","service","clearTimeout","stop","setTimeout","destroy"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}