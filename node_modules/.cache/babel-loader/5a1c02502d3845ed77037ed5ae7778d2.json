{"ast":null,"code":"var multer = require('multer');\n\nvar _require = require('uuid'),\n    uuidv4 = _require.v4;\n\nvar path = require('path');\n\nvar storage = multer.diskStorage({\n  destination: function destination(req, file, cb) {\n    cb(null, 'images');\n  },\n  filename: function filename(req, file, cb) {\n    cb(null, uuidv4() + '-' + Date.now() + path.extname(file.originalname));\n  }\n});\n\nvar fileFilter = function fileFilter(req, file, cb) {\n  console.log(\"filefiltering\");\n  var allowedFileTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n\n  if (allowedFileTypes.includes(file.mimetype)) {\n    cb(null, true);\n  } else {\n    cb(null, false);\n  }\n};\n\nmodule.exports = multer({\n  storage: storage,\n  fileFilter: fileFilter\n});","map":{"version":3,"names":["multer","require","uuidv4","v4","path","storage","diskStorage","destination","req","file","cb","filename","Date","now","extname","originalname","fileFilter","console","log","allowedFileTypes","includes","mimetype","module","exports"],"sources":["C:/Users/Rohith/mern/backend/middleware/upload.js"],"sourcesContent":["const multer = require('multer');\r\nconst { v4: uuidv4 } = require('uuid');\r\nlet path = require('path');\r\nconst storage = multer.diskStorage({\r\n    destination: function(req, file, cb) {\r\n        cb(null, 'images');\r\n    },\r\n    filename: function(req, file, cb) {   \r\n        cb(null, uuidv4() + '-' + Date.now() + path.extname(file.originalname));\r\n    }\r\n});\r\nconst fileFilter = (req, file, cb) => {\r\n    console.log(\"filefiltering\");\r\n    const allowedFileTypes = ['image/jpeg', 'image/jpg', 'image/png'];\r\n    if(allowedFileTypes.includes(file.mimetype)) {\r\n        cb(null, true);\r\n    } else {\r\n        cb(null, false);\r\n    }\r\n}\r\nmodule.exports=multer({storage,fileFilter});"],"mappings":"AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,eAAuBA,OAAO,CAAC,MAAD,CAA9B;AAAA,IAAYC,MAAZ,YAAQC,EAAR;;AACA,IAAIC,IAAI,GAAGH,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAMI,OAAO,GAAGL,MAAM,CAACM,WAAP,CAAmB;EAC/BC,WAAW,EAAE,qBAASC,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;IACjCA,EAAE,CAAC,IAAD,EAAO,QAAP,CAAF;EACH,CAH8B;EAI/BC,QAAQ,EAAE,kBAASH,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;IAC9BA,EAAE,CAAC,IAAD,EAAOR,MAAM,KAAK,GAAX,GAAiBU,IAAI,CAACC,GAAL,EAAjB,GAA8BT,IAAI,CAACU,OAAL,CAAaL,IAAI,CAACM,YAAlB,CAArC,CAAF;EACH;AAN8B,CAAnB,CAAhB;;AAQA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACR,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;EAClCO,OAAO,CAACC,GAAR,CAAY,eAAZ;EACA,IAAMC,gBAAgB,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,WAA5B,CAAzB;;EACA,IAAGA,gBAAgB,CAACC,QAAjB,CAA0BX,IAAI,CAACY,QAA/B,CAAH,EAA6C;IACzCX,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;EACH,CAFD,MAEO;IACHA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;EACH;AACJ,CARD;;AASAY,MAAM,CAACC,OAAP,GAAevB,MAAM,CAAC;EAACK,OAAO,EAAPA,OAAD;EAASW,UAAU,EAAVA;AAAT,CAAD,CAArB"},"metadata":{},"sourceType":"script"}