{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, Context, enableAsyncHooks, disableAsyncHooks) {\n  var async = Promise._async;\n\n  var Warning = require(\"./errors\").Warning;\n\n  var util = require(\"./util\");\n\n  var es5 = require(\"./es5\");\n\n  var canAttachTrace = util.canAttachTrace;\n  var unhandledRejectionHandled;\n  var possiblyUnhandledRejection;\n  var bluebirdFramePattern = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\n  var nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\n  var parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\n  var stackFramePattern = null;\n  var formatStack = null;\n  var indentStackFrames = false;\n  var printWarning;\n  var debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 && (false || util.env(\"BLUEBIRD_DEBUG\") || util.env(\"NODE_ENV\") === \"development\"));\n  var warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 && (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n  var longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 && (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n  var wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 && (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n  var deferUnhandledRejectionCheck;\n\n  (function () {\n    var promises = [];\n\n    function unhandledRejectionCheck() {\n      for (var i = 0; i < promises.length; ++i) {\n        promises[i]._notifyUnhandledRejection();\n      }\n\n      unhandledRejectionClear();\n    }\n\n    function unhandledRejectionClear() {\n      promises.length = 0;\n    }\n\n    deferUnhandledRejectionCheck = function (promise) {\n      promises.push(promise);\n      setTimeout(unhandledRejectionCheck, 1);\n    };\n\n    es5.defineProperty(Promise, \"_unhandledRejectionCheck\", {\n      value: unhandledRejectionCheck\n    });\n    es5.defineProperty(Promise, \"_unhandledRejectionClear\", {\n      value: unhandledRejectionClear\n    });\n  })();\n\n  Promise.prototype.suppressUnhandledRejections = function () {\n    var target = this._target();\n\n    target._bitField = target._bitField & ~1048576 | 524288;\n  };\n\n  Promise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n\n    this._setRejectionIsUnhandled();\n\n    deferUnhandledRejectionCheck(this);\n  };\n\n  Promise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\", unhandledRejectionHandled, undefined, this);\n  };\n\n  Promise.prototype._setReturnedNonUndefined = function () {\n    this._bitField = this._bitField | 268435456;\n  };\n\n  Promise.prototype._returnedNonUndefined = function () {\n    return (this._bitField & 268435456) !== 0;\n  };\n\n  Promise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n      var reason = this._settledValue();\n\n      this._setUnhandledRejectionIsNotified();\n\n      fireRejectionEvent(\"unhandledRejection\", possiblyUnhandledRejection, reason, this);\n    }\n  };\n\n  Promise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n  };\n\n  Promise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & ~262144;\n  };\n\n  Promise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n  };\n\n  Promise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n  };\n\n  Promise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & ~1048576;\n\n    if (this._isUnhandledRejectionNotified()) {\n      this._unsetUnhandledRejectionIsNotified();\n\n      this._notifyUnhandledRejectionIsHandled();\n    }\n  };\n\n  Promise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n  };\n\n  Promise.prototype._warn = function (message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n  };\n\n  Promise.onPossiblyUnhandledRejection = function (fn) {\n    var context = Promise._getContext();\n\n    possiblyUnhandledRejection = util.contextBind(context, fn);\n  };\n\n  Promise.onUnhandledRejectionHandled = function (fn) {\n    var context = Promise._getContext();\n\n    unhandledRejectionHandled = util.contextBind(context, fn);\n  };\n\n  var disableLongStackTraces = function () {};\n\n  Promise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n      throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n      var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n      var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n      var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n      config.longStackTraces = true;\n\n      disableLongStackTraces = function () {\n        if (async.haveItemsQueued() && !config.longStackTraces) {\n          throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n\n        Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n        Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n        Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n        Context.deactivateLongStackTraces();\n        config.longStackTraces = false;\n      };\n\n      Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n      Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n      Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n      Context.activateLongStackTraces();\n    }\n  };\n\n  Promise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n  };\n\n  var legacyHandlers = {\n    unhandledrejection: {\n      before: function () {\n        var ret = util.global.onunhandledrejection;\n        util.global.onunhandledrejection = null;\n        return ret;\n      },\n      after: function (fn) {\n        util.global.onunhandledrejection = fn;\n      }\n    },\n    rejectionhandled: {\n      before: function () {\n        var ret = util.global.onrejectionhandled;\n        util.global.onrejectionhandled = null;\n        return ret;\n      },\n      after: function (fn) {\n        util.global.onrejectionhandled = fn;\n      }\n    }\n  };\n\n  var fireDomEvent = function () {\n    var dispatch = function (legacy, e) {\n      if (legacy) {\n        var fn;\n\n        try {\n          fn = legacy.before();\n          return !util.global.dispatchEvent(e);\n        } finally {\n          legacy.after(fn);\n        }\n      } else {\n        return !util.global.dispatchEvent(e);\n      }\n    };\n\n    try {\n      if (typeof CustomEvent === \"function\") {\n        var event = new CustomEvent(\"CustomEvent\");\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          name = name.toLowerCase();\n          var eventData = {\n            detail: event,\n            cancelable: true\n          };\n          var domEvent = new CustomEvent(name, eventData);\n          es5.defineProperty(domEvent, \"promise\", {\n            value: event.promise\n          });\n          es5.defineProperty(domEvent, \"reason\", {\n            value: event.reason\n          });\n          return dispatch(legacyHandlers[name], domEvent);\n        };\n      } else if (typeof Event === \"function\") {\n        var event = new Event(\"CustomEvent\");\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          name = name.toLowerCase();\n          var domEvent = new Event(name, {\n            cancelable: true\n          });\n          domEvent.detail = event;\n          es5.defineProperty(domEvent, \"promise\", {\n            value: event.promise\n          });\n          es5.defineProperty(domEvent, \"reason\", {\n            value: event.reason\n          });\n          return dispatch(legacyHandlers[name], domEvent);\n        };\n      } else {\n        var event = document.createEvent(\"CustomEvent\");\n        event.initCustomEvent(\"testingtheevent\", false, true, {});\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          name = name.toLowerCase();\n          var domEvent = document.createEvent(\"CustomEvent\");\n          domEvent.initCustomEvent(name, false, true, event);\n          return dispatch(legacyHandlers[name], domEvent);\n        };\n      }\n    } catch (e) {}\n\n    return function () {\n      return false;\n    };\n  }();\n\n  var fireGlobalEvent = function () {\n    if (util.isNode) {\n      return function () {\n        return process.emit.apply(process, arguments);\n      };\n    } else {\n      if (!util.global) {\n        return function () {\n          return false;\n        };\n      }\n\n      return function (name) {\n        var methodName = \"on\" + name.toLowerCase();\n        var method = util.global[methodName];\n        if (!method) return false;\n        method.apply(util.global, [].slice.call(arguments, 1));\n        return true;\n      };\n    }\n  }();\n\n  function generatePromiseLifecycleEventObject(name, promise) {\n    return {\n      promise: promise\n    };\n  }\n\n  var eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function (name, promise, child) {\n      return {\n        promise: promise,\n        child: child\n      };\n    },\n    warning: function (name, warning) {\n      return {\n        warning: warning\n      };\n    },\n    unhandledRejection: function (name, reason, promise) {\n      return {\n        reason: reason,\n        promise: promise\n      };\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n  };\n\n  var activeFireEvent = function (name) {\n    var globalEventFired = false;\n\n    try {\n      globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n      async.throwLater(e);\n      globalEventFired = true;\n    }\n\n    var domEventFired = false;\n\n    try {\n      domEventFired = fireDomEvent(name, eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n      async.throwLater(e);\n      domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n  };\n\n  Promise.config = function (opts) {\n    opts = Object(opts);\n\n    if (\"longStackTraces\" in opts) {\n      if (opts.longStackTraces) {\n        Promise.longStackTraces();\n      } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n        disableLongStackTraces();\n      }\n    }\n\n    if (\"warnings\" in opts) {\n      var warningsOption = opts.warnings;\n      config.warnings = !!warningsOption;\n      wForgottenReturn = config.warnings;\n\n      if (util.isObject(warningsOption)) {\n        if (\"wForgottenReturn\" in warningsOption) {\n          wForgottenReturn = !!warningsOption.wForgottenReturn;\n        }\n      }\n    }\n\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n      if (async.haveItemsQueued()) {\n        throw new Error(\"cannot enable cancellation after promises are in use\");\n      }\n\n      Promise.prototype._clearCancellationData = cancellationClearCancellationData;\n      Promise.prototype._propagateFrom = cancellationPropagateFrom;\n      Promise.prototype._onCancel = cancellationOnCancel;\n      Promise.prototype._setOnCancel = cancellationSetOnCancel;\n      Promise.prototype._attachCancellationCallback = cancellationAttachCancellationCallback;\n      Promise.prototype._execute = cancellationExecute;\n      propagateFromFunction = cancellationPropagateFrom;\n      config.cancellation = true;\n    }\n\n    if (\"monitoring\" in opts) {\n      if (opts.monitoring && !config.monitoring) {\n        config.monitoring = true;\n        Promise.prototype._fireEvent = activeFireEvent;\n      } else if (!opts.monitoring && config.monitoring) {\n        config.monitoring = false;\n        Promise.prototype._fireEvent = defaultFireEvent;\n      }\n    }\n\n    if (\"asyncHooks\" in opts && util.nodeSupportsAsyncResource) {\n      var prev = config.asyncHooks;\n      var cur = !!opts.asyncHooks;\n\n      if (prev !== cur) {\n        config.asyncHooks = cur;\n\n        if (cur) {\n          enableAsyncHooks();\n        } else {\n          disableAsyncHooks();\n        }\n      }\n    }\n\n    return Promise;\n  };\n\n  function defaultFireEvent() {\n    return false;\n  }\n\n  Promise.prototype._fireEvent = defaultFireEvent;\n\n  Promise.prototype._execute = function (executor, resolve, reject) {\n    try {\n      executor(resolve, reject);\n    } catch (e) {\n      return e;\n    }\n  };\n\n  Promise.prototype._onCancel = function () {};\n\n  Promise.prototype._setOnCancel = function (handler) {\n    ;\n  };\n\n  Promise.prototype._attachCancellationCallback = function (onCancel) {\n    ;\n  };\n\n  Promise.prototype._captureStackTrace = function () {};\n\n  Promise.prototype._attachExtraTrace = function () {};\n\n  Promise.prototype._dereferenceTrace = function () {};\n\n  Promise.prototype._clearCancellationData = function () {};\n\n  Promise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n  };\n\n  function cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n\n    try {\n      executor(resolve, reject, function (onCancel) {\n        if (typeof onCancel !== \"function\") {\n          throw new TypeError(\"onCancel must be a function, got: \" + util.toString(onCancel));\n        }\n\n        promise._attachCancellationCallback(onCancel);\n      });\n    } catch (e) {\n      return e;\n    }\n  }\n\n  function cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n\n    if (previousOnCancel !== undefined) {\n      if (util.isArray(previousOnCancel)) {\n        previousOnCancel.push(onCancel);\n      } else {\n        this._setOnCancel([previousOnCancel, onCancel]);\n      }\n    } else {\n      this._setOnCancel(onCancel);\n    }\n  }\n\n  function cancellationOnCancel() {\n    return this._onCancelField;\n  }\n\n  function cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n  }\n\n  function cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n  }\n\n  function cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n      this._cancellationParent = parent;\n      var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n\n      if (branchesRemainingToCancel === undefined) {\n        branchesRemainingToCancel = 0;\n      }\n\n      parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n\n    if ((flags & 2) !== 0 && parent._isBound()) {\n      this._setBoundTo(parent._boundTo);\n    }\n  }\n\n  function bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n      this._setBoundTo(parent._boundTo);\n    }\n  }\n\n  var propagateFromFunction = bindingPropagateFrom;\n\n  function boundValueFunction() {\n    var ret = this._boundTo;\n\n    if (ret !== undefined) {\n      if (ret instanceof Promise) {\n        if (ret.isFulfilled()) {\n          return ret.value();\n        } else {\n          return undefined;\n        }\n      }\n    }\n\n    return ret;\n  }\n\n  function longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n  }\n\n  function longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n      var trace = this._trace;\n\n      if (trace !== undefined) {\n        if (ignoreSelf) trace = trace._parent;\n      }\n\n      if (trace !== undefined) {\n        trace.attachExtraTrace(error);\n      } else if (!error.__stackCleaned__) {\n        var parsed = parseStackAndMessage(error);\n        util.notEnumerableProp(error, \"stack\", parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n        util.notEnumerableProp(error, \"__stackCleaned__\", true);\n      }\n    }\n  }\n\n  function longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n  }\n\n  function checkForgottenReturns(returnValue, promiseCreated, name, promise, parent) {\n    if (returnValue === undefined && promiseCreated !== null && wForgottenReturn) {\n      if (parent !== undefined && parent._returnedNonUndefined()) return;\n      if ((promise._bitField & 65535) === 0) return;\n      if (name) name = name + \" \";\n      var handlerLine = \"\";\n      var creatorLine = \"\";\n\n      if (promiseCreated._trace) {\n        var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n\n        var stack = cleanStack(traceLines);\n\n        for (var i = stack.length - 1; i >= 0; --i) {\n          var line = stack[i];\n\n          if (!nodeFramePattern.test(line)) {\n            var lineMatches = line.match(parseLinePattern);\n\n            if (lineMatches) {\n              handlerLine = \"at \" + lineMatches[1] + \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n            }\n\n            break;\n          }\n        }\n\n        if (stack.length > 0) {\n          var firstUserLine = stack[0];\n\n          for (var i = 0; i < traceLines.length; ++i) {\n            if (traceLines[i] === firstUserLine) {\n              if (i > 0) {\n                creatorLine = \"\\n\" + traceLines[i - 1];\n              }\n\n              break;\n            }\n          }\n        }\n      }\n\n      var msg = \"a promise was created in a \" + name + \"handler \" + handlerLine + \"but was not returned from it, \" + \"see http://goo.gl/rRqMUw\" + creatorLine;\n\n      promise._warn(msg, true, promiseCreated);\n    }\n  }\n\n  function deprecated(name, replacement) {\n    var message = name + \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n  }\n\n  function warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n\n    if (shouldUseOwnTrace) {\n      promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n      ctx.attachExtraTrace(warning);\n    } else {\n      var parsed = parseStackAndMessage(warning);\n      warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n      formatAndLogError(warning, \"\", true);\n    }\n  }\n\n  function reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n      stacks[i].push(\"From previous event:\");\n      stacks[i] = stacks[i].join(\"\\n\");\n    }\n\n    if (i < stacks.length) {\n      stacks[i] = stacks[i].join(\"\\n\");\n    }\n\n    return message + \"\\n\" + stacks.join(\"\\n\");\n  }\n\n  function removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n      if (stacks[i].length === 0 || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) {\n        stacks.splice(i, 1);\n        i--;\n      }\n    }\n  }\n\n  function removeCommonRoots(stacks) {\n    var current = stacks[0];\n\n    for (var i = 1; i < stacks.length; ++i) {\n      var prev = stacks[i];\n      var currentLastIndex = current.length - 1;\n      var currentLastLine = current[currentLastIndex];\n      var commonRootMeetPoint = -1;\n\n      for (var j = prev.length - 1; j >= 0; --j) {\n        if (prev[j] === currentLastLine) {\n          commonRootMeetPoint = j;\n          break;\n        }\n      }\n\n      for (var j = commonRootMeetPoint; j >= 0; --j) {\n        var line = prev[j];\n\n        if (current[currentLastIndex] === line) {\n          current.pop();\n          currentLastIndex--;\n        } else {\n          break;\n        }\n      }\n\n      current = prev;\n    }\n  }\n\n  function cleanStack(stack) {\n    var ret = [];\n\n    for (var i = 0; i < stack.length; ++i) {\n      var line = stack[i];\n      var isTraceLine = \"    (No stack trace)\" === line || stackFramePattern.test(line);\n      var isInternalFrame = isTraceLine && shouldIgnore(line);\n\n      if (isTraceLine && !isInternalFrame) {\n        if (indentStackFrames && line.charAt(0) !== \" \") {\n          line = \"    \" + line;\n        }\n\n        ret.push(line);\n      }\n    }\n\n    return ret;\n  }\n\n  function stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n\n    for (var i = 0; i < stack.length; ++i) {\n      var line = stack[i];\n\n      if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n        break;\n      }\n    }\n\n    if (i > 0 && error.name != \"SyntaxError\") {\n      stack = stack.slice(i);\n    }\n\n    return stack;\n  }\n\n  function parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0 ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n      message: message,\n      stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n  }\n\n  function formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n      var message;\n\n      if (util.isObject(error)) {\n        var stack = error.stack;\n        message = title + formatStack(stack, error);\n      } else {\n        message = title + String(error);\n      }\n\n      if (typeof printWarning === \"function\") {\n        printWarning(message, isSoft);\n      } else if (typeof console.log === \"function\" || typeof console.log === \"object\") {\n        console.log(message);\n      }\n    }\n  }\n\n  function fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n\n    try {\n      if (typeof localHandler === \"function\") {\n        localEventFired = true;\n\n        if (name === \"rejectionHandled\") {\n          localHandler(promise);\n        } else {\n          localHandler(reason, promise);\n        }\n      }\n    } catch (e) {\n      async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n      if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n        formatAndLogError(reason, \"Unhandled rejection \");\n      }\n    } else {\n      activeFireEvent(name, promise);\n    }\n  }\n\n  function formatNonError(obj) {\n    var str;\n\n    if (typeof obj === \"function\") {\n      str = \"[function \" + (obj.name || \"anonymous\") + \"]\";\n    } else {\n      str = obj && typeof obj.toString === \"function\" ? obj.toString() : util.toString(obj);\n      var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n\n      if (ruselessToString.test(str)) {\n        try {\n          var newStr = JSON.stringify(obj);\n          str = newStr;\n        } catch (e) {}\n      }\n\n      if (str.length === 0) {\n        str = \"(empty array)\";\n      }\n    }\n\n    return \"(<\" + snip(str) + \">, no stack trace)\";\n  }\n\n  function snip(str) {\n    var maxChars = 41;\n\n    if (str.length < maxChars) {\n      return str;\n    }\n\n    return str.substr(0, maxChars - 3) + \"...\";\n  }\n\n  function longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n  }\n\n  var shouldIgnore = function () {\n    return false;\n  };\n\n  var parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n\n  function parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n\n    if (matches) {\n      return {\n        fileName: matches[1],\n        line: parseInt(matches[2], 10)\n      };\n    }\n  }\n\n  function setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = (firstLineError.stack || \"\").split(\"\\n\");\n    var lastStackLines = (lastLineError.stack || \"\").split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n\n    for (var i = 0; i < firstStackLines.length; ++i) {\n      var result = parseLineInfo(firstStackLines[i]);\n\n      if (result) {\n        firstFileName = result.fileName;\n        firstIndex = result.line;\n        break;\n      }\n    }\n\n    for (var i = 0; i < lastStackLines.length; ++i) {\n      var result = parseLineInfo(lastStackLines[i]);\n\n      if (result) {\n        lastFileName = result.fileName;\n        lastIndex = result.line;\n        break;\n      }\n    }\n\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || firstIndex >= lastIndex) {\n      return;\n    }\n\n    shouldIgnore = function (line) {\n      if (bluebirdFramePattern.test(line)) return true;\n      var info = parseLineInfo(line);\n\n      if (info) {\n        if (info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  }\n\n  function CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n  }\n\n  util.inherits(CapturedTrace, Error);\n  Context.CapturedTrace = CapturedTrace;\n\n  CapturedTrace.prototype.uncycle = function () {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n      nodes.push(node);\n      node = node._parent;\n    }\n\n    length = this._length = i;\n\n    for (var i = length - 1; i >= 0; --i) {\n      var stack = nodes[i].stack;\n\n      if (stackToIndex[stack] === undefined) {\n        stackToIndex[stack] = i;\n      }\n    }\n\n    for (var i = 0; i < length; ++i) {\n      var currentStack = nodes[i].stack;\n      var index = stackToIndex[currentStack];\n\n      if (index !== undefined && index !== i) {\n        if (index > 0) {\n          nodes[index - 1]._parent = undefined;\n          nodes[index - 1]._length = 1;\n        }\n\n        nodes[i]._parent = undefined;\n        nodes[i]._length = 1;\n        var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n        if (index < length - 1) {\n          cycleEdgeNode._parent = nodes[index + 1];\n\n          cycleEdgeNode._parent.uncycle();\n\n          cycleEdgeNode._length = cycleEdgeNode._parent._length + 1;\n        } else {\n          cycleEdgeNode._parent = undefined;\n          cycleEdgeNode._length = 1;\n        }\n\n        var currentChildLength = cycleEdgeNode._length + 1;\n\n        for (var j = i - 2; j >= 0; --j) {\n          nodes[j]._length = currentChildLength;\n          currentChildLength++;\n        }\n\n        return;\n      }\n    }\n  };\n\n  CapturedTrace.prototype.attachExtraTrace = function (error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n    var trace = this;\n\n    while (trace !== undefined) {\n      stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n      trace = trace._parent;\n    }\n\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n  };\n\n  var captureStackTrace = function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n\n    var v8stackFormatter = function (stack, error) {\n      if (typeof stack === \"string\") return stack;\n\n      if (error.name !== undefined && error.message !== undefined) {\n        return error.toString();\n      }\n\n      return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" && typeof Error.captureStackTrace === \"function\") {\n      Error.stackTraceLimit += 6;\n      stackFramePattern = v8stackFramePattern;\n      formatStack = v8stackFormatter;\n      var captureStackTrace = Error.captureStackTrace;\n\n      shouldIgnore = function (line) {\n        return bluebirdFramePattern.test(line);\n      };\n\n      return function (receiver, ignoreUntil) {\n        Error.stackTraceLimit += 6;\n        captureStackTrace(receiver, ignoreUntil);\n        Error.stackTraceLimit -= 6;\n      };\n    }\n\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" && err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n      stackFramePattern = /@/;\n      formatStack = v8stackFormatter;\n      indentStackFrames = true;\n      return function captureStackTrace(o) {\n        o.stack = new Error().stack;\n      };\n    }\n\n    var hasStackAfterThrow;\n\n    try {\n      throw new Error();\n    } catch (e) {\n      hasStackAfterThrow = \"stack\" in e;\n    }\n\n    if (!(\"stack\" in err) && hasStackAfterThrow && typeof Error.stackTraceLimit === \"number\") {\n      stackFramePattern = v8stackFramePattern;\n      formatStack = v8stackFormatter;\n      return function captureStackTrace(o) {\n        Error.stackTraceLimit += 6;\n\n        try {\n          throw new Error();\n        } catch (e) {\n          o.stack = e.stack;\n        }\n\n        Error.stackTraceLimit -= 6;\n      };\n    }\n\n    formatStack = function (stack, error) {\n      if (typeof stack === \"string\") return stack;\n\n      if ((typeof error === \"object\" || typeof error === \"function\") && error.name !== undefined && error.message !== undefined) {\n        return error.toString();\n      }\n\n      return formatNonError(error);\n    };\n\n    return null;\n  }([]);\n\n  if (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n      console.warn(message);\n    };\n\n    if (util.isNode && process.stderr.isTTY) {\n      printWarning = function (message, isSoft) {\n        var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n        console.warn(color + message + \"\\u001b[0m\\n\");\n      };\n    } else if (!util.isNode && typeof new Error().stack === \"string\") {\n      printWarning = function (message, isSoft) {\n        console.warn(\"%c\" + message, isSoft ? \"color: darkorange\" : \"color: red\");\n      };\n    }\n  }\n\n  var config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false,\n    asyncHooks: false\n  };\n  if (longStackTraces) Promise.longStackTraces();\n  return {\n    asyncHooks: function () {\n      return config.asyncHooks;\n    },\n    longStackTraces: function () {\n      return config.longStackTraces;\n    },\n    warnings: function () {\n      return config.warnings;\n    },\n    cancellation: function () {\n      return config.cancellation;\n    },\n    monitoring: function () {\n      return config.monitoring;\n    },\n    propagateFromFunction: function () {\n      return propagateFromFunction;\n    },\n    boundValueFunction: function () {\n      return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n  };\n};","map":{"version":3,"names":["module","exports","Promise","Context","enableAsyncHooks","disableAsyncHooks","async","_async","Warning","require","util","es5","canAttachTrace","unhandledRejectionHandled","possiblyUnhandledRejection","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","printWarning","debugging","env","warnings","longStackTraces","wForgottenReturn","deferUnhandledRejectionCheck","promises","unhandledRejectionCheck","i","length","_notifyUnhandledRejection","unhandledRejectionClear","promise","push","setTimeout","defineProperty","value","prototype","suppressUnhandledRejections","target","_target","_bitField","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","undefined","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","_warn","message","shouldUseOwnTrace","warn","onPossiblyUnhandledRejection","fn","context","_getContext","contextBind","onUnhandledRejectionHandled","disableLongStackTraces","haveItemsQueued","config","Error","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","deactivateLongStackTraces","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","activateLongStackTraces","hasLongStackTraces","legacyHandlers","unhandledrejection","before","ret","global","onunhandledrejection","after","rejectionhandled","onrejectionhandled","fireDomEvent","dispatch","legacy","e","dispatchEvent","CustomEvent","event","name","toLowerCase","eventData","detail","cancelable","domEvent","Event","document","createEvent","initCustomEvent","fireGlobalEvent","isNode","process","emit","apply","arguments","methodName","method","slice","call","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","child","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","throwLater","domEventFired","opts","Object","warningsOption","isObject","cancellation","_clearCancellationData","cancellationClearCancellationData","_propagateFrom","cancellationPropagateFrom","_onCancel","cancellationOnCancel","_setOnCancel","cancellationSetOnCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","_execute","cancellationExecute","propagateFromFunction","monitoring","_fireEvent","defaultFireEvent","nodeSupportsAsyncResource","prev","asyncHooks","cur","executor","resolve","reject","handler","onCancel","parent","flags","TypeError","toString","_isCancellable","previousOnCancel","isArray","_onCancelField","_cancellationParent","branchesRemainingToCancel","_branchesRemainingToCancel","_isBound","_setBoundTo","_boundTo","bindingPropagateFrom","boundValueFunction","isFulfilled","_trace","CapturedTrace","_peekContext","error","ignoreSelf","trace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","stack","join","checkForgottenReturns","returnValue","handlerLine","creatorLine","traceLines","split","cleanStack","line","test","lineMatches","match","firstUserLine","msg","deprecated","replacement","ctx","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","j","pop","isTraceLine","isInternalFrame","shouldIgnore","charAt","stackFramesAsArray","replace","title","isSoft","console","String","log","localHandler","localEventFired","formatNonError","obj","str","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","captureStackTrace","parseLineInfoRegex","parseLineInfo","matches","fileName","parseInt","setBounds","firstLineError","lastLineError","firstStackLines","lastStackLines","firstIndex","lastIndex","firstFileName","lastFileName","result","info","_promisesCreated","_length","uncycle","inherits","nodes","stackToIndex","node","currentStack","index","cycleEdgeNode","currentChildLength","stackDetection","v8stackFramePattern","v8stackFormatter","stackTraceLimit","receiver","ignoreUntil","err","indexOf","o","hasStackAfterThrow","stderr","isTTY","color"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/bluebird/js/release/debuggability.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, Context,\n    enableAsyncHooks, disableAsyncHooks) {\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar es5 = require(\"./es5\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nvar deferUnhandledRejectionCheck;\n(function() {\n    var promises = [];\n\n    function unhandledRejectionCheck() {\n        for (var i = 0; i < promises.length; ++i) {\n            promises[i]._notifyUnhandledRejection();\n        }\n        unhandledRejectionClear();\n    }\n\n    function unhandledRejectionClear() {\n        promises.length = 0;\n    }\n\n    deferUnhandledRejectionCheck = function(promise) {\n        promises.push(promise);\n        setTimeout(unhandledRejectionCheck, 1);\n    };\n\n    es5.defineProperty(Promise, \"_unhandledRejectionCheck\", {\n        value: unhandledRejectionCheck\n    });\n    es5.defineProperty(Promise, \"_unhandledRejectionClear\", {\n        value: unhandledRejectionClear\n    });\n})();\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    deferUnhandledRejectionCheck(this);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var context = Promise._getContext();\n    possiblyUnhandledRejection = util.contextBind(context, fn);\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var context = Promise._getContext();\n    unhandledRejectionHandled = util.contextBind(context, fn);\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\n\nvar legacyHandlers = {\n    unhandledrejection: {\n        before: function() {\n            var ret = util.global.onunhandledrejection;\n            util.global.onunhandledrejection = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onunhandledrejection = fn;\n        }\n    },\n    rejectionhandled: {\n        before: function() {\n            var ret = util.global.onrejectionhandled;\n            util.global.onrejectionhandled = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onrejectionhandled = fn;\n        }\n    }\n};\n\nvar fireDomEvent = (function() {\n    var dispatch = function(legacy, e) {\n        if (legacy) {\n            var fn;\n            try {\n                fn = legacy.before();\n                return !util.global.dispatchEvent(e);\n            } finally {\n                legacy.after(fn);\n            }\n        } else {\n            return !util.global.dispatchEvent(e);\n        }\n    };\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                var domEvent = new CustomEvent(name, eventData);\n                es5.defineProperty(\n                    domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(\n                    domEvent, \"reason\", {value: event.reason});\n\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = new Event(name, {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name, false, true,\n                    event);\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    if (\"asyncHooks\" in opts && util.nodeSupportsAsyncResource) {\n        var prev = config.asyncHooks;\n        var cur = !!opts.asyncHooks;\n        if (prev !== cur) {\n            config.asyncHooks = cur;\n            if (cur) {\n                enableAsyncHooks();\n            } else {\n                disableAsyncHooks();\n            }\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = (firstLineError.stack || \"\").split(\"\\n\");\n    var lastStackLines = (lastLineError.stack || \"\").split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false,\n    asyncHooks: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    asyncHooks: function() {\n        return config.asyncHooks;\n    },\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}