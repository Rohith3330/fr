{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst TypeScriptEmbeddedExtension_1 = require(\"../TypeScriptEmbeddedExtension\");\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nfunction createTypeScriptVueExtension(configuration) {\n  function loadVueTemplateCompiler() {\n    return require(configuration.compiler);\n  }\n\n  function isVueTemplateCompilerV2(compiler) {\n    return typeof compiler.parseComponent === 'function';\n  }\n\n  function isVueTemplateCompilerV3(compiler) {\n    return typeof compiler.parse === 'function';\n  }\n\n  function getExtensionByLang(lang) {\n    if (lang === true) {\n      return '.js';\n    }\n\n    switch (lang) {\n      case 'ts':\n        return '.ts';\n\n      case 'tsx':\n        return '.tsx';\n\n      case 'js':\n      case 'jsx':\n      default:\n        return '.js';\n    }\n  }\n\n  function createVueNoScriptEmbeddedSource() {\n    return {\n      sourceText: 'export default {};\\n',\n      extension: '.js'\n    };\n  }\n\n  function createVueSrcScriptEmbeddedSource(src, lang) {\n    // Import path cannot be end with '.ts[x]'\n    src = src.replace(/\\.tsx?$/i, ''); // For now, ignore the error when the src file is not found since it will produce incorrect code location.\n    // It's not a large problem since it's handled on webpack side.\n\n    const text = ['// @ts-ignore', `export { default } from '${src}';`, '// @ts-ignore', `export * from '${src}';`].join('\\n');\n    return {\n      sourceText: text,\n      extension: getExtensionByLang(lang)\n    };\n  }\n\n  function createVueInlineScriptEmbeddedSource(text, lang) {\n    return {\n      sourceText: text,\n      extension: getExtensionByLang(lang)\n    };\n  }\n\n  function getVueEmbeddedSource(fileName) {\n    if (!fs_extra_1.default.existsSync(fileName)) {\n      return undefined;\n    }\n\n    const compiler = loadVueTemplateCompiler();\n    const vueSourceText = fs_extra_1.default.readFileSync(fileName, {\n      encoding: 'utf-8'\n    });\n    let script;\n\n    if (isVueTemplateCompilerV2(compiler)) {\n      const parsed = compiler.parseComponent(vueSourceText, {\n        pad: 'space'\n      });\n      script = parsed.script;\n    } else if (isVueTemplateCompilerV3(compiler)) {\n      const parsed = compiler.parse(vueSourceText);\n\n      if (parsed.descriptor && parsed.descriptor.script) {\n        const scriptV3 = parsed.descriptor.script; // map newer version of SFCScriptBlock to the generic one\n\n        script = {\n          content: scriptV3.content,\n          attrs: scriptV3.attrs,\n          start: scriptV3.loc.start.offset,\n          end: scriptV3.loc.end.offset,\n          lang: scriptV3.lang,\n          src: scriptV3.src\n        };\n      }\n    } else {\n      throw new Error('Unsupported vue template compiler. Compiler should provide `parse` or `parseComponent` function.');\n    }\n\n    if (!script) {\n      // No <script> block\n      return createVueNoScriptEmbeddedSource();\n    } else if (script.attrs.src) {\n      // <script src=\"file.ts\" /> block\n      if (typeof script.attrs.src === 'string') {\n        return createVueSrcScriptEmbeddedSource(script.attrs.src, script.attrs.lang);\n      }\n    } else {\n      // <script lang=\"ts\"></script> block\n      // pad blank lines to retain diagnostics location\n      const lineOffset = vueSourceText.slice(0, script.start).split(/\\r?\\n/g).length;\n      const paddedSourceText = Array(lineOffset).join('\\n') + vueSourceText.slice(script.start, script.end);\n      return createVueInlineScriptEmbeddedSource(paddedSourceText, script.attrs.lang);\n    }\n  }\n\n  return TypeScriptEmbeddedExtension_1.createTypeScriptEmbeddedExtension({\n    embeddedExtensions: ['.vue'],\n    getEmbeddedSource: getVueEmbeddedSource\n  });\n}\n\nexports.createTypeScriptVueExtension = createTypeScriptVueExtension;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","TypeScriptEmbeddedExtension_1","require","fs_extra_1","createTypeScriptVueExtension","configuration","loadVueTemplateCompiler","compiler","isVueTemplateCompilerV2","parseComponent","isVueTemplateCompilerV3","parse","getExtensionByLang","lang","createVueNoScriptEmbeddedSource","sourceText","extension","createVueSrcScriptEmbeddedSource","src","replace","text","join","createVueInlineScriptEmbeddedSource","getVueEmbeddedSource","fileName","default","existsSync","undefined","vueSourceText","readFileSync","encoding","script","parsed","pad","descriptor","scriptV3","content","attrs","start","loc","offset","end","Error","lineOffset","slice","split","length","paddedSourceText","Array","createTypeScriptEmbeddedExtension","embeddedExtensions","getEmbeddedSource"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/fork-ts-checker-webpack-plugin/lib/typescript-reporter/extension/vue/TypeScriptVueExtension.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TypeScriptEmbeddedExtension_1 = require(\"../TypeScriptEmbeddedExtension\");\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\nfunction createTypeScriptVueExtension(configuration) {\n    function loadVueTemplateCompiler() {\n        return require(configuration.compiler);\n    }\n    function isVueTemplateCompilerV2(compiler) {\n        return typeof compiler.parseComponent === 'function';\n    }\n    function isVueTemplateCompilerV3(compiler) {\n        return typeof compiler.parse === 'function';\n    }\n    function getExtensionByLang(lang) {\n        if (lang === true) {\n            return '.js';\n        }\n        switch (lang) {\n            case 'ts':\n                return '.ts';\n            case 'tsx':\n                return '.tsx';\n            case 'js':\n            case 'jsx':\n            default:\n                return '.js';\n        }\n    }\n    function createVueNoScriptEmbeddedSource() {\n        return {\n            sourceText: 'export default {};\\n',\n            extension: '.js',\n        };\n    }\n    function createVueSrcScriptEmbeddedSource(src, lang) {\n        // Import path cannot be end with '.ts[x]'\n        src = src.replace(/\\.tsx?$/i, '');\n        // For now, ignore the error when the src file is not found since it will produce incorrect code location.\n        // It's not a large problem since it's handled on webpack side.\n        const text = [\n            '// @ts-ignore',\n            `export { default } from '${src}';`,\n            '// @ts-ignore',\n            `export * from '${src}';`,\n        ].join('\\n');\n        return {\n            sourceText: text,\n            extension: getExtensionByLang(lang),\n        };\n    }\n    function createVueInlineScriptEmbeddedSource(text, lang) {\n        return {\n            sourceText: text,\n            extension: getExtensionByLang(lang),\n        };\n    }\n    function getVueEmbeddedSource(fileName) {\n        if (!fs_extra_1.default.existsSync(fileName)) {\n            return undefined;\n        }\n        const compiler = loadVueTemplateCompiler();\n        const vueSourceText = fs_extra_1.default.readFileSync(fileName, { encoding: 'utf-8' });\n        let script;\n        if (isVueTemplateCompilerV2(compiler)) {\n            const parsed = compiler.parseComponent(vueSourceText, {\n                pad: 'space',\n            });\n            script = parsed.script;\n        }\n        else if (isVueTemplateCompilerV3(compiler)) {\n            const parsed = compiler.parse(vueSourceText);\n            if (parsed.descriptor && parsed.descriptor.script) {\n                const scriptV3 = parsed.descriptor.script;\n                // map newer version of SFCScriptBlock to the generic one\n                script = {\n                    content: scriptV3.content,\n                    attrs: scriptV3.attrs,\n                    start: scriptV3.loc.start.offset,\n                    end: scriptV3.loc.end.offset,\n                    lang: scriptV3.lang,\n                    src: scriptV3.src,\n                };\n            }\n        }\n        else {\n            throw new Error('Unsupported vue template compiler. Compiler should provide `parse` or `parseComponent` function.');\n        }\n        if (!script) {\n            // No <script> block\n            return createVueNoScriptEmbeddedSource();\n        }\n        else if (script.attrs.src) {\n            // <script src=\"file.ts\" /> block\n            if (typeof script.attrs.src === 'string') {\n                return createVueSrcScriptEmbeddedSource(script.attrs.src, script.attrs.lang);\n            }\n        }\n        else {\n            // <script lang=\"ts\"></script> block\n            // pad blank lines to retain diagnostics location\n            const lineOffset = vueSourceText.slice(0, script.start).split(/\\r?\\n/g).length;\n            const paddedSourceText = Array(lineOffset).join('\\n') + vueSourceText.slice(script.start, script.end);\n            return createVueInlineScriptEmbeddedSource(paddedSourceText, script.attrs.lang);\n        }\n    }\n    return TypeScriptEmbeddedExtension_1.createTypeScriptEmbeddedExtension({\n        embeddedExtensions: ['.vue'],\n        getEmbeddedSource: getVueEmbeddedSource,\n    });\n}\nexports.createTypeScriptVueExtension = createTypeScriptVueExtension;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}