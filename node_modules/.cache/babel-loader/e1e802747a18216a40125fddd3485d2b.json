{"ast":null,"code":"const multer = require('multer');\n\nconst {\n  v4: uuidv4\n} = require('uuid');\n\nlet path = require('path');\n\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, 'images');\n  },\n  filename: function (req, file, cb) {\n    cb(null, uuidv4() + '-' + Date.now() + path.extname(file.originalname));\n  }\n});\n\nconst fileFilter = (req, file, cb) => {\n  console.log(\"filefiltering\");\n  const allowedFileTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n\n  if (allowedFileTypes.includes(file.mimetype)) {\n    cb(null, true);\n  } else {\n    cb(null, false);\n  }\n};\n\nmodule.exports = multer({\n  storage,\n  fileFilter\n});","map":{"version":3,"names":["multer","require","v4","uuidv4","path","storage","diskStorage","destination","req","file","cb","filename","Date","now","extname","originalname","fileFilter","console","log","allowedFileTypes","includes","mimetype","module","exports"],"sources":["C:/Users/Rohith/mern/backend/middleware/upload.js"],"sourcesContent":["const multer = require('multer');\r\nconst { v4: uuidv4 } = require('uuid');\r\nlet path = require('path');\r\nconst storage = multer.diskStorage({\r\n    destination: function(req, file, cb) {\r\n        cb(null, 'images');\r\n    },\r\n    filename: function(req, file, cb) {   \r\n        cb(null, uuidv4() + '-' + Date.now() + path.extname(file.originalname));\r\n    }\r\n});\r\nconst fileFilter = (req, file, cb) => {\r\n    console.log(\"filefiltering\");\r\n    const allowedFileTypes = ['image/jpeg', 'image/jpg', 'image/png'];\r\n    if(allowedFileTypes.includes(file.mimetype)) {\r\n        cb(null, true);\r\n    } else {\r\n        cb(null, false);\r\n    }\r\n}\r\nmodule.exports=multer({storage,fileFilter});"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAM;EAAEC,EAAE,EAAEC;AAAN,IAAiBF,OAAO,CAAC,MAAD,CAA9B;;AACA,IAAIG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAAlB;;AACA,MAAMI,OAAO,GAAGL,MAAM,CAACM,WAAP,CAAmB;EAC/BC,WAAW,EAAE,UAASC,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;IACjCA,EAAE,CAAC,IAAD,EAAO,QAAP,CAAF;EACH,CAH8B;EAI/BC,QAAQ,EAAE,UAASH,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;IAC9BA,EAAE,CAAC,IAAD,EAAOP,MAAM,KAAK,GAAX,GAAiBS,IAAI,CAACC,GAAL,EAAjB,GAA8BT,IAAI,CAACU,OAAL,CAAaL,IAAI,CAACM,YAAlB,CAArC,CAAF;EACH;AAN8B,CAAnB,CAAhB;;AAQA,MAAMC,UAAU,GAAG,CAACR,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;EAClCO,OAAO,CAACC,GAAR,CAAY,eAAZ;EACA,MAAMC,gBAAgB,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,WAA5B,CAAzB;;EACA,IAAGA,gBAAgB,CAACC,QAAjB,CAA0BX,IAAI,CAACY,QAA/B,CAAH,EAA6C;IACzCX,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;EACH,CAFD,MAEO;IACHA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;EACH;AACJ,CARD;;AASAY,MAAM,CAACC,OAAP,GAAevB,MAAM,CAAC;EAACK,OAAD;EAASW;AAAT,CAAD,CAArB"},"metadata":{},"sourceType":"script"}