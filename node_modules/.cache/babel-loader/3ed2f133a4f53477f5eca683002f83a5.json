{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RULE_NAME = void 0;\n\nconst utils_1 = require(\"@typescript-eslint/utils\");\n\nconst create_testing_library_rule_1 = require(\"../create-testing-library-rule\");\n\nconst node_utils_1 = require(\"../node-utils\");\n\nexports.RULE_NAME = 'no-promise-in-fire-event';\nexports.default = (0, create_testing_library_rule_1.createTestingLibraryRule)({\n  name: exports.RULE_NAME,\n  meta: {\n    type: 'problem',\n    docs: {\n      description: 'Disallow the use of promises passed to a `fireEvent` method',\n      recommendedConfig: {\n        dom: 'error',\n        angular: 'error',\n        react: 'error',\n        vue: 'error',\n        marko: 'error'\n      }\n    },\n    messages: {\n      noPromiseInFireEvent: \"A promise shouldn't be passed to a `fireEvent` method, instead pass the DOM element\"\n    },\n    schema: []\n  },\n  defaultOptions: [],\n\n  create(context, _, helpers) {\n    function checkSuspiciousNode(node, originalNode) {\n      if (utils_1.ASTUtils.isAwaitExpression(node)) {\n        return;\n      }\n\n      if ((0, node_utils_1.isNewExpression)(node)) {\n        if ((0, node_utils_1.isPromiseIdentifier)(node.callee)) {\n          context.report({\n            node: originalNode !== null && originalNode !== void 0 ? originalNode : node,\n            messageId: 'noPromiseInFireEvent'\n          });\n          return;\n        }\n      }\n\n      if ((0, node_utils_1.isCallExpression)(node)) {\n        const domElementIdentifier = (0, node_utils_1.getDeepestIdentifierNode)(node);\n\n        if (!domElementIdentifier) {\n          return;\n        }\n\n        if (helpers.isAsyncQuery(domElementIdentifier) || (0, node_utils_1.isPromiseIdentifier)(domElementIdentifier)) {\n          context.report({\n            node: originalNode !== null && originalNode !== void 0 ? originalNode : node,\n            messageId: 'noPromiseInFireEvent'\n          });\n          return;\n        }\n      }\n\n      if (utils_1.ASTUtils.isIdentifier(node)) {\n        const nodeVariable = utils_1.ASTUtils.findVariable(context.getScope(), node.name);\n\n        if (!nodeVariable) {\n          return;\n        }\n\n        for (const definition of nodeVariable.defs) {\n          const variableDeclarator = definition.node;\n\n          if (variableDeclarator.init) {\n            checkSuspiciousNode(variableDeclarator.init, node);\n          }\n        }\n      }\n    }\n\n    return {\n      'CallExpression Identifier'(node) {\n        if (!helpers.isFireEventMethod(node)) {\n          return;\n        }\n\n        const closestCallExpression = (0, node_utils_1.findClosestCallExpressionNode)(node, true);\n\n        if (!closestCallExpression) {\n          return;\n        }\n\n        const domElementArgument = closestCallExpression.arguments[0];\n        checkSuspiciousNode(domElementArgument);\n      }\n\n    };\n  }\n\n});","map":{"version":3,"names":["Object","defineProperty","exports","value","RULE_NAME","utils_1","require","create_testing_library_rule_1","node_utils_1","default","createTestingLibraryRule","name","meta","type","docs","description","recommendedConfig","dom","angular","react","vue","marko","messages","noPromiseInFireEvent","schema","defaultOptions","create","context","_","helpers","checkSuspiciousNode","node","originalNode","ASTUtils","isAwaitExpression","isNewExpression","isPromiseIdentifier","callee","report","messageId","isCallExpression","domElementIdentifier","getDeepestIdentifierNode","isAsyncQuery","isIdentifier","nodeVariable","findVariable","getScope","definition","defs","variableDeclarator","init","isFireEventMethod","closestCallExpression","findClosestCallExpressionNode","domElementArgument","arguments"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/eslint-plugin-testing-library/rules/no-promise-in-fire-event.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RULE_NAME = void 0;\nconst utils_1 = require(\"@typescript-eslint/utils\");\nconst create_testing_library_rule_1 = require(\"../create-testing-library-rule\");\nconst node_utils_1 = require(\"../node-utils\");\nexports.RULE_NAME = 'no-promise-in-fire-event';\nexports.default = (0, create_testing_library_rule_1.createTestingLibraryRule)({\n    name: exports.RULE_NAME,\n    meta: {\n        type: 'problem',\n        docs: {\n            description: 'Disallow the use of promises passed to a `fireEvent` method',\n            recommendedConfig: {\n                dom: 'error',\n                angular: 'error',\n                react: 'error',\n                vue: 'error',\n                marko: 'error',\n            },\n        },\n        messages: {\n            noPromiseInFireEvent: \"A promise shouldn't be passed to a `fireEvent` method, instead pass the DOM element\",\n        },\n        schema: [],\n    },\n    defaultOptions: [],\n    create(context, _, helpers) {\n        function checkSuspiciousNode(node, originalNode) {\n            if (utils_1.ASTUtils.isAwaitExpression(node)) {\n                return;\n            }\n            if ((0, node_utils_1.isNewExpression)(node)) {\n                if ((0, node_utils_1.isPromiseIdentifier)(node.callee)) {\n                    context.report({\n                        node: originalNode !== null && originalNode !== void 0 ? originalNode : node,\n                        messageId: 'noPromiseInFireEvent',\n                    });\n                    return;\n                }\n            }\n            if ((0, node_utils_1.isCallExpression)(node)) {\n                const domElementIdentifier = (0, node_utils_1.getDeepestIdentifierNode)(node);\n                if (!domElementIdentifier) {\n                    return;\n                }\n                if (helpers.isAsyncQuery(domElementIdentifier) ||\n                    (0, node_utils_1.isPromiseIdentifier)(domElementIdentifier)) {\n                    context.report({\n                        node: originalNode !== null && originalNode !== void 0 ? originalNode : node,\n                        messageId: 'noPromiseInFireEvent',\n                    });\n                    return;\n                }\n            }\n            if (utils_1.ASTUtils.isIdentifier(node)) {\n                const nodeVariable = utils_1.ASTUtils.findVariable(context.getScope(), node.name);\n                if (!nodeVariable) {\n                    return;\n                }\n                for (const definition of nodeVariable.defs) {\n                    const variableDeclarator = definition.node;\n                    if (variableDeclarator.init) {\n                        checkSuspiciousNode(variableDeclarator.init, node);\n                    }\n                }\n            }\n        }\n        return {\n            'CallExpression Identifier'(node) {\n                if (!helpers.isFireEventMethod(node)) {\n                    return;\n                }\n                const closestCallExpression = (0, node_utils_1.findClosestCallExpressionNode)(node, true);\n                if (!closestCallExpression) {\n                    return;\n                }\n                const domElementArgument = closestCallExpression.arguments[0];\n                checkSuspiciousNode(domElementArgument);\n            },\n        };\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}