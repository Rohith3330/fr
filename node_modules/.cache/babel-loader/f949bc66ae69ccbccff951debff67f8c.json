{"ast":null,"code":"/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\nconst chalk = require('chalk');\n\nconst path = require('path');\n\nconst os = require('os');\n\nclass ModuleScopePlugin {\n  constructor(appSrc) {\n    let allowedFiles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    this.appSrcs = Array.isArray(appSrc) ? appSrc : [appSrc];\n    this.allowedFiles = new Set(allowedFiles);\n    this.allowedPaths = [...allowedFiles].map(path.dirname).filter(p => path.relative(p, process.cwd()) !== '');\n  }\n\n  apply(resolver) {\n    const {\n      appSrcs\n    } = this;\n    resolver.hooks.file.tapAsync('ModuleScopePlugin', (request, contextResolver, callback) => {\n      // Unknown issuer, probably webpack internals\n      if (!request.context.issuer) {\n        return callback();\n      }\n\n      if ( // If this resolves to a node_module, we don't care what happens next\n      request.descriptionFileRoot.indexOf('/node_modules/') !== -1 || request.descriptionFileRoot.indexOf('\\\\node_modules\\\\') !== -1 || // Make sure this request was manual\n      !request.__innerRequest_request) {\n        return callback();\n      } // Resolve the issuer from our appSrc and make sure it's one of our files\n      // Maybe an indexOf === 0 would be better?\n\n\n      if (appSrcs.every(appSrc => {\n        const relative = path.relative(appSrc, request.context.issuer); // If it's not in one of our app src or a subdirectory, not our request!\n\n        return relative.startsWith('../') || relative.startsWith('..\\\\');\n      })) {\n        return callback();\n      }\n\n      const requestFullPath = path.resolve(path.dirname(request.context.issuer), request.__innerRequest_request);\n\n      if (this.allowedFiles.has(requestFullPath)) {\n        return callback();\n      }\n\n      if (this.allowedPaths.some(allowedFile => {\n        return requestFullPath.startsWith(allowedFile);\n      })) {\n        return callback();\n      } // Find path from src to the requested file\n      // Error if in a parent directory of all given appSrcs\n\n\n      if (appSrcs.every(appSrc => {\n        const requestRelative = path.relative(appSrc, requestFullPath);\n        return requestRelative.startsWith('../') || requestRelative.startsWith('..\\\\');\n      })) {\n        const scopeError = new Error(`You attempted to import ${chalk.cyan(request.__innerRequest_request)} which falls outside of the project ${chalk.cyan('src/')} directory. ` + `Relative imports outside of ${chalk.cyan('src/')} are not supported.` + os.EOL + `You can either move it inside ${chalk.cyan('src/')}, or add a symlink to it from project's ${chalk.cyan('node_modules/')}.`);\n        Object.defineProperty(scopeError, '__module_scope_plugin', {\n          value: true,\n          writable: false,\n          enumerable: false\n        });\n        callback(scopeError, request);\n      } else {\n        callback();\n      }\n    });\n  }\n\n}\n\nmodule.exports = ModuleScopePlugin;","map":{"version":3,"names":["chalk","require","path","os","ModuleScopePlugin","constructor","appSrc","allowedFiles","appSrcs","Array","isArray","Set","allowedPaths","map","dirname","filter","p","relative","process","cwd","apply","resolver","hooks","file","tapAsync","request","contextResolver","callback","context","issuer","descriptionFileRoot","indexOf","__innerRequest_request","every","startsWith","requestFullPath","resolve","has","some","allowedFile","requestRelative","scopeError","Error","cyan","EOL","Object","defineProperty","value","writable","enumerable","module","exports"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/react-dev-utils/ModuleScopePlugin.js"],"sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nconst chalk = require('chalk');\nconst path = require('path');\nconst os = require('os');\n\nclass ModuleScopePlugin {\n  constructor(appSrc, allowedFiles = []) {\n    this.appSrcs = Array.isArray(appSrc) ? appSrc : [appSrc];\n    this.allowedFiles = new Set(allowedFiles);\n    this.allowedPaths = [...allowedFiles].map(path.dirname).filter(p => path.relative(p, process.cwd()) !== '');\n  }\n\n  apply(resolver) {\n    const { appSrcs } = this;\n    resolver.hooks.file.tapAsync(\n      'ModuleScopePlugin',\n      (request, contextResolver, callback) => {\n        // Unknown issuer, probably webpack internals\n        if (!request.context.issuer) {\n          return callback();\n        }\n        if (\n          // If this resolves to a node_module, we don't care what happens next\n          request.descriptionFileRoot.indexOf('/node_modules/') !== -1 ||\n          request.descriptionFileRoot.indexOf('\\\\node_modules\\\\') !== -1 ||\n          // Make sure this request was manual\n          !request.__innerRequest_request\n        ) {\n          return callback();\n        }\n        // Resolve the issuer from our appSrc and make sure it's one of our files\n        // Maybe an indexOf === 0 would be better?\n        if (\n          appSrcs.every(appSrc => {\n            const relative = path.relative(appSrc, request.context.issuer);\n            // If it's not in one of our app src or a subdirectory, not our request!\n            return relative.startsWith('../') || relative.startsWith('..\\\\');\n          })\n        ) {\n          return callback();\n        }\n        const requestFullPath = path.resolve(\n          path.dirname(request.context.issuer),\n          request.__innerRequest_request\n        );\n        if (this.allowedFiles.has(requestFullPath)) {\n          return callback();\n        }\n        if (this.allowedPaths.some((allowedFile) => {\n          return requestFullPath.startsWith(allowedFile);\n        })) {\n          return callback();\n        }\n        // Find path from src to the requested file\n        // Error if in a parent directory of all given appSrcs\n        if (\n          appSrcs.every(appSrc => {\n            const requestRelative = path.relative(appSrc, requestFullPath);\n            return (\n              requestRelative.startsWith('../') ||\n              requestRelative.startsWith('..\\\\')\n            );\n          })\n        ) {\n          const scopeError = new Error(\n            `You attempted to import ${chalk.cyan(\n              request.__innerRequest_request\n            )} which falls outside of the project ${chalk.cyan(\n              'src/'\n            )} directory. ` +\n              `Relative imports outside of ${chalk.cyan(\n                'src/'\n              )} are not supported.` +\n              os.EOL +\n              `You can either move it inside ${chalk.cyan(\n                'src/'\n              )}, or add a symlink to it from project's ${chalk.cyan(\n                'node_modules/'\n              )}.`\n          );\n          Object.defineProperty(scopeError, '__module_scope_plugin', {\n            value: true,\n            writable: false,\n            enumerable: false,\n          });\n          callback(scopeError, request);\n        } else {\n          callback();\n        }\n      }\n    );\n  }\n}\n\nmodule.exports = ModuleScopePlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}