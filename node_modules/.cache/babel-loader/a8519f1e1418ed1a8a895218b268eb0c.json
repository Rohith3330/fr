{"ast":null,"code":"const Img = require(\"../models/imodel\");\n\nconst asyncHandler = require('express-async-handler');\n\nconst retriveIMG = asyncHandler(async (req, res) => {\n  try {\n    const name = req.body.name;\n    req.body.img = req.file.path;\n    const img = req.body.img;\n    console.log(req.body); // const photo = req.file.filename  \n\n    const newUserData = {\n      name,\n      img\n    };\n    const newUser = new Img(newUserData);\n    const createStudent = await newUser.save();\n    res.status(201).send(createStudent); // newUser.save()\n    //        .then(() => res.json(newUser))\n    //        .catch(err => res.status(400).json('Error: ' + err));\n    // }\n    // res.send(students);\n  } catch (err) {\n    res.status(400).send({\n      error: err\n    });\n  }\n});\nconst getIMG = asyncHandler(async (req, res) => {\n  console.log(\"Here1\");\n  console.log(req.body);\n  const {\n    name\n  } = req.body;\n  const User = await Img.findOne({\n    name\n  });\n\n  if (User) {\n    res.json({\n      _id: User._id,\n      name: User.name,\n      img: User.img\n    });\n  } else {\n    res.status(401);\n    throw new Error(\"Invalid email or password!\");\n  }\n});\nmodule.exports = {\n  retriveIMG,\n  getIMG\n};","map":{"version":3,"names":["Img","require","asyncHandler","retriveIMG","req","res","name","body","img","file","path","console","log","newUserData","newUser","createStudent","save","status","send","err","error","getIMG","User","findOne","json","_id","Error","module","exports"],"sources":["C:/Users/Rohith/mern/backend/controllers/imgcontroller.js"],"sourcesContent":["const Img = require(\"../models/imodel\")\r\nconst asyncHandler=require('express-async-handler');\r\n\r\nconst retriveIMG=asyncHandler(async(req,res)=>{\r\n    try {\r\n        const name = req.body.name;\r\n        req.body.img = req.file.path;\r\n        const img = req.body.img;\r\n        console.log(req.body);\r\n        // const photo = req.file.filename  \r\n        const newUserData = {\r\n            name,\r\n            img,\r\n        }\r\n    \r\n        const newUser = new Img(newUserData);\r\n        const createStudent = await newUser.save();\r\n        res.status(201).send(createStudent);\r\n        // newUser.save()\r\n        //        .then(() => res.json(newUser))\r\n        //        .catch(err => res.status(400).json('Error: ' + err));\r\n        // }\r\n        // res.send(students);\r\n    }\r\n      catch(err) {\r\n        res.status(400).send({ error: err });\r\n      }\r\n}\r\n)\r\nconst getIMG=asyncHandler(async(req,res)=>{\r\n    console.log(\"Here1\");\r\n    console.log(req.body);\r\n    const {name}=req.body;\r\n\r\n    const User=await Img.findOne({name});\r\n    \r\n    if(User){\r\n        res.json({\r\n            _id:User._id,\r\n            name:User.name,\r\n            img:User.img,\r\n        });\r\n    }\r\n    else{\r\n        res.status(401);\r\n        throw new Error(\"Invalid email or password!\");\r\n    }\r\n});\r\n\r\nmodule.exports={retriveIMG,getIMG}"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,kBAAD,CAAnB;;AACA,MAAMC,YAAY,GAACD,OAAO,CAAC,uBAAD,CAA1B;;AAEA,MAAME,UAAU,GAACD,YAAY,CAAC,OAAME,GAAN,EAAUC,GAAV,KAAgB;EAC1C,IAAI;IACA,MAAMC,IAAI,GAAGF,GAAG,CAACG,IAAJ,CAASD,IAAtB;IACAF,GAAG,CAACG,IAAJ,CAASC,GAAT,GAAeJ,GAAG,CAACK,IAAJ,CAASC,IAAxB;IACA,MAAMF,GAAG,GAAGJ,GAAG,CAACG,IAAJ,CAASC,GAArB;IACAG,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACG,IAAhB,EAJA,CAKA;;IACA,MAAMM,WAAW,GAAG;MAChBP,IADgB;MAEhBE;IAFgB,CAApB;IAKA,MAAMM,OAAO,GAAG,IAAId,GAAJ,CAAQa,WAAR,CAAhB;IACA,MAAME,aAAa,GAAG,MAAMD,OAAO,CAACE,IAAR,EAA5B;IACAX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,aAArB,EAbA,CAcA;IACA;IACA;IACA;IACA;EACH,CAnBD,CAoBE,OAAMI,GAAN,EAAW;IACTd,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEE,KAAK,EAAED;IAAT,CAArB;EACD;AACN,CAxB4B,CAA7B;AA0BA,MAAME,MAAM,GAACnB,YAAY,CAAC,OAAME,GAAN,EAAUC,GAAV,KAAgB;EACtCM,OAAO,CAACC,GAAR,CAAY,OAAZ;EACAD,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACG,IAAhB;EACA,MAAM;IAACD;EAAD,IAAOF,GAAG,CAACG,IAAjB;EAEA,MAAMe,IAAI,GAAC,MAAMtB,GAAG,CAACuB,OAAJ,CAAY;IAACjB;EAAD,CAAZ,CAAjB;;EAEA,IAAGgB,IAAH,EAAQ;IACJjB,GAAG,CAACmB,IAAJ,CAAS;MACLC,GAAG,EAACH,IAAI,CAACG,GADJ;MAELnB,IAAI,EAACgB,IAAI,CAAChB,IAFL;MAGLE,GAAG,EAACc,IAAI,CAACd;IAHJ,CAAT;EAKH,CAND,MAOI;IACAH,GAAG,CAACY,MAAJ,CAAW,GAAX;IACA,MAAM,IAAIS,KAAJ,CAAU,4BAAV,CAAN;EACH;AACJ,CAlBwB,CAAzB;AAoBAC,MAAM,CAACC,OAAP,GAAe;EAACzB,UAAD;EAAYkB;AAAZ,CAAf"},"metadata":{},"sourceType":"script"}