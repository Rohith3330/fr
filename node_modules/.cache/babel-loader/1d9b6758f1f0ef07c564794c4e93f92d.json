{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nvar _types = require('./types');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass Farm {\n  constructor(numOfWorkers, callback, computeWorkerKey) {\n    _defineProperty(this, '_computeWorkerKey', void 0);\n\n    _defineProperty(this, '_cacheKeys', void 0);\n\n    _defineProperty(this, '_callback', void 0);\n\n    _defineProperty(this, '_last', void 0);\n\n    _defineProperty(this, '_locks', void 0);\n\n    _defineProperty(this, '_numOfWorkers', void 0);\n\n    _defineProperty(this, '_offset', void 0);\n\n    _defineProperty(this, '_queue', void 0);\n\n    this._cacheKeys = Object.create(null);\n    this._callback = callback;\n    this._last = [];\n    this._locks = [];\n    this._numOfWorkers = numOfWorkers;\n    this._offset = 0;\n    this._queue = [];\n\n    if (computeWorkerKey) {\n      this._computeWorkerKey = computeWorkerKey;\n    }\n  }\n\n  doWork(method) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    const customMessageListeners = new Set();\n\n    const addCustomMessageListener = listener => {\n      customMessageListeners.add(listener);\n      return () => {\n        customMessageListeners.delete(listener);\n      };\n    };\n\n    const onCustomMessage = message => {\n      customMessageListeners.forEach(listener => listener(message));\n    };\n\n    const promise = new Promise((resolve, reject) => {\n      const computeWorkerKey = this._computeWorkerKey;\n      const request = [_types.CHILD_MESSAGE_CALL, false, method, args];\n      let worker = null;\n      let hash = null;\n\n      if (computeWorkerKey) {\n        hash = computeWorkerKey.call(this, method, ...args);\n        worker = hash == null ? null : this._cacheKeys[hash];\n      }\n\n      const onStart = worker => {\n        if (hash != null) {\n          this._cacheKeys[hash] = worker;\n        }\n      };\n\n      const onEnd = (error, result) => {\n        customMessageListeners.clear();\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      };\n\n      const task = {\n        onCustomMessage,\n        onEnd,\n        onStart,\n        request\n      };\n\n      if (worker) {\n        this._enqueue(task, worker.getWorkerId());\n      } else {\n        this._push(task);\n      }\n    });\n    promise.UNSTABLE_onCustomMessage = addCustomMessageListener;\n    return promise;\n  }\n\n  _getNextTask(workerId) {\n    let queueHead = this._queue[workerId];\n\n    while (queueHead && queueHead.task.request[1]) {\n      queueHead = queueHead.next || null;\n    }\n\n    this._queue[workerId] = queueHead;\n    return queueHead && queueHead.task;\n  }\n\n  _process(workerId) {\n    if (this._isLocked(workerId)) {\n      return this;\n    }\n\n    const task = this._getNextTask(workerId);\n\n    if (!task) {\n      return this;\n    }\n\n    const onEnd = (error, result) => {\n      task.onEnd(error, result);\n\n      this._unlock(workerId);\n\n      this._process(workerId);\n    };\n\n    task.request[1] = true;\n\n    this._lock(workerId);\n\n    this._callback(workerId, task.request, task.onStart, onEnd, task.onCustomMessage);\n\n    return this;\n  }\n\n  _enqueue(task, workerId) {\n    const item = {\n      next: null,\n      task\n    };\n\n    if (task.request[1]) {\n      return this;\n    }\n\n    if (this._queue[workerId]) {\n      this._last[workerId].next = item;\n    } else {\n      this._queue[workerId] = item;\n    }\n\n    this._last[workerId] = item;\n\n    this._process(workerId);\n\n    return this;\n  }\n\n  _push(task) {\n    for (let i = 0; i < this._numOfWorkers; i++) {\n      this._enqueue(task, (this._offset + i) % this._numOfWorkers);\n    }\n\n    this._offset++;\n    return this;\n  }\n\n  _lock(workerId) {\n    this._locks[workerId] = true;\n  }\n\n  _unlock(workerId) {\n    this._locks[workerId] = false;\n  }\n\n  _isLocked(workerId) {\n    return this._locks[workerId];\n  }\n\n}\n\nexports.default = Farm;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_types","require","_defineProperty","obj","key","enumerable","configurable","writable","Farm","constructor","numOfWorkers","callback","computeWorkerKey","_cacheKeys","create","_callback","_last","_locks","_numOfWorkers","_offset","_queue","_computeWorkerKey","doWork","method","args","customMessageListeners","Set","addCustomMessageListener","listener","add","delete","onCustomMessage","message","forEach","promise","Promise","resolve","reject","request","CHILD_MESSAGE_CALL","worker","hash","call","onStart","onEnd","error","result","clear","task","_enqueue","getWorkerId","_push","UNSTABLE_onCustomMessage","_getNextTask","workerId","queueHead","next","_process","_isLocked","_unlock","_lock","item","i"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/rollup-plugin-terser/node_modules/jest-worker/build/Farm.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nvar _types = require('./types');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nclass Farm {\n  constructor(numOfWorkers, callback, computeWorkerKey) {\n    _defineProperty(this, '_computeWorkerKey', void 0);\n\n    _defineProperty(this, '_cacheKeys', void 0);\n\n    _defineProperty(this, '_callback', void 0);\n\n    _defineProperty(this, '_last', void 0);\n\n    _defineProperty(this, '_locks', void 0);\n\n    _defineProperty(this, '_numOfWorkers', void 0);\n\n    _defineProperty(this, '_offset', void 0);\n\n    _defineProperty(this, '_queue', void 0);\n\n    this._cacheKeys = Object.create(null);\n    this._callback = callback;\n    this._last = [];\n    this._locks = [];\n    this._numOfWorkers = numOfWorkers;\n    this._offset = 0;\n    this._queue = [];\n\n    if (computeWorkerKey) {\n      this._computeWorkerKey = computeWorkerKey;\n    }\n  }\n\n  doWork(method, ...args) {\n    const customMessageListeners = new Set();\n\n    const addCustomMessageListener = listener => {\n      customMessageListeners.add(listener);\n      return () => {\n        customMessageListeners.delete(listener);\n      };\n    };\n\n    const onCustomMessage = message => {\n      customMessageListeners.forEach(listener => listener(message));\n    };\n\n    const promise = new Promise((resolve, reject) => {\n      const computeWorkerKey = this._computeWorkerKey;\n      const request = [_types.CHILD_MESSAGE_CALL, false, method, args];\n      let worker = null;\n      let hash = null;\n\n      if (computeWorkerKey) {\n        hash = computeWorkerKey.call(this, method, ...args);\n        worker = hash == null ? null : this._cacheKeys[hash];\n      }\n\n      const onStart = worker => {\n        if (hash != null) {\n          this._cacheKeys[hash] = worker;\n        }\n      };\n\n      const onEnd = (error, result) => {\n        customMessageListeners.clear();\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      };\n\n      const task = {\n        onCustomMessage,\n        onEnd,\n        onStart,\n        request\n      };\n\n      if (worker) {\n        this._enqueue(task, worker.getWorkerId());\n      } else {\n        this._push(task);\n      }\n    });\n    promise.UNSTABLE_onCustomMessage = addCustomMessageListener;\n    return promise;\n  }\n\n  _getNextTask(workerId) {\n    let queueHead = this._queue[workerId];\n\n    while (queueHead && queueHead.task.request[1]) {\n      queueHead = queueHead.next || null;\n    }\n\n    this._queue[workerId] = queueHead;\n    return queueHead && queueHead.task;\n  }\n\n  _process(workerId) {\n    if (this._isLocked(workerId)) {\n      return this;\n    }\n\n    const task = this._getNextTask(workerId);\n\n    if (!task) {\n      return this;\n    }\n\n    const onEnd = (error, result) => {\n      task.onEnd(error, result);\n\n      this._unlock(workerId);\n\n      this._process(workerId);\n    };\n\n    task.request[1] = true;\n\n    this._lock(workerId);\n\n    this._callback(\n      workerId,\n      task.request,\n      task.onStart,\n      onEnd,\n      task.onCustomMessage\n    );\n\n    return this;\n  }\n\n  _enqueue(task, workerId) {\n    const item = {\n      next: null,\n      task\n    };\n\n    if (task.request[1]) {\n      return this;\n    }\n\n    if (this._queue[workerId]) {\n      this._last[workerId].next = item;\n    } else {\n      this._queue[workerId] = item;\n    }\n\n    this._last[workerId] = item;\n\n    this._process(workerId);\n\n    return this;\n  }\n\n  _push(task) {\n    for (let i = 0; i < this._numOfWorkers; i++) {\n      this._enqueue(task, (this._offset + i) % this._numOfWorkers);\n    }\n\n    this._offset++;\n    return this;\n  }\n\n  _lock(workerId) {\n    this._locks[workerId] = true;\n  }\n\n  _unlock(workerId) {\n    this._locks[workerId] = false;\n  }\n\n  _isLocked(workerId) {\n    return this._locks[workerId];\n  }\n}\n\nexports.default = Farm;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}