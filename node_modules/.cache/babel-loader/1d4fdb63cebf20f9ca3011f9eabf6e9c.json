{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Rohith/mern/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Form,Button,Row,Col}from'react-bootstrap';import{Link}from'react-router-dom';import MainScreen from'../../components/MainScreen';import'./Loginpage.css';import axios from'axios';import Loading from'../../components/Loading';import ErrorMessage from'../../components/ErrorMessage';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Loginpage=function Loginpage(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setid=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),homepage=_useState14[0],setHome=_useState14[1];useEffect(function(){},[]);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;config={baseURL:\"//localhost:5000\",origin:true,withCredentials:false,headers:{\"Content-type\":\"application/json\"}};setLoading(true);console.log(email);console.log(password);_context.next=8;return axios.post(\"/api/users/login\",{email:email,password:password},config);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(\"debug\");console.log(data);localStorage.setItem('UserInfo',JSON.stringify(data));setLoading(false);setHome(true);setid(data._id);_context.next=24;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);setError(_context.t0.response);setLoading(false);setMessage(_context.t0.response.data.message);console.log(_context.t0.response.data);case 24:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(MainScreen,{title:\"LOGIN\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[loading&&/*#__PURE__*/_jsx(Loading,{}),message&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:message}),homepage&&id&&navigate(\"/view/\".concat(id)),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"emaill\",children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,placeholder:\"Enter email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"New Customer ? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register Here\"})]})})]})});};export default Loginpage;","map":{"version":3,"names":["React","useEffect","useState","Form","Button","Row","Col","Link","MainScreen","axios","Loading","ErrorMessage","useNavigate","Loginpage","navigate","email","setEmail","id","setid","message","setMessage","password","setPassword","error","setError","loading","setLoading","homepage","setHome","submitHandler","e","preventDefault","config","baseURL","origin","withCredentials","headers","console","log","post","data","localStorage","setItem","JSON","stringify","_id","response","target","value"],"sources":["C:/Users/Rohith/mern/frontend/src/screens/LoginPage/Loginpage.js"],"sourcesContent":["import React, { useEffect, useState} from 'react'\r\nimport {Form,Button,Row,Col} from 'react-bootstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport MainScreen from '../../components/MainScreen';\r\nimport './Loginpage.css';\r\nimport axios from 'axios';\r\nimport Loading from '../../components/Loading';\r\nimport ErrorMessage from '../../components/ErrorMessage';\r\nimport {useNavigate} from 'react-router-dom';\r\nconst Loginpage = () => {\r\n    const navigate=useNavigate();\r\n    const [email,setEmail]=useState(\"\");\r\n    const [id,setid]=useState(\"\");\r\n    const [message, setMessage] = useState(null);\r\n    const [password,setPassword]=useState(\"\");\r\n    const [error,setError]=useState(false);\r\n    const [loading,setLoading]=useState(false);\r\n    const[homepage,setHome]=useState(false);\r\n    useEffect(()=>{\r\n\r\n    },[])\r\n    const submitHandler= async(e)=>{\r\n        e.preventDefault();\r\n\r\n        try{\r\n            const config={\r\n              baseURL: \"//localhost:5000\",\r\n              origin: true,\r\n              withCredentials: false,\r\n              headers:{\r\n                \"Content-type\":\"application/json\"\r\n              }\r\n            }\r\n            setLoading(true);\r\n            \r\n            console.log(email);\r\n            console.log(password);\r\n            const { data } = await axios.post(\"/api/users/login\",\r\n            {\r\n                email,\r\n                password,  \r\n            },\r\n            config  \r\n            );\r\n            console.log(\"debug\")\r\n            console.log(data);\r\n            localStorage.setItem('UserInfo',JSON.stringify(data));\r\n            setLoading(false);\r\n            setHome(true);\r\n            setid(data._id);\r\n        }\r\n        catch(error){\r\n            setError(error.response);\r\n            setLoading(false);\r\n            setMessage(error.response.data.message)\r\n            console.log(error.response.data);\r\n        }\r\n      }\r\n  return (\r\n\r\n    <MainScreen title=\"LOGIN\">\r\n         <div className=\"loginContainer\">\r\n            {loading && <Loading/>}\r\n            {/* {error && <ErrorMessage/>} */}\r\n            {message && <ErrorMessage variant='danger'>{message}</ErrorMessage>}\r\n            {homepage && id && navigate(`/view/${id}`)}\r\n        <Form onSubmit={submitHandler}>\r\n          <Form.Group controlId=\"formBasicEmail\">\r\n            <Form.Label className='emaill'>Email address</Form.Label>\r\n            <Form.Control\r\n              type=\"email\"\r\n              value={email}\r\n              placeholder=\"Enter email\"\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"formBasicPassword\">\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              value={password}\r\n              placeholder=\"Password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Button variant=\"primary\" type=\"submit\">\r\n            Log In\r\n          </Button>\r\n        </Form>\r\n        <Row className=\"py-3\">\r\n          <Col>\r\n            New Customer ? <Link to=\"/register\">Register Here</Link>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </MainScreen>\r\n  )\r\n}\r\n\r\nexport default Loginpage"],"mappings":"yWAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,OAAQC,IAAR,CAAaC,MAAb,CAAoBC,GAApB,CAAwBC,GAAxB,KAAkC,iBAAlC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,WAAP,KAAuB,6BAAvB,CACA,MAAO,iBAAP,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,QAAP,KAAoB,0BAApB,CACA,MAAOC,aAAP,KAAyB,+BAAzB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,wFACA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACpB,GAAMC,SAAQ,CAACF,WAAW,EAA1B,CACA,cAAuBV,QAAQ,CAAC,EAAD,CAA/B,wCAAOa,KAAP,eAAaC,QAAb,eACA,eAAiBd,QAAQ,CAAC,EAAD,CAAzB,yCAAOe,EAAP,eAAUC,KAAV,eACA,eAA8BhB,QAAQ,CAAC,IAAD,CAAtC,yCAAOiB,OAAP,eAAgBC,UAAhB,eACA,eAA6BlB,QAAQ,CAAC,EAAD,CAArC,yCAAOmB,QAAP,eAAgBC,WAAhB,eACA,eAAuBpB,QAAQ,CAAC,KAAD,CAA/B,0CAAOqB,KAAP,gBAAaC,QAAb,gBACA,gBAA2BtB,QAAQ,CAAC,KAAD,CAAnC,2CAAOuB,OAAP,gBAAeC,UAAf,gBACA,gBAAwBxB,QAAQ,CAAC,KAAD,CAAhC,2CAAMyB,QAAN,gBAAeC,OAAf,gBACA3B,SAAS,CAAC,UAAI,CAEb,CAFQ,CAEP,EAFO,CAAT,CAGA,GAAM4B,cAAa,4FAAE,iBAAMC,CAAN,sJACjBA,CAAC,CAACC,cAAF,GADiB,gBAIPC,MAJO,CAIA,CACXC,OAAO,CAAE,kBADE,CAEXC,MAAM,CAAE,IAFG,CAGXC,eAAe,CAAE,KAHN,CAIXC,OAAO,CAAC,CACN,eAAe,kBADT,CAJG,CAJA,CAYbV,UAAU,CAAC,IAAD,CAAV,CAEAW,OAAO,CAACC,GAAR,CAAYvB,KAAZ,EACAsB,OAAO,CAACC,GAAR,CAAYjB,QAAZ,EAfa,sBAgBUZ,MAAK,CAAC8B,IAAN,CAAW,kBAAX,CACvB,CACIxB,KAAK,CAALA,KADJ,CAEIM,QAAQ,CAARA,QAFJ,CADuB,CAKvBW,MALuB,CAhBV,wCAgBLQ,IAhBK,mBAgBLA,IAhBK,CAuBbH,OAAO,CAACC,GAAR,CAAY,OAAZ,EACAD,OAAO,CAACC,GAAR,CAAYE,IAAZ,EACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAgCC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAhC,EACAd,UAAU,CAAC,KAAD,CAAV,CACAE,OAAO,CAAC,IAAD,CAAP,CACAV,KAAK,CAACsB,IAAI,CAACK,GAAN,CAAL,CA5Ba,iFA+BbrB,QAAQ,CAAC,YAAMsB,QAAP,CAAR,CACApB,UAAU,CAAC,KAAD,CAAV,CACAN,UAAU,CAAC,YAAM0B,QAAN,CAAeN,IAAf,CAAoBrB,OAArB,CAAV,CACAkB,OAAO,CAACC,GAAR,CAAY,YAAMQ,QAAN,CAAeN,IAA3B,EAlCa,qEAAF,kBAAbX,cAAa,4CAAnB,CAqCF,mBAEE,KAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,uBACK,aAAK,SAAS,CAAC,gBAAf,WACIJ,OAAO,eAAI,KAAC,OAAD,IADf,CAGIN,OAAO,eAAI,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAgCA,OAAhC,EAHf,CAIIQ,QAAQ,EAAIV,EAAZ,EAAkBH,QAAQ,iBAAUG,EAAV,EAJ9B,cAKD,MAAC,IAAD,EAAM,QAAQ,CAAEY,aAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,gBAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,QAAtB,2BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAEd,KAFT,CAGE,WAAW,CAAC,aAHd,CAIE,QAAQ,CAAE,kBAACe,CAAD,QAAOd,SAAQ,CAACc,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAf,EAJZ,EAFF,GADF,cAWE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,mBAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAE3B,QAFT,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAE,kBAACS,CAAD,QAAOR,YAAW,CAACQ,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAlB,EAJZ,EAFF,GAXF,cAoBE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,oBApBF,GALC,cA6BD,KAAC,GAAD,EAAK,SAAS,CAAC,MAAf,uBACE,MAAC,GAAD,2CACiB,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,2BADjB,GADF,EA7BC,GADL,EAFF,CAwCD,CAzFD,CA2FA,cAAenC,UAAf"},"metadata":{},"sourceType":"module"}