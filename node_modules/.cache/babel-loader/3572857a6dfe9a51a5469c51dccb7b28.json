{"ast":null,"code":"'use strict';\n\nvar CleanCSS = require('clean-css');\n\nvar decode = require('he').decode;\n\nvar HTMLParser = require('./htmlparser').HTMLParser;\n\nvar endTag = require('./htmlparser').endTag;\n\nvar RelateUrl = require('relateurl');\n\nvar TokenChain = require('./tokenchain');\n\nvar Terser = require('terser');\n\nvar utils = require('./utils');\n\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\n\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\n\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '',\n      lineBreakAfter = '';\n\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function () {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function () {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function (spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function (spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n\n  return lineBreakBefore + str + lineBreakAfter;\n}\n\nvar createMapFromString = utils.createMapFromString; // non-empty tags that will maintain whitespace around them\n\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var'); // non-empty tags that will maintain whitespace within them\n\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var'); // self-closing tags that will maintain whitespace around them\n\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\n\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\n\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\n\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  return /^on[a-z]{3,}$/.test(attrName);\n}\n\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\n\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n  return tag === 'script' && attrName === 'language' && attrValue === 'javascript' || tag === 'form' && attrName === 'method' && attrValue === 'get' || tag === 'input' && attrName === 'type' && attrValue === 'text' || tag === 'script' && attrName === 'charset' && !attributesInclude(attrs, 'src') || tag === 'a' && attrName === 'name' && attributesInclude(attrs, 'id') || tag === 'area' && attrName === 'shape' && attrValue === 'rect';\n} // https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\n\n\nvar executableScriptsMimetypes = utils.createMap(['text/javascript', 'text/ecmascript', 'text/jscript', 'application/javascript', 'application/x-javascript', 'application/ecmascript', 'module']);\nvar keepScriptsMimetypes = utils.createMap(['module']);\n\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\n\nfunction keepScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return keepScriptsMimetypes(attrValue);\n}\n\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n\n  return true;\n}\n\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\n\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n\n  return true;\n}\n\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\n\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\n\nfunction isUriTypeAttribute(attrName, tag) {\n  return /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' || tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) || tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) || tag === 'q' && attrName === 'cite' || tag === 'blockquote' && attrName === 'cite' || (tag === 'ins' || tag === 'del') && attrName === 'cite' || tag === 'form' && attrName === 'action' || tag === 'input' && (attrName === 'src' || attrName === 'usemap') || tag === 'head' && attrName === 'profile' || tag === 'script' && (attrName === 'src' || attrName === 'for');\n}\n\nfunction isNumberTypeAttribute(attrName, tag) {\n  return /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' || tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') || tag === 'select' && (attrName === 'size' || attrName === 'tabindex') || tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) || tag === 'colgroup' && attrName === 'span' || tag === 'col' && attrName === 'span' || (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan');\n}\n\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\n\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\n\nvar srcsetTags = createMapFromString('img,source');\n\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\n\nasync function cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return await options.minifyJS(attrValue, true);\n  } else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    } else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n\n    return attrValue;\n  } else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  } else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  } else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n\n    return attrValue;\n  } else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function (candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  } else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function (numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  } else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  } else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = trimWhitespace(attrValue.replace(/ ?[\\n\\r]+ ?/g, '').replace(/\\s{2,}/g, options.conservativeCollapse ? ' ' : ''));\n  } else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  } else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n\n  return attrValue;\n}\n\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\n\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\n\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n} // Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\n\n\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n\n    default:\n      return text;\n  }\n}\n\nfunction unwrapCSS(text, type) {\n  var matches;\n\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n\n  return matches ? matches[1] : text;\n}\n\nasync function cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? await utils.replaceAsync(comment, /^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, async function (match, prefix, text, suffix) {\n    return prefix + (await minify(text, options, true)) + suffix;\n  }) : comment;\n}\n\nasync function processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' && options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return await minify(text, options);\n    }\n  }\n\n  return text;\n} // Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\n\n\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\n\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n\n    case 'body':\n      return !headerTags(tag);\n\n    case 'colgroup':\n      return tag === 'col';\n\n    case 'tbody':\n      return tag === 'tr';\n  }\n\n  return false;\n}\n\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n\n  return false;\n}\n\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n\n    case 'p':\n      return pBlockTags(tag);\n\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n\n    case 'rtc':\n      return rtcTag(tag);\n\n    case 'option':\n      return optionTag(tag);\n\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n\n    case 'tfoot':\n      return tag === 'tbody';\n\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n\n  return false;\n}\n\nvar reEmptyAttribute = new RegExp('^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' + '?:down|up|over|move|out)|key(?:press|down|up)))$');\n\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n\n  if (!isValueEmpty) {\n    return false;\n  }\n\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\n\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n\n      break;\n\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n\n      break;\n\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n\n      break;\n\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n\n      break;\n  }\n\n  return true;\n}\n\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\n\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\n\nasync function normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n      attrValue = attr.value;\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, {\n      isAttributeValue: true\n    });\n  }\n\n  if (options.removeRedundantAttributes && isAttributeRedundant(tag, attrName, attrValue, attrs) || options.removeScriptTypeAttributes && tag === 'script' && attrName === 'type' && isScriptTypeAttribute(attrValue) && !keepScriptTypeAttribute(attrValue) || options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') && attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n\n  if (attrValue) {\n    attrValue = await cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n\n  if (options.removeEmptyAttributes && canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\n\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n      attrValue = normalized.value,\n      attr = normalized.attr,\n      attrQuote = attr.quote,\n      attrFragment,\n      emittedAttrValue;\n\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes || ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      } else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      } else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  } // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  } else {\n    emittedAttrValue = attrValue + ' ';\n  }\n\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes && isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  } else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n\n  return attr.customOpen + attrFragment + attr.customClose;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction processOptions(values) {\n  var options = {\n    name: function (name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [/^!/, /^\\s*#/],\n    ignoreCustomFragments: [/<%[\\s\\S]*?%>/, /<\\?[\\s\\S]*?\\?>/],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function (key) {\n    var value = values[key];\n\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    } else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    } else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n\n      if (typeof value !== 'object') {\n        value = {};\n      }\n\n      options.minifyCSS = function (text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function (match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    } else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n\n      if (typeof value !== 'object') {\n        value = {};\n      }\n\n      (value.parse || (value.parse = {})).bare_returns = false;\n\n      options.minifyJS = async function (text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n\n        try {\n          const result = await Terser.minify(code, value);\n          return result.code.replace(/;$/, '');\n        } catch (error) {\n          options.log(error);\n          return text;\n        }\n      };\n    } else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        value = {\n          site: value\n        };\n      } else if (typeof value !== 'object') {\n        value = {};\n      }\n\n      options.minifyURLs = function (text) {\n        try {\n          return RelateUrl.relate(text, value);\n        } catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    } else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\n\nfunction uniqueId(value) {\n  var id;\n\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n\n  return id;\n}\n\nvar specialContentTags = createMapFromString('script,style');\n\nasync function createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n\n  function attrNames(attrs) {\n    return attrs.map(function (attr) {\n      return options.name(attr.name);\n    });\n  }\n\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n\n  async function scan(input) {\n    var currentTag, currentType;\n    const parser = new HTMLParser(input, {\n      start: function (tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          } else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function () {\n        currentTag = '';\n      },\n      chars: async function (text) {\n        if (options.processScripts && specialContentTags(currentTag) && options.processScripts.indexOf(currentType) > -1) {\n          await scan(text);\n        }\n      }\n    });\n    await parser.parse();\n  }\n\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  await scan(await minify(value, options));\n  options.log = log;\n\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n\n    options.sortAttributes = function (tag, attrs) {\n      var sorter = attrSorters[tag];\n\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function (name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function (name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n\n  if (classChain) {\n    var sorter = classChain.createSorter();\n\n    options.sortClassName = function (value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\n\nasync function minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n\n  var buffer = [],\n      charsPrevTag,\n      currentChars = '',\n      hasChars,\n      currentTag = '',\n      currentAttrs = [],\n      stackNoTrimWhitespace = [],\n      stackNoCollapseWhitespace = [],\n      optionalStartTag = '',\n      optionalEndTag = '',\n      ignoredMarkupChunks = [],\n      ignoredCustomMarkupChunks = [],\n      uidIgnore,\n      uidAttr,\n      uidPattern; // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function (match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      } else {\n        options.ignoreCustomComments = [];\n      }\n\n      options.ignoreCustomComments.push(pattern);\n    }\n\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n  var customFragments = options.ignoreCustomFragments.map(function (re) {\n    return re.source;\n  });\n\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g'); // temporarily replace custom ignored fragments with unique attributes\n\n    value = value.replace(reCustomIgnore, function (match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n\n        if (options.minifyCSS) {\n          options.minifyCSS = function (fn) {\n            return function (text, type) {\n              text = text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function (warning) {\n                var match = uidPattern.exec(warning);\n\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function (id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          }(options.minifyCSS);\n        }\n\n        if (options.minifyJS) {\n          options.minifyJS = function (fn) {\n            return function (text, type) {\n              return fn(text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          }(options.minifyJS);\n        }\n      }\n\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' || options.sortClassName && typeof options.sortClassName !== 'function') {\n    await createSortFns(value, options, uidIgnore, uidAttr);\n  }\n\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n\n  function removeStartTag() {\n    var index = buffer.length - 1;\n\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n\n    buffer.length = Math.max(0, index);\n  }\n\n  function removeEndTag() {\n    var index = buffer.length - 1;\n\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n\n    buffer.length = Math.max(0, index);\n  } // look for trailing whitespaces, bypass any inline tags\n\n\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n\n      if (match) {\n        endTag = match[1];\n      } else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  } // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n\n\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n\n  const parser = new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n    start: async function (tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n\n      hasChars = false;\n      currentAttrs = attrs;\n      var optional = options.removeOptionalTags;\n\n      if (optional) {\n        var htmlTag = htmlTags(tag); // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n\n        optionalStartTag = ''; // end-tag-followed-by-start-tag omission rules\n\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag(); // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n\n        optionalEndTag = '';\n      } // set whitespace flags for nested tags (eg. <code> within a <pre>)\n\n\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n      buffer.push(openTag);\n\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n\n      var parts = [];\n\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = await normalizeAttr(attrs[i], attrs, tag, options);\n\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      } // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function (tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n\n      tag = options.name(tag); // check if current tag is in a whitespace stack\n\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        } else {\n          squashTrailingWhitespace('/' + tag);\n        }\n\n        if (stackNoCollapseWhitespace.length && tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n\n      var isElementEmpty = false;\n\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n\n        optionalStartTag = ''; // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      } else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        } else {\n          buffer.push('</' + tag + '>');\n        }\n\n        charsPrevTag = '/' + tag;\n\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        } else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: async function (text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function (trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            } else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          } else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = await processScript(text, options, currentAttrs);\n      }\n\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = await options.minifyJS(text);\n      }\n\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n\n        optionalStartTag = ''; // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n\n        optionalEndTag = '';\n      }\n\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function (match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n\n      currentChars += text;\n\n      if (text) {\n        hasChars = true;\n      }\n\n      buffer.push(text);\n    },\n    comment: async function (text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n\n      if (isConditionalComment(text)) {\n        text = prefix + (await cleanConditionalComment(text, options)) + suffix;\n      } else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        } else {\n          text = '';\n        }\n      } else {\n        text = prefix + text + suffix;\n      }\n\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n\n      buffer.push(text);\n    },\n    doctype: function (doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' + (options.removeTagWhitespace ? '' : ' ') + 'html>' : collapseWhitespaceAll(doctype));\n    }\n  });\n  await parser.parse();\n\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    } // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n\n\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n\n  return joinResultSegments(buffer, options, uidPattern ? function (str) {\n    return str.replace(uidPattern, function (match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n\n      return chunk;\n    });\n  } : identity, uidIgnore ? function (str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function (match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\n\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  var noNewlinesBeforeTagClose = options.noNewlinesBeforeTagClose;\n\n  if (maxLineLength) {\n    var line = '',\n        lines = [];\n\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      var isClosingTag = Boolean(results[0].match(endTag));\n      var shouldKeepSameLine = noNewlinesBeforeTagClose && isClosingTag;\n\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      } else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n\n      if (len > 0 && line.length > maxLineLength && !shouldKeepSameLine) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      } else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n\n    if (line) {\n      lines.push(line);\n    }\n\n    str = lines.join('\\n');\n  } else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\n\nexports.minify = async function (value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = await minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};","map":{"version":3,"names":["CleanCSS","require","decode","HTMLParser","endTag","RelateUrl","TokenChain","Terser","utils","trimWhitespace","str","replace","collapseWhitespaceAll","spaces","collapseWhitespace","options","trimLeft","trimRight","collapseAll","lineBreakBefore","lineBreakAfter","preserveLineBreaks","conservative","conservativeCollapse","createMapFromString","inlineTags","inlineTextTags","selfClosingInlineTags","collapseWhitespaceSmart","prevTag","nextTag","collapseInlineTagWhitespace","charAt","slice","isConditionalComment","text","test","isIgnoredComment","i","len","ignoreCustomComments","length","isEventAttribute","attrName","patterns","customEventAttributes","canRemoveAttributeQuotes","value","attributesInclude","attributes","attribute","name","toLowerCase","isAttributeRedundant","tag","attrValue","attrs","executableScriptsMimetypes","createMap","keepScriptsMimetypes","isScriptTypeAttribute","split","keepScriptTypeAttribute","isExecutableScript","isStyleLinkTypeAttribute","isStyleSheet","isSimpleBoolean","isBooleanValue","isBooleanAttribute","isUriTypeAttribute","isNumberTypeAttribute","isLinkType","isMediaQuery","srcsetTags","isSrcset","cleanAttributeValue","minifyJS","sortClassName","minifyURLs","minifyCSS","map","candidate","url","descriptor","match","num","suffix","join","isMetaViewport","numString","toString","isContentSecurityPolicy","customAttrCollapse","ignoreCSS","id","wrapCSS","type","unwrapCSS","matches","cleanConditionalComment","comment","processConditionalComments","replaceAsync","prefix","minify","processScript","currentAttrs","processScripts","indexOf","optionalStartTags","optionalEndTags","headerTags","descriptionTags","pBlockTags","pInlineTags","rubyTags","rtcTag","optionTag","tableContentTags","tableSectionTags","cellTags","topLevelTags","compactTags","looseTags","trailingTags","htmlTags","canRemoveParentTag","optionalStartTag","isStartTagMandatory","optionalEndTag","canRemovePrecedingTag","reEmptyAttribute","RegExp","canDeleteEmptyAttribute","isValueEmpty","removeEmptyAttributes","hasAttrName","canRemoveElement","canCollapseWhitespace","canTrimWhitespace","normalizeAttr","attr","decodeEntities","isAttributeValue","removeRedundantAttributes","removeScriptTypeAttributes","removeStyleLinkTypeAttributes","buildAttr","normalized","hasUnarySlash","isLast","uidAttr","attrQuote","quote","attrFragment","emittedAttrValue","removeAttributeQuotes","preventAttributesEscaping","quoteCharacter","apos","quot","removeTagWhitespace","collapseBooleanAttributes","customAssign","customOpen","customClose","identity","processOptions","values","html5","ignoreCustomFragments","includeAutoGeneratedTags","log","Object","keys","forEach","key","cleanCssOutput","errors","styles","parse","bare_returns","inline","start","code","result","error","site","relate","err","uniqueId","Math","random","specialContentTags","createSortFns","uidIgnore","attrChains","sortAttributes","create","classChain","attrNames","shouldSkipUID","token","uid","shouldSkipUIDs","scan","input","currentTag","currentType","parser","add","filter","end","chars","attrSorters","createSorter","sorter","attrMap","names","index","push","sort","shift","partialMarkup","buffer","charsPrevTag","currentChars","hasChars","stackNoTrimWhitespace","stackNoCollapseWhitespace","ignoredMarkupChunks","ignoredCustomMarkupChunks","uidPattern","group1","pattern","customFragments","re","source","reCustomIgnore","fn","chunks","ids","warnings","warning","exec","_canCollapseWhitespace","_canTrimWhitespace","removeStartTag","max","removeEndTag","trimTrailingWhitespace","squashTrailingWhitespace","charsIndex","item","continueOnParseError","customAttrAssign","customAttrSurround","unary","unarySlash","autoGenerated","caseSensitive","keepClosingSlash","optional","removeOptionalTags","htmlTag","openTag","parts","unshift","apply","pop","getPrototypeOf","isElementEmpty","removeEmptyElements","prevComment","trailingSpaces","tagIndex","lastIndexOf","nonStandard","removeComments","doctype","useShortDoctype","joinResultSegments","chunk","trimCustomFragments","results","restoreCustom","restoreIgnore","maxLineLength","noNewlinesBeforeTagClose","line","lines","isClosingTag","Boolean","shouldKeepSameLine","exports","Date","now"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/html-minifier-terser/src/htmlminifier.js"],"sourcesContent":["'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar endTag = require('./htmlparser').endTag;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar Terser = require('terser');\nvar utils = require('./utils');\n\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\n\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function(spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\n\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '', lineBreakAfter = '';\n\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function() {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function() {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function(spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function(spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n\n  return lineBreakBefore + str + lineBreakAfter;\n}\n\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\n\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\n\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\n\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\n\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\n\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n\n  return (\n    tag === 'script' &&\n    attrName === 'language' &&\n    attrValue === 'javascript' ||\n\n    tag === 'form' &&\n    attrName === 'method' &&\n    attrValue === 'get' ||\n\n    tag === 'input' &&\n    attrName === 'type' &&\n    attrValue === 'text' ||\n\n    tag === 'script' &&\n    attrName === 'charset' &&\n    !attributesInclude(attrs, 'src') ||\n\n    tag === 'a' &&\n    attrName === 'name' &&\n    attributesInclude(attrs, 'id') ||\n\n    tag === 'area' &&\n    attrName === 'shape' &&\n    attrValue === 'rect'\n  );\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap([\n  'text/javascript',\n  'text/ecmascript',\n  'text/jscript',\n  'application/javascript',\n  'application/x-javascript',\n  'application/ecmascript',\n  'module'\n]);\n\nvar keepScriptsMimetypes = utils.createMap([\n  'module'\n]);\n\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\n\nfunction keepScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return keepScriptsMimetypes(attrValue);\n}\n\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\n\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\n\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\n\nfunction isUriTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' ||\n    tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) ||\n    tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) ||\n    tag === 'q' && attrName === 'cite' ||\n    tag === 'blockquote' && attrName === 'cite' ||\n    (tag === 'ins' || tag === 'del') && attrName === 'cite' ||\n    tag === 'form' && attrName === 'action' ||\n    tag === 'input' && (attrName === 'src' || attrName === 'usemap') ||\n    tag === 'head' && attrName === 'profile' ||\n    tag === 'script' && (attrName === 'src' || attrName === 'for')\n  );\n}\n\nfunction isNumberTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' ||\n    tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') ||\n    tag === 'select' && (attrName === 'size' || attrName === 'tabindex') ||\n    tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) ||\n    tag === 'colgroup' && attrName === 'span' ||\n    tag === 'col' && attrName === 'span' ||\n    (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan')\n  );\n}\n\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\n\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\n\nvar srcsetTags = createMapFromString('img,source');\n\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\n\nasync function cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return await options.minifyJS(attrValue, true);\n  }\n  else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    }\n    else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  }\n  else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  }\n  else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  }\n  else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n    return attrValue;\n  }\n  else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function(candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  }\n  else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function(numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  }\n  else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  }\n  else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = trimWhitespace(attrValue.replace(/ ?[\\n\\r]+ ?/g, '').replace(/\\s{2,}/g, options.conservativeCollapse ? ' ' : ''));\n  }\n  else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  }\n  else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n  return attrValue;\n}\n\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\n\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\n\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n    default:\n      return text;\n  }\n}\n\nfunction unwrapCSS(text, type) {\n  var matches;\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n  return matches ? matches[1] : text;\n}\n\nasync function cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? await utils.replaceAsync(comment, /^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, async function(match, prefix, text, suffix) {\n    return prefix + await minify(text, options, true) + suffix;\n  }) : comment;\n}\n\nasync function processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' &&\n        options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return await minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\n\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\n\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\n\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\n\nvar reEmptyAttribute = new RegExp(\n  '^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' +\n    '?:down|up|over|move|out)|key(?:press|down|up)))$');\n\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\n\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\n\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\n\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\n\nasync function normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n      attrValue = attr.value;\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, { isAttributeValue: true });\n  }\n\n  if (options.removeRedundantAttributes &&\n    isAttributeRedundant(tag, attrName, attrValue, attrs) ||\n    options.removeScriptTypeAttributes && tag === 'script' &&\n    attrName === 'type' && isScriptTypeAttribute(attrValue) && !keepScriptTypeAttribute(attrValue) ||\n    options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') &&\n    attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n\n  if (attrValue) {\n    attrValue = await cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n\n  if (options.removeEmptyAttributes &&\n      canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\n\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n      attrValue = normalized.value,\n      attr = normalized.attr,\n      attrQuote = attr.quote,\n      attrFragment,\n      emittedAttrValue;\n\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes ||\n      ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      }\n      else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      }\n      else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  }\n  else {\n    emittedAttrValue = attrValue + ' ';\n  }\n\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes &&\n      isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  }\n  else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n\n  return attr.customOpen + attrFragment + attr.customClose;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction processOptions(values) {\n  var options = {\n    name: function(name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [\n      /^!/,\n      /^\\s*#/\n    ],\n    ignoreCustomFragments: [\n      /<%[\\s\\S]*?%>/,\n      /<\\?[\\s\\S]*?\\?>/\n    ],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function(key) {\n    var value = values[key];\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    }\n    else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    }\n    else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyCSS = function(text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function(match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    }\n    else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      (value.parse || (value.parse = {})).bare_returns = false;\n      options.minifyJS = async function(text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n        try {\n          const result = await Terser.minify(code, value);\n          return result.code.replace(/;$/, '');\n        }\n        catch (error) {\n          options.log(error);\n          return text;\n        }\n      };\n    }\n    else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value === 'string') {\n        value = { site: value };\n      }\n      else if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyURLs = function(text) {\n        try {\n          return RelateUrl.relate(text, value);\n        }\n        catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    }\n    else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\n\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\n\nvar specialContentTags = createMapFromString('script,style');\n\nasync function createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n\n  function attrNames(attrs) {\n    return attrs.map(function(attr) {\n      return options.name(attr.name);\n    });\n  }\n\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n\n  async function scan(input) {\n    var currentTag, currentType;\n    const parser = new HTMLParser(input, {\n      start: function(tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          }\n          else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function() {\n        currentTag = '';\n      },\n      chars: async function(text) {\n        if (options.processScripts && specialContentTags(currentTag) &&\n            options.processScripts.indexOf(currentType) > -1) {\n          await scan(text);\n        }\n      }\n    });\n\n    await parser.parse();\n  }\n\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  await scan(await minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function(tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function(name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function(name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function(value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\n\nasync function minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n\n  var buffer = [],\n      charsPrevTag,\n      currentChars = '',\n      hasChars,\n      currentTag = '',\n      currentAttrs = [],\n      stackNoTrimWhitespace = [],\n      stackNoCollapseWhitespace = [],\n      optionalStartTag = '',\n      optionalEndTag = '',\n      ignoredMarkupChunks = [],\n      ignoredCustomMarkupChunks = [],\n      uidIgnore,\n      uidAttr,\n      uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function(match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      }\n      else {\n        options.ignoreCustomComments = [];\n      }\n      options.ignoreCustomComments.push(pattern);\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n\n  var customFragments = options.ignoreCustomFragments.map(function(re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function(match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n        if (options.minifyCSS) {\n          options.minifyCSS = (function(fn) {\n            return function(text, type) {\n              text = text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function(warning) {\n                var match = uidPattern.exec(warning);\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function(id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          })(options.minifyCSS);\n        }\n        if (options.minifyJS) {\n          options.minifyJS = (function(fn) {\n            return function(text, type) {\n              return fn(text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          })(options.minifyJS);\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' ||\n      options.sortClassName && typeof options.sortClassName !== 'function') {\n    await createSortFns(value, options, uidIgnore, uidAttr);\n  }\n\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      }\n      else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n\n  const parser = new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n\n    start: async function(tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n\n      buffer.push(openTag);\n\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = await normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function(tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n      tag = options.name(tag);\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        }\n        else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length &&\n          tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        }\n        else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        }\n        else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: async function(text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function(trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            }\n            else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          }\n          else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = await processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = await options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function(match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: async function(text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + await cleanConditionalComment(text, options) + suffix;\n      }\n      else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        }\n        else {\n          text = '';\n        }\n      }\n      else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function(doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' +\n        (options.removeTagWhitespace ? '' : ' ') + 'html>' :\n        collapseWhitespaceAll(doctype));\n    }\n  });\n\n  await parser.parse();\n\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n\n  return joinResultSegments(buffer, options, uidPattern ? function(str) {\n    return str.replace(uidPattern, function(match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  } : identity, uidIgnore ? function(str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function(match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\n\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  var noNewlinesBeforeTagClose = options.noNewlinesBeforeTagClose;\n\n  if (maxLineLength) {\n    var line = '', lines = [];\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      var isClosingTag = Boolean(results[0].match(endTag));\n      var shouldKeepSameLine = noNewlinesBeforeTagClose && isClosingTag;\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      }\n      else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n      if (len > 0 && line.length > maxLineLength && !shouldKeepSameLine) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      }\n      else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n    if (line) {\n      lines.push(line);\n    }\n    str = lines.join('\\n');\n  }\n  else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\n\nexports.minify = async function(value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = await minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}