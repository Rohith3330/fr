{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\n\nvar homedir = require('../lib/homedir');\n\nvar path = require('path');\n\nvar test = require('tape');\n\nvar mkdirp = require('mkdirp');\n\nvar rimraf = require('rimraf');\n\nvar mv = require('mv');\n\nvar copyDir = require('copy-dir');\n\nvar tmp = require('tmp');\n\nvar HOME = homedir();\nvar hnm = path.join(HOME, '.node_modules');\nvar hnl = path.join(HOME, '.node_libraries');\n\nvar resolve = require('../async');\n\nfunction makeDir(t, dir, cb) {\n  mkdirp(dir, function (err) {\n    if (err) {\n      cb(err);\n    } else {\n      t.teardown(function cleanup() {\n        rimraf.sync(dir);\n      });\n      cb();\n    }\n  });\n}\n\nfunction makeTempDir(t, dir, cb) {\n  if (fs.existsSync(dir)) {\n    var tmpResult = tmp.dirSync();\n    t.teardown(tmpResult.removeCallback);\n    var backup = path.join(tmpResult.name, path.basename(dir));\n    mv(dir, backup, function (err) {\n      if (err) {\n        cb(err);\n      } else {\n        t.teardown(function () {\n          mv(backup, dir, cb);\n        });\n        makeDir(t, dir, cb);\n      }\n    });\n  } else {\n    makeDir(t, dir, cb);\n  }\n}\n\ntest('homedir module paths', function (t) {\n  t.plan(7);\n  makeTempDir(t, hnm, function (err) {\n    t.error(err, 'no error with HNM temp dir');\n\n    if (err) {\n      return t.end();\n    }\n\n    var bazHNMDir = path.join(hnm, 'baz');\n    var dotMainDir = path.join(hnm, 'dot_main');\n    copyDir.sync(path.join(__dirname, 'resolver/baz'), bazHNMDir);\n    copyDir.sync(path.join(__dirname, 'resolver/dot_main'), dotMainDir);\n    var bazPkg = {\n      name: 'baz',\n      main: 'quux.js'\n    };\n    var dotMainPkg = {\n      main: 'index'\n    };\n    var bazHNMmain = path.join(bazHNMDir, 'quux.js');\n    t.equal(require.resolve('baz'), bazHNMmain, 'sanity check: require.resolve finds HNM `baz`');\n    var dotMainMain = path.join(dotMainDir, 'index.js');\n    t.equal(require.resolve('dot_main'), dotMainMain, 'sanity check: require.resolve finds `dot_main`');\n    makeTempDir(t, hnl, function (err) {\n      t.error(err, 'no error with HNL temp dir');\n\n      if (err) {\n        return t.end();\n      }\n\n      var bazHNLDir = path.join(hnl, 'baz');\n      copyDir.sync(path.join(__dirname, 'resolver/baz'), bazHNLDir);\n      var dotSlashMainDir = path.join(hnl, 'dot_slash_main');\n      var dotSlashMainMain = path.join(dotSlashMainDir, 'index.js');\n      var dotSlashMainPkg = {\n        main: 'index'\n      };\n      copyDir.sync(path.join(__dirname, 'resolver/dot_slash_main'), dotSlashMainDir);\n      t.equal(require.resolve('baz'), bazHNMmain, 'sanity check: require.resolve finds HNM `baz`');\n      t.equal(require.resolve('dot_slash_main'), dotSlashMainMain, 'sanity check: require.resolve finds HNL `dot_slash_main`');\n      t.test('with temp dirs', function (st) {\n        st.plan(3);\n        st.test('just in `$HOME/.node_modules`', function (s2t) {\n          s2t.plan(3);\n          resolve('dot_main', function (err, res, pkg) {\n            s2t.error(err, 'no error resolving `dot_main`');\n            s2t.equal(res, dotMainMain, '`dot_main` resolves in `$HOME/.node_modules`');\n            s2t.deepEqual(pkg, dotMainPkg);\n          });\n        });\n        st.test('just in `$HOME/.node_libraries`', function (s2t) {\n          s2t.plan(3);\n          resolve('dot_slash_main', function (err, res, pkg) {\n            s2t.error(err, 'no error resolving `dot_slash_main`');\n            s2t.equal(res, dotSlashMainMain, '`dot_slash_main` resolves in `$HOME/.node_libraries`');\n            s2t.deepEqual(pkg, dotSlashMainPkg);\n          });\n        });\n        st.test('in `$HOME/.node_libraries` and `$HOME/.node_modules`', function (s2t) {\n          s2t.plan(3);\n          resolve('baz', function (err, res, pkg) {\n            s2t.error(err, 'no error resolving `baz`');\n            s2t.equal(res, bazHNMmain, '`baz` resolves in `$HOME/.node_modules` when in both');\n            s2t.deepEqual(pkg, bazPkg);\n          });\n        });\n      });\n    });\n  });\n});","map":{"version":3,"names":["fs","require","homedir","path","test","mkdirp","rimraf","mv","copyDir","tmp","HOME","hnm","join","hnl","resolve","makeDir","t","dir","cb","err","teardown","cleanup","sync","makeTempDir","existsSync","tmpResult","dirSync","removeCallback","backup","name","basename","plan","error","end","bazHNMDir","dotMainDir","__dirname","bazPkg","main","dotMainPkg","bazHNMmain","equal","dotMainMain","bazHNLDir","dotSlashMainDir","dotSlashMainMain","dotSlashMainPkg","st","s2t","res","pkg","deepEqual"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/resolve/test/home_paths.js"],"sourcesContent":["'use strict';\n\nvar fs = require('fs');\nvar homedir = require('../lib/homedir');\nvar path = require('path');\n\nvar test = require('tape');\nvar mkdirp = require('mkdirp');\nvar rimraf = require('rimraf');\nvar mv = require('mv');\nvar copyDir = require('copy-dir');\nvar tmp = require('tmp');\n\nvar HOME = homedir();\n\nvar hnm = path.join(HOME, '.node_modules');\nvar hnl = path.join(HOME, '.node_libraries');\n\nvar resolve = require('../async');\n\nfunction makeDir(t, dir, cb) {\n    mkdirp(dir, function (err) {\n        if (err) {\n            cb(err);\n        } else {\n            t.teardown(function cleanup() {\n                rimraf.sync(dir);\n            });\n            cb();\n        }\n    });\n}\n\nfunction makeTempDir(t, dir, cb) {\n    if (fs.existsSync(dir)) {\n        var tmpResult = tmp.dirSync();\n        t.teardown(tmpResult.removeCallback);\n        var backup = path.join(tmpResult.name, path.basename(dir));\n        mv(dir, backup, function (err) {\n            if (err) {\n                cb(err);\n            } else {\n                t.teardown(function () {\n                    mv(backup, dir, cb);\n                });\n                makeDir(t, dir, cb);\n            }\n        });\n    } else {\n        makeDir(t, dir, cb);\n    }\n}\n\ntest('homedir module paths', function (t) {\n    t.plan(7);\n\n    makeTempDir(t, hnm, function (err) {\n        t.error(err, 'no error with HNM temp dir');\n        if (err) {\n            return t.end();\n        }\n\n        var bazHNMDir = path.join(hnm, 'baz');\n        var dotMainDir = path.join(hnm, 'dot_main');\n        copyDir.sync(path.join(__dirname, 'resolver/baz'), bazHNMDir);\n        copyDir.sync(path.join(__dirname, 'resolver/dot_main'), dotMainDir);\n\n        var bazPkg = { name: 'baz', main: 'quux.js' };\n        var dotMainPkg = { main: 'index' };\n\n        var bazHNMmain = path.join(bazHNMDir, 'quux.js');\n        t.equal(require.resolve('baz'), bazHNMmain, 'sanity check: require.resolve finds HNM `baz`');\n        var dotMainMain = path.join(dotMainDir, 'index.js');\n        t.equal(require.resolve('dot_main'), dotMainMain, 'sanity check: require.resolve finds `dot_main`');\n\n        makeTempDir(t, hnl, function (err) {\n            t.error(err, 'no error with HNL temp dir');\n            if (err) {\n                return t.end();\n            }\n            var bazHNLDir = path.join(hnl, 'baz');\n            copyDir.sync(path.join(__dirname, 'resolver/baz'), bazHNLDir);\n\n            var dotSlashMainDir = path.join(hnl, 'dot_slash_main');\n            var dotSlashMainMain = path.join(dotSlashMainDir, 'index.js');\n            var dotSlashMainPkg = { main: 'index' };\n            copyDir.sync(path.join(__dirname, 'resolver/dot_slash_main'), dotSlashMainDir);\n\n            t.equal(require.resolve('baz'), bazHNMmain, 'sanity check: require.resolve finds HNM `baz`');\n            t.equal(require.resolve('dot_slash_main'), dotSlashMainMain, 'sanity check: require.resolve finds HNL `dot_slash_main`');\n\n            t.test('with temp dirs', function (st) {\n                st.plan(3);\n\n                st.test('just in `$HOME/.node_modules`', function (s2t) {\n                    s2t.plan(3);\n\n                    resolve('dot_main', function (err, res, pkg) {\n                        s2t.error(err, 'no error resolving `dot_main`');\n                        s2t.equal(res, dotMainMain, '`dot_main` resolves in `$HOME/.node_modules`');\n                        s2t.deepEqual(pkg, dotMainPkg);\n                    });\n                });\n\n                st.test('just in `$HOME/.node_libraries`', function (s2t) {\n                    s2t.plan(3);\n\n                    resolve('dot_slash_main', function (err, res, pkg) {\n                        s2t.error(err, 'no error resolving `dot_slash_main`');\n                        s2t.equal(res, dotSlashMainMain, '`dot_slash_main` resolves in `$HOME/.node_libraries`');\n                        s2t.deepEqual(pkg, dotSlashMainPkg);\n                    });\n                });\n\n                st.test('in `$HOME/.node_libraries` and `$HOME/.node_modules`', function (s2t) {\n                    s2t.plan(3);\n\n                    resolve('baz', function (err, res, pkg) {\n                        s2t.error(err, 'no error resolving `baz`');\n                        s2t.equal(res, bazHNMmain, '`baz` resolves in `$HOME/.node_modules` when in both');\n                        s2t.deepEqual(pkg, bazPkg);\n                    });\n                });\n            });\n        });\n    });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}