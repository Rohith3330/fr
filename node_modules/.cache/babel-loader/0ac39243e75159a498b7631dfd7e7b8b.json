{"ast":null,"code":"'use strict';\n\nvar assert = require('assert');\n\nvar https = require('https');\n\nvar http = require('http');\n\nvar tls = require('tls');\n\nvar net = require('net');\n\nvar util = require('util');\n\nvar selectHose = require('select-hose');\n\nvar transport = require('spdy-transport');\n\nvar debug = require('debug')('spdy:server');\n\nvar EventEmitter = require('events').EventEmitter; // Node.js 0.8, 0.10 and 0.12 support\n\n\nObject.assign = process.versions.modules >= 46 ? Object.assign // eslint-disable-next-line\n: util._extend;\n\nvar spdy = require('../spdy');\n\nvar proto = {};\n\nfunction instantiate(base) {\n  function Server(options, handler) {\n    this._init(base, options, handler);\n  }\n\n  util.inherits(Server, base);\n\n  Server.create = function create(options, handler) {\n    return new Server(options, handler);\n  };\n\n  Object.keys(proto).forEach(function (key) {\n    Server.prototype[key] = proto[key];\n  });\n  return Server;\n}\n\nproto._init = function _init(base, options, handler) {\n  var state = {};\n  this._spdyState = state;\n  state.options = options.spdy || {};\n  var protocols = state.options.protocols || ['h2', 'spdy/3.1', 'spdy/3', 'spdy/2', 'http/1.1', 'http/1.0'];\n  var actualOptions = Object.assign({\n    NPNProtocols: protocols,\n    // Future-proof\n    ALPNProtocols: protocols\n  }, options);\n  state.secure = this instanceof tls.Server;\n\n  if (state.secure) {\n    base.call(this, actualOptions);\n  } else {\n    base.call(this);\n  } // Support HEADERS+FIN\n\n\n  this.httpAllowHalfOpen = true;\n  var event = state.secure ? 'secureConnection' : 'connection';\n  state.listeners = this.listeners(event).slice();\n  assert(state.listeners.length > 0, 'Server does not have default listeners');\n  this.removeAllListeners(event);\n\n  if (state.options.plain) {\n    this.on(event, this._onPlainConnection);\n  } else {\n    this.on(event, this._onConnection);\n  }\n\n  if (handler) {\n    this.on('request', handler);\n  }\n\n  debug('server init secure=%d', state.secure);\n};\n\nproto._onConnection = function _onConnection(socket) {\n  var state = this._spdyState;\n  var protocol;\n\n  if (state.secure) {\n    protocol = socket.npnProtocol || socket.alpnProtocol;\n  }\n\n  this._handleConnection(socket, protocol);\n};\n\nproto._handleConnection = function _handleConnection(socket, protocol) {\n  var state = this._spdyState;\n\n  if (!protocol) {\n    protocol = state.options.protocol;\n  }\n\n  debug('incoming socket protocol=%j', protocol); // No way we can do anything with the socket\n\n  if (!protocol || protocol === 'http/1.1' || protocol === 'http/1.0') {\n    debug('to default handler it goes');\n    return this._invokeDefault(socket);\n  }\n\n  socket.setNoDelay(true);\n  var connection = transport.connection.create(socket, Object.assign({\n    protocol: /spdy/.test(protocol) ? 'spdy' : 'http2',\n    isServer: true\n  }, state.options.connection || {})); // Set version when we are certain\n\n  if (protocol === 'http2') {\n    connection.start(4);\n  } else if (protocol === 'spdy/3.1') {\n    connection.start(3.1);\n  } else if (protocol === 'spdy/3') {\n    connection.start(3);\n  } else if (protocol === 'spdy/2') {\n    connection.start(2);\n  }\n\n  connection.on('error', function () {\n    socket.destroy();\n  });\n  var self = this;\n  connection.on('stream', function (stream) {\n    self._onStream(stream);\n  });\n}; // HTTP2 preface\n\n\nvar PREFACE = 'PRI * HTTP/2.0\\r\\n\\r\\nSM\\r\\n\\r\\n';\nvar PREFACE_BUFFER = Buffer.from(PREFACE);\n\nfunction hoseFilter(data, callback) {\n  if (data.length < 1) {\n    return callback(null, null);\n  } // SPDY!\n\n\n  if (data[0] === 0x80) {\n    return callback(null, 'spdy');\n  }\n\n  var avail = Math.min(data.length, PREFACE_BUFFER.length);\n\n  for (var i = 0; i < avail; i++) {\n    if (data[i] !== PREFACE_BUFFER[i]) {\n      return callback(null, 'http/1.1');\n    }\n  } // Not enough bytes to be sure about HTTP2\n\n\n  if (avail !== PREFACE_BUFFER.length) {\n    return callback(null, null);\n  }\n\n  return callback(null, 'h2');\n}\n\nproto._onPlainConnection = function _onPlainConnection(socket) {\n  var hose = selectHose.create(socket, {}, hoseFilter);\n  var self = this;\n  hose.on('select', function (protocol, socket) {\n    self._handleConnection(socket, protocol);\n  });\n  hose.on('error', function (err) {\n    debug('hose error %j', err.message);\n    socket.destroy();\n  });\n};\n\nproto._invokeDefault = function _invokeDefault(socket) {\n  var state = this._spdyState;\n\n  for (var i = 0; i < state.listeners.length; i++) {\n    state.listeners[i].call(this, socket);\n  }\n};\n\nproto._onStream = function _onStream(stream) {\n  var state = this._spdyState;\n  var handle = spdy.handle.create(this._spdyState.options, stream);\n  var socketOptions = {\n    handle: handle,\n    allowHalfOpen: true\n  };\n  var socket;\n\n  if (state.secure) {\n    socket = new spdy.Socket(stream.connection.socket, socketOptions);\n  } else {\n    socket = new net.Socket(socketOptions);\n  } // This is needed because the `error` listener, added by the default\n  // `connection` listener, no longer has bound arguments. It relies instead\n  // on the `server` property of the socket. See https://github.com/nodejs/node/pull/11926\n  // for more details.\n  // This is only done for Node.js >= 4 in order to not break compatibility\n  // with older versions of the platform.\n\n\n  if (process.versions.modules >= 46) {\n    socket.server = this;\n  }\n\n  handle.assignSocket(socket); // For v0.8\n\n  socket.readable = true;\n  socket.writable = true;\n\n  this._invokeDefault(socket); // For v0.8, 0.10 and 0.12\n\n\n  if (process.versions.modules < 46) {\n    // eslint-disable-next-line\n    this.listenerCount = EventEmitter.listenerCount.bind(this);\n  } // Add lazy `checkContinue` listener, otherwise `res.writeContinue` will be\n  // called before the response object was patched by us.\n\n\n  if (stream.headers.expect !== undefined && /100-continue/i.test(stream.headers.expect) && this.listenerCount('checkContinue') === 0) {\n    this.once('checkContinue', function (req, res) {\n      res.writeContinue();\n      this.emit('request', req, res);\n    });\n  }\n\n  handle.emitRequest();\n};\n\nproto.emit = function emit(event, req, res) {\n  if (event !== 'request' && event !== 'checkContinue') {\n    return EventEmitter.prototype.emit.apply(this, arguments);\n  }\n\n  if (!(req.socket._handle instanceof spdy.handle)) {\n    debug('not spdy req/res');\n    req.isSpdy = false;\n    req.spdyVersion = 1;\n    res.isSpdy = false;\n    res.spdyVersion = 1;\n    return EventEmitter.prototype.emit.apply(this, arguments);\n  }\n\n  var handle = req.connection._handle;\n  req.isSpdy = true;\n  req.spdyVersion = handle.getStream().connection.getVersion();\n  res.isSpdy = true;\n  res.spdyVersion = req.spdyVersion;\n  req.spdyStream = handle.getStream();\n  debug('override req/res');\n  res.writeHead = spdy.response.writeHead;\n  res.end = spdy.response.end;\n  res.push = spdy.response.push;\n  res.writeContinue = spdy.response.writeContinue;\n  res.spdyStream = handle.getStream();\n  res._req = req;\n  handle.assignRequest(req);\n  handle.assignResponse(res);\n  return EventEmitter.prototype.emit.apply(this, arguments);\n};\n\nexports.Server = instantiate(https.Server);\nexports.PlainServer = instantiate(http.Server);\n\nexports.create = function create(base, options, handler) {\n  if (typeof base === 'object') {\n    handler = options;\n    options = base;\n    base = null;\n  }\n\n  if (base) {\n    return instantiate(base).create(options, handler);\n  }\n\n  if (options.spdy && options.spdy.plain) {\n    return exports.PlainServer.create(options, handler);\n  } else {\n    return exports.Server.create(options, handler);\n  }\n};","map":{"version":3,"names":["assert","require","https","http","tls","net","util","selectHose","transport","debug","EventEmitter","Object","assign","process","versions","modules","_extend","spdy","proto","instantiate","base","Server","options","handler","_init","inherits","create","keys","forEach","key","prototype","state","_spdyState","protocols","actualOptions","NPNProtocols","ALPNProtocols","secure","call","httpAllowHalfOpen","event","listeners","slice","length","removeAllListeners","plain","on","_onPlainConnection","_onConnection","socket","protocol","npnProtocol","alpnProtocol","_handleConnection","_invokeDefault","setNoDelay","connection","test","isServer","start","destroy","self","stream","_onStream","PREFACE","PREFACE_BUFFER","Buffer","from","hoseFilter","data","callback","avail","Math","min","i","hose","err","message","handle","socketOptions","allowHalfOpen","Socket","server","assignSocket","readable","writable","listenerCount","bind","headers","expect","undefined","once","req","res","writeContinue","emit","emitRequest","apply","arguments","_handle","isSpdy","spdyVersion","getStream","getVersion","spdyStream","writeHead","response","end","push","_req","assignRequest","assignResponse","exports","PlainServer"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/spdy/lib/spdy/server.js"],"sourcesContent":["'use strict'\n\nvar assert = require('assert')\nvar https = require('https')\nvar http = require('http')\nvar tls = require('tls')\nvar net = require('net')\nvar util = require('util')\nvar selectHose = require('select-hose')\nvar transport = require('spdy-transport')\nvar debug = require('debug')('spdy:server')\nvar EventEmitter = require('events').EventEmitter\n\n// Node.js 0.8, 0.10 and 0.12 support\nObject.assign = process.versions.modules >= 46\n  ? Object.assign // eslint-disable-next-line\n  : util._extend\n\nvar spdy = require('../spdy')\n\nvar proto = {}\n\nfunction instantiate (base) {\n  function Server (options, handler) {\n    this._init(base, options, handler)\n  }\n  util.inherits(Server, base)\n\n  Server.create = function create (options, handler) {\n    return new Server(options, handler)\n  }\n\n  Object.keys(proto).forEach(function (key) {\n    Server.prototype[key] = proto[key]\n  })\n\n  return Server\n}\n\nproto._init = function _init (base, options, handler) {\n  var state = {}\n  this._spdyState = state\n\n  state.options = options.spdy || {}\n\n  var protocols = state.options.protocols || [\n    'h2',\n    'spdy/3.1', 'spdy/3', 'spdy/2',\n    'http/1.1', 'http/1.0'\n  ]\n\n  var actualOptions = Object.assign({\n    NPNProtocols: protocols,\n\n    // Future-proof\n    ALPNProtocols: protocols\n  }, options)\n\n  state.secure = this instanceof tls.Server\n\n  if (state.secure) {\n    base.call(this, actualOptions)\n  } else {\n    base.call(this)\n  }\n\n  // Support HEADERS+FIN\n  this.httpAllowHalfOpen = true\n\n  var event = state.secure ? 'secureConnection' : 'connection'\n\n  state.listeners = this.listeners(event).slice()\n  assert(state.listeners.length > 0, 'Server does not have default listeners')\n  this.removeAllListeners(event)\n\n  if (state.options.plain) {\n    this.on(event, this._onPlainConnection)\n  } else { this.on(event, this._onConnection) }\n\n  if (handler) {\n    this.on('request', handler)\n  }\n\n  debug('server init secure=%d', state.secure)\n}\n\nproto._onConnection = function _onConnection (socket) {\n  var state = this._spdyState\n\n  var protocol\n  if (state.secure) {\n    protocol = socket.npnProtocol || socket.alpnProtocol\n  }\n\n  this._handleConnection(socket, protocol)\n}\n\nproto._handleConnection = function _handleConnection (socket, protocol) {\n  var state = this._spdyState\n\n  if (!protocol) {\n    protocol = state.options.protocol\n  }\n\n  debug('incoming socket protocol=%j', protocol)\n\n  // No way we can do anything with the socket\n  if (!protocol || protocol === 'http/1.1' || protocol === 'http/1.0') {\n    debug('to default handler it goes')\n    return this._invokeDefault(socket)\n  }\n\n  socket.setNoDelay(true)\n\n  var connection = transport.connection.create(socket, Object.assign({\n    protocol: /spdy/.test(protocol) ? 'spdy' : 'http2',\n    isServer: true\n  }, state.options.connection || {}))\n\n  // Set version when we are certain\n  if (protocol === 'http2') { connection.start(4) } else if (protocol === 'spdy/3.1') {\n    connection.start(3.1)\n  } else if (protocol === 'spdy/3') { connection.start(3) } else if (protocol === 'spdy/2') {\n    connection.start(2)\n  }\n\n  connection.on('error', function () {\n    socket.destroy()\n  })\n\n  var self = this\n  connection.on('stream', function (stream) {\n    self._onStream(stream)\n  })\n}\n\n// HTTP2 preface\nvar PREFACE = 'PRI * HTTP/2.0\\r\\n\\r\\nSM\\r\\n\\r\\n'\nvar PREFACE_BUFFER = Buffer.from(PREFACE)\n\nfunction hoseFilter (data, callback) {\n  if (data.length < 1) {\n    return callback(null, null)\n  }\n\n  // SPDY!\n  if (data[0] === 0x80) { return callback(null, 'spdy') }\n\n  var avail = Math.min(data.length, PREFACE_BUFFER.length)\n  for (var i = 0; i < avail; i++) {\n    if (data[i] !== PREFACE_BUFFER[i]) { return callback(null, 'http/1.1') }\n  }\n\n  // Not enough bytes to be sure about HTTP2\n  if (avail !== PREFACE_BUFFER.length) { return callback(null, null) }\n\n  return callback(null, 'h2')\n}\n\nproto._onPlainConnection = function _onPlainConnection (socket) {\n  var hose = selectHose.create(socket, {}, hoseFilter)\n\n  var self = this\n  hose.on('select', function (protocol, socket) {\n    self._handleConnection(socket, protocol)\n  })\n\n  hose.on('error', function (err) {\n    debug('hose error %j', err.message)\n    socket.destroy()\n  })\n}\n\nproto._invokeDefault = function _invokeDefault (socket) {\n  var state = this._spdyState\n\n  for (var i = 0; i < state.listeners.length; i++) { state.listeners[i].call(this, socket) }\n}\n\nproto._onStream = function _onStream (stream) {\n  var state = this._spdyState\n\n  var handle = spdy.handle.create(this._spdyState.options, stream)\n\n  var socketOptions = {\n    handle: handle,\n    allowHalfOpen: true\n  }\n\n  var socket\n  if (state.secure) {\n    socket = new spdy.Socket(stream.connection.socket, socketOptions)\n  } else {\n    socket = new net.Socket(socketOptions)\n  }\n\n  // This is needed because the `error` listener, added by the default\n  // `connection` listener, no longer has bound arguments. It relies instead\n  // on the `server` property of the socket. See https://github.com/nodejs/node/pull/11926\n  // for more details.\n  // This is only done for Node.js >= 4 in order to not break compatibility\n  // with older versions of the platform.\n  if (process.versions.modules >= 46) { socket.server = this }\n\n  handle.assignSocket(socket)\n\n  // For v0.8\n  socket.readable = true\n  socket.writable = true\n\n  this._invokeDefault(socket)\n\n  // For v0.8, 0.10 and 0.12\n  if (process.versions.modules < 46) {\n    // eslint-disable-next-line\n    this.listenerCount = EventEmitter.listenerCount.bind(this)\n  }\n\n  // Add lazy `checkContinue` listener, otherwise `res.writeContinue` will be\n  // called before the response object was patched by us.\n  if (stream.headers.expect !== undefined &&\n      /100-continue/i.test(stream.headers.expect) &&\n      this.listenerCount('checkContinue') === 0) {\n    this.once('checkContinue', function (req, res) {\n      res.writeContinue()\n\n      this.emit('request', req, res)\n    })\n  }\n\n  handle.emitRequest()\n}\n\nproto.emit = function emit (event, req, res) {\n  if (event !== 'request' && event !== 'checkContinue') {\n    return EventEmitter.prototype.emit.apply(this, arguments)\n  }\n\n  if (!(req.socket._handle instanceof spdy.handle)) {\n    debug('not spdy req/res')\n    req.isSpdy = false\n    req.spdyVersion = 1\n    res.isSpdy = false\n    res.spdyVersion = 1\n    return EventEmitter.prototype.emit.apply(this, arguments)\n  }\n\n  var handle = req.connection._handle\n\n  req.isSpdy = true\n  req.spdyVersion = handle.getStream().connection.getVersion()\n  res.isSpdy = true\n  res.spdyVersion = req.spdyVersion\n  req.spdyStream = handle.getStream()\n\n  debug('override req/res')\n  res.writeHead = spdy.response.writeHead\n  res.end = spdy.response.end\n  res.push = spdy.response.push\n  res.writeContinue = spdy.response.writeContinue\n  res.spdyStream = handle.getStream()\n\n  res._req = req\n\n  handle.assignRequest(req)\n  handle.assignResponse(res)\n\n  return EventEmitter.prototype.emit.apply(this, arguments)\n}\n\nexports.Server = instantiate(https.Server)\nexports.PlainServer = instantiate(http.Server)\n\nexports.create = function create (base, options, handler) {\n  if (typeof base === 'object') {\n    handler = options\n    options = base\n    base = null\n  }\n\n  if (base) {\n    return instantiate(base).create(options, handler)\n  }\n\n  if (options.spdy && options.spdy.plain) { return exports.PlainServer.create(options, handler) } else {\n    return exports.Server.create(options, handler)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}