{"ast":null,"code":"'use strict';\n/**\n * @typedef {import('../lib/types').XastElement} XastElement\n * @typedef {import('../lib/types').XastParent} XastParent\n * @typedef {import('../lib/types').XastNode} XastNode\n */\n\nconst JSAPI = require('../lib/svgo/jsAPI.js');\n\nexports.type = 'visitor';\nexports.name = 'reusePaths';\nexports.active = false;\nexports.description = 'Finds <path> elements with the same d, fill, and ' + 'stroke, and converts them to <use> elements ' + 'referencing a single <path> def.';\n/**\n * Finds <path> elements with the same d, fill, and stroke, and converts them to\n * <use> elements referencing a single <path> def.\n *\n * @author Jacob Howcroft\n *\n * @type {import('../lib/types').Plugin<void>}\n */\n\nexports.fn = () => {\n  /**\n   * @type {Map<string, Array<XastElement>>}\n   */\n  const paths = new Map();\n  return {\n    element: {\n      enter: node => {\n        if (node.name === 'path' && node.attributes.d != null) {\n          const d = node.attributes.d;\n          const fill = node.attributes.fill || '';\n          const stroke = node.attributes.stroke || '';\n          const key = d + ';s:' + stroke + ';f:' + fill;\n          let list = paths.get(key);\n\n          if (list == null) {\n            list = [];\n            paths.set(key, list);\n          }\n\n          list.push(node);\n        }\n      },\n      exit: (node, parentNode) => {\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          /**\n           * @type {XastElement}\n           */\n          const rawDefs = {\n            type: 'element',\n            name: 'defs',\n            attributes: {},\n            children: []\n          };\n          /**\n           * @type {XastElement}\n           */\n\n          const defsTag = new JSAPI(rawDefs, node);\n          let index = 0;\n\n          for (const list of paths.values()) {\n            if (list.length > 1) {\n              // add reusable path to defs\n\n              /**\n               * @type {XastElement}\n               */\n              const rawPath = {\n                type: 'element',\n                name: 'path',\n                attributes: { ...list[0].attributes\n                },\n                children: []\n              };\n              delete rawPath.attributes.transform;\n              let id;\n\n              if (rawPath.attributes.id == null) {\n                id = 'reuse-' + index;\n                index += 1;\n                rawPath.attributes.id = id;\n              } else {\n                id = rawPath.attributes.id;\n                delete list[0].attributes.id;\n              }\n              /**\n               * @type {XastElement}\n               */\n\n\n              const reusablePath = new JSAPI(rawPath, defsTag);\n              defsTag.children.push(reusablePath); // convert paths to <use>\n\n              for (const pathNode of list) {\n                pathNode.name = 'use';\n                pathNode.attributes['xlink:href'] = '#' + id;\n                delete pathNode.attributes.d;\n                delete pathNode.attributes.stroke;\n                delete pathNode.attributes.fill;\n              }\n            }\n          }\n\n          if (defsTag.children.length !== 0) {\n            if (node.attributes['xmlns:xlink'] == null) {\n              node.attributes['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n            }\n\n            node.children.unshift(defsTag);\n          }\n        }\n      }\n    }\n  };\n};","map":{"version":3,"names":["JSAPI","require","exports","type","name","active","description","fn","paths","Map","element","enter","node","attributes","d","fill","stroke","key","list","get","set","push","exit","parentNode","rawDefs","children","defsTag","index","values","length","rawPath","transform","id","reusablePath","pathNode","unshift"],"sources":["C:/Users/Rohith/mern/frontend/node_modules/postcss-svgo/node_modules/svgo/plugins/reusePaths.js"],"sourcesContent":["'use strict';\n\n/**\n * @typedef {import('../lib/types').XastElement} XastElement\n * @typedef {import('../lib/types').XastParent} XastParent\n * @typedef {import('../lib/types').XastNode} XastNode\n */\n\nconst JSAPI = require('../lib/svgo/jsAPI.js');\n\nexports.type = 'visitor';\nexports.name = 'reusePaths';\nexports.active = false;\nexports.description =\n  'Finds <path> elements with the same d, fill, and ' +\n  'stroke, and converts them to <use> elements ' +\n  'referencing a single <path> def.';\n\n/**\n * Finds <path> elements with the same d, fill, and stroke, and converts them to\n * <use> elements referencing a single <path> def.\n *\n * @author Jacob Howcroft\n *\n * @type {import('../lib/types').Plugin<void>}\n */\nexports.fn = () => {\n  /**\n   * @type {Map<string, Array<XastElement>>}\n   */\n  const paths = new Map();\n\n  return {\n    element: {\n      enter: (node) => {\n        if (node.name === 'path' && node.attributes.d != null) {\n          const d = node.attributes.d;\n          const fill = node.attributes.fill || '';\n          const stroke = node.attributes.stroke || '';\n          const key = d + ';s:' + stroke + ';f:' + fill;\n          let list = paths.get(key);\n          if (list == null) {\n            list = [];\n            paths.set(key, list);\n          }\n          list.push(node);\n        }\n      },\n\n      exit: (node, parentNode) => {\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          /**\n           * @type {XastElement}\n           */\n          const rawDefs = {\n            type: 'element',\n            name: 'defs',\n            attributes: {},\n            children: [],\n          };\n          /**\n           * @type {XastElement}\n           */\n          const defsTag = new JSAPI(rawDefs, node);\n          let index = 0;\n          for (const list of paths.values()) {\n            if (list.length > 1) {\n              // add reusable path to defs\n              /**\n               * @type {XastElement}\n               */\n              const rawPath = {\n                type: 'element',\n                name: 'path',\n                attributes: { ...list[0].attributes },\n                children: [],\n              };\n              delete rawPath.attributes.transform;\n              let id;\n              if (rawPath.attributes.id == null) {\n                id = 'reuse-' + index;\n                index += 1;\n                rawPath.attributes.id = id;\n              } else {\n                id = rawPath.attributes.id;\n                delete list[0].attributes.id;\n              }\n              /**\n               * @type {XastElement}\n               */\n              const reusablePath = new JSAPI(rawPath, defsTag);\n              defsTag.children.push(reusablePath);\n              // convert paths to <use>\n              for (const pathNode of list) {\n                pathNode.name = 'use';\n                pathNode.attributes['xlink:href'] = '#' + id;\n                delete pathNode.attributes.d;\n                delete pathNode.attributes.stroke;\n                delete pathNode.attributes.fill;\n              }\n            }\n          }\n          if (defsTag.children.length !== 0) {\n            if (node.attributes['xmlns:xlink'] == null) {\n              node.attributes['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n            }\n            node.children.unshift(defsTag);\n          }\n        }\n      },\n    },\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}